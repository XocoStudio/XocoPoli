(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function ng(f){return f&&f.__esModule&&Object.prototype.hasOwnProperty.call(f,"default")?f.default:f}var Eh={exports:{}},$r={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j0;function Xb(){if(j0)return $r;j0=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:f,type:s,key:c,ref:r!==void 0?r:null,props:l}}return $r.Fragment=t,$r.jsx=i,$r.jsxs=i,$r}var k0;function qb(){return k0||(k0=1,Eh.exports=Xb()),Eh.exports}var E=qb(),Ah={exports:{}},_t={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F0;function Zb(){if(F0)return _t;F0=1;var f=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function b(C){return C===null||typeof C!="object"?null:(C=x&&C[x]||C["@@iterator"],typeof C=="function"?C:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,w={};function z(C,U,it){this.props=C,this.context=U,this.refs=w,this.updater=it||S}z.prototype.isReactComponent={},z.prototype.setState=function(C,U){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,U,"setState")},z.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function L(){}L.prototype=z.prototype;function X(C,U,it){this.props=C,this.context=U,this.refs=w,this.updater=it||S}var D=X.prototype=new L;D.constructor=X,T(D,z.prototype),D.isPureReactComponent=!0;var I=Array.isArray;function $(){}var Z={H:null,A:null,T:null,S:null},et=Object.prototype.hasOwnProperty;function Et(C,U,it){var at=it.ref;return{$$typeof:f,type:C,key:U,ref:at!==void 0?at:null,props:it}}function Mt(C,U){return Et(C.type,U,C.props)}function vt(C){return typeof C=="object"&&C!==null&&C.$$typeof===f}function dt(C){var U={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(it){return U[it]})}var Vt=/\/+/g;function ee(C,U){return typeof C=="object"&&C!==null&&C.key!=null?dt(""+C.key):U.toString(36)}function Ot(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then($,$):(C.status="pending",C.then(function(U){C.status==="pending"&&(C.status="fulfilled",C.value=U)},function(U){C.status==="pending"&&(C.status="rejected",C.reason=U)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function H(C,U,it,at,yt){var At=typeof C;(At==="undefined"||At==="boolean")&&(C=null);var K=!1;if(C===null)K=!0;else switch(At){case"bigint":case"string":case"number":K=!0;break;case"object":switch(C.$$typeof){case f:case t:K=!0;break;case y:return K=C._init,H(K(C._payload),U,it,at,yt)}}if(K)return yt=yt(C),K=at===""?"."+ee(C,0):at,I(yt)?(it="",K!=null&&(it=K.replace(Vt,"$&/")+"/"),H(yt,U,it,"",function(Dt){return Dt})):yt!=null&&(vt(yt)&&(yt=Mt(yt,it+(yt.key==null||C&&C.key===yt.key?"":(""+yt.key).replace(Vt,"$&/")+"/")+K)),U.push(yt)),1;K=0;var J=at===""?".":at+":";if(I(C))for(var _=0;_<C.length;_++)at=C[_],At=J+ee(at,_),K+=H(at,U,it,At,yt);else if(_=b(C),typeof _=="function")for(C=_.call(C),_=0;!(at=C.next()).done;)at=at.value,At=J+ee(at,_++),K+=H(at,U,it,At,yt);else if(At==="object"){if(typeof C.then=="function")return H(Ot(C),U,it,at,yt);throw U=String(C),Error("Objects are not valid as a React child (found: "+(U==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":U)+"). If you meant to render a collection of children, use an array instead.")}return K}function tt(C,U,it){if(C==null)return C;var at=[],yt=0;return H(C,at,"","",function(At){return U.call(it,At,yt++)}),at}function ut(C){if(C._status===-1){var U=C._result;U=U(),U.then(function(it){(C._status===0||C._status===-1)&&(C._status=1,C._result=it)},function(it){(C._status===0||C._status===-1)&&(C._status=2,C._result=it)}),C._status===-1&&(C._status=0,C._result=U)}if(C._status===1)return C._result.default;throw C._result}var Bt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var U=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(U))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)},Ct={map:tt,forEach:function(C,U,it){tt(C,function(){U.apply(this,arguments)},it)},count:function(C){var U=0;return tt(C,function(){U++}),U},toArray:function(C){return tt(C,function(U){return U})||[]},only:function(C){if(!vt(C))throw Error("React.Children.only expected to receive a single React element child.");return C}};return _t.Activity=g,_t.Children=Ct,_t.Component=z,_t.Fragment=i,_t.Profiler=r,_t.PureComponent=X,_t.StrictMode=s,_t.Suspense=p,_t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Z,_t.__COMPILER_RUNTIME={__proto__:null,c:function(C){return Z.H.useMemoCache(C)}},_t.cache=function(C){return function(){return C.apply(null,arguments)}},_t.cacheSignal=function(){return null},_t.cloneElement=function(C,U,it){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var at=T({},C.props),yt=C.key;if(U!=null)for(At in U.key!==void 0&&(yt=""+U.key),U)!et.call(U,At)||At==="key"||At==="__self"||At==="__source"||At==="ref"&&U.ref===void 0||(at[At]=U[At]);var At=arguments.length-2;if(At===1)at.children=it;else if(1<At){for(var K=Array(At),J=0;J<At;J++)K[J]=arguments[J+2];at.children=K}return Et(C.type,yt,at)},_t.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:l,_context:C},C},_t.createElement=function(C,U,it){var at,yt={},At=null;if(U!=null)for(at in U.key!==void 0&&(At=""+U.key),U)et.call(U,at)&&at!=="key"&&at!=="__self"&&at!=="__source"&&(yt[at]=U[at]);var K=arguments.length-2;if(K===1)yt.children=it;else if(1<K){for(var J=Array(K),_=0;_<K;_++)J[_]=arguments[_+2];yt.children=J}if(C&&C.defaultProps)for(at in K=C.defaultProps,K)yt[at]===void 0&&(yt[at]=K[at]);return Et(C,At,yt)},_t.createRef=function(){return{current:null}},_t.forwardRef=function(C){return{$$typeof:u,render:C}},_t.isValidElement=vt,_t.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:ut}},_t.memo=function(C,U){return{$$typeof:h,type:C,compare:U===void 0?null:U}},_t.startTransition=function(C){var U=Z.T,it={};Z.T=it;try{var at=C(),yt=Z.S;yt!==null&&yt(it,at),typeof at=="object"&&at!==null&&typeof at.then=="function"&&at.then($,Bt)}catch(At){Bt(At)}finally{U!==null&&it.types!==null&&(U.types=it.types),Z.T=U}},_t.unstable_useCacheRefresh=function(){return Z.H.useCacheRefresh()},_t.use=function(C){return Z.H.use(C)},_t.useActionState=function(C,U,it){return Z.H.useActionState(C,U,it)},_t.useCallback=function(C,U){return Z.H.useCallback(C,U)},_t.useContext=function(C){return Z.H.useContext(C)},_t.useDebugValue=function(){},_t.useDeferredValue=function(C,U){return Z.H.useDeferredValue(C,U)},_t.useEffect=function(C,U){return Z.H.useEffect(C,U)},_t.useEffectEvent=function(C){return Z.H.useEffectEvent(C)},_t.useId=function(){return Z.H.useId()},_t.useImperativeHandle=function(C,U,it){return Z.H.useImperativeHandle(C,U,it)},_t.useInsertionEffect=function(C,U){return Z.H.useInsertionEffect(C,U)},_t.useLayoutEffect=function(C,U){return Z.H.useLayoutEffect(C,U)},_t.useMemo=function(C,U){return Z.H.useMemo(C,U)},_t.useOptimistic=function(C,U){return Z.H.useOptimistic(C,U)},_t.useReducer=function(C,U,it){return Z.H.useReducer(C,U,it)},_t.useRef=function(C){return Z.H.useRef(C)},_t.useState=function(C){return Z.H.useState(C)},_t.useSyncExternalStore=function(C,U,it){return Z.H.useSyncExternalStore(C,U,it)},_t.useTransition=function(){return Z.H.useTransition()},_t.version="19.2.3",_t}var H0;function Af(){return H0||(H0=1,Ah.exports=Zb()),Ah.exports}var kt=Af();const Kb=ng(kt);var zh={exports:{}},to={},Ch={exports:{}},Rh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var V0;function Qb(){return V0||(V0=1,(function(f){function t(H,tt){var ut=H.length;H.push(tt);t:for(;0<ut;){var Bt=ut-1>>>1,Ct=H[Bt];if(0<r(Ct,tt))H[Bt]=tt,H[ut]=Ct,ut=Bt;else break t}}function i(H){return H.length===0?null:H[0]}function s(H){if(H.length===0)return null;var tt=H[0],ut=H.pop();if(ut!==tt){H[0]=ut;t:for(var Bt=0,Ct=H.length,C=Ct>>>1;Bt<C;){var U=2*(Bt+1)-1,it=H[U],at=U+1,yt=H[at];if(0>r(it,ut))at<Ct&&0>r(yt,it)?(H[Bt]=yt,H[at]=ut,Bt=at):(H[Bt]=it,H[U]=ut,Bt=U);else if(at<Ct&&0>r(yt,ut))H[Bt]=yt,H[at]=ut,Bt=at;else break t}}return tt}function r(H,tt){var ut=H.sortIndex-tt.sortIndex;return ut!==0?ut:H.id-tt.id}if(f.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;f.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();f.unstable_now=function(){return c.now()-u}}var p=[],h=[],y=1,g=null,x=3,b=!1,S=!1,T=!1,w=!1,z=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function D(H){for(var tt=i(h);tt!==null;){if(tt.callback===null)s(h);else if(tt.startTime<=H)s(h),tt.sortIndex=tt.expirationTime,t(p,tt);else break;tt=i(h)}}function I(H){if(T=!1,D(H),!S)if(i(p)!==null)S=!0,$||($=!0,dt());else{var tt=i(h);tt!==null&&Ot(I,tt.startTime-H)}}var $=!1,Z=-1,et=5,Et=-1;function Mt(){return w?!0:!(f.unstable_now()-Et<et)}function vt(){if(w=!1,$){var H=f.unstable_now();Et=H;var tt=!0;try{t:{S=!1,T&&(T=!1,L(Z),Z=-1),b=!0;var ut=x;try{e:{for(D(H),g=i(p);g!==null&&!(g.expirationTime>H&&Mt());){var Bt=g.callback;if(typeof Bt=="function"){g.callback=null,x=g.priorityLevel;var Ct=Bt(g.expirationTime<=H);if(H=f.unstable_now(),typeof Ct=="function"){g.callback=Ct,D(H),tt=!0;break e}g===i(p)&&s(p),D(H)}else s(p);g=i(p)}if(g!==null)tt=!0;else{var C=i(h);C!==null&&Ot(I,C.startTime-H),tt=!1}}break t}finally{g=null,x=ut,b=!1}tt=void 0}}finally{tt?dt():$=!1}}}var dt;if(typeof X=="function")dt=function(){X(vt)};else if(typeof MessageChannel<"u"){var Vt=new MessageChannel,ee=Vt.port2;Vt.port1.onmessage=vt,dt=function(){ee.postMessage(null)}}else dt=function(){z(vt,0)};function Ot(H,tt){Z=z(function(){H(f.unstable_now())},tt)}f.unstable_IdlePriority=5,f.unstable_ImmediatePriority=1,f.unstable_LowPriority=4,f.unstable_NormalPriority=3,f.unstable_Profiling=null,f.unstable_UserBlockingPriority=2,f.unstable_cancelCallback=function(H){H.callback=null},f.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):et=0<H?Math.floor(1e3/H):5},f.unstable_getCurrentPriorityLevel=function(){return x},f.unstable_next=function(H){switch(x){case 1:case 2:case 3:var tt=3;break;default:tt=x}var ut=x;x=tt;try{return H()}finally{x=ut}},f.unstable_requestPaint=function(){w=!0},f.unstable_runWithPriority=function(H,tt){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ut=x;x=H;try{return tt()}finally{x=ut}},f.unstable_scheduleCallback=function(H,tt,ut){var Bt=f.unstable_now();switch(typeof ut=="object"&&ut!==null?(ut=ut.delay,ut=typeof ut=="number"&&0<ut?Bt+ut:Bt):ut=Bt,H){case 1:var Ct=-1;break;case 2:Ct=250;break;case 5:Ct=1073741823;break;case 4:Ct=1e4;break;default:Ct=5e3}return Ct=ut+Ct,H={id:y++,callback:tt,priorityLevel:H,startTime:ut,expirationTime:Ct,sortIndex:-1},ut>Bt?(H.sortIndex=ut,t(h,H),i(p)===null&&H===i(h)&&(T?(L(Z),Z=-1):T=!0,Ot(I,ut-Bt))):(H.sortIndex=Ct,t(p,H),S||b||(S=!0,$||($=!0,dt()))),H},f.unstable_shouldYield=Mt,f.unstable_wrapCallback=function(H){var tt=x;return function(){var ut=x;x=tt;try{return H.apply(this,arguments)}finally{x=ut}}}})(Rh)),Rh}var I0;function Jb(){return I0||(I0=1,Ch.exports=Qb()),Ch.exports}var Nh={exports:{}},en={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G0;function Pb(){if(G0)return en;G0=1;var f=Af();function t(p){var h="https://react.dev/errors/"+p;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+p+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(p,h,y){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:g==null?null:""+g,children:p,containerInfo:h,implementation:y}}var c=f.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(p,h){if(p==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(p,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return l(p,h,null,y)},en.flushSync=function(p){var h=c.T,y=s.p;try{if(c.T=null,s.p=2,p)return p()}finally{c.T=h,s.p=y,s.d.f()}},en.preconnect=function(p,h){typeof p=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(p,h))},en.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},en.preinit=function(p,h){if(typeof p=="string"&&h&&typeof h.as=="string"){var y=h.as,g=u(y,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,b=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?s.d.S(p,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):y==="script"&&s.d.X(p,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},en.preinitModule=function(p,h){if(typeof p=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=u(h.as,h.crossOrigin);s.d.M(p,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(p)},en.preload=function(p,h){if(typeof p=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,g=u(y,h.crossOrigin);s.d.L(p,y,{crossOrigin:g,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},en.preloadModule=function(p,h){if(typeof p=="string")if(h){var y=u(h.as,h.crossOrigin);s.d.m(p,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(p)},en.requestFormReset=function(p){s.d.r(p)},en.unstable_batchedUpdates=function(p,h){return p(h)},en.useFormState=function(p,h,y){return c.H.useFormState(p,h,y)},en.useFormStatus=function(){return c.H.useHostTransitionStatus()},en.version="19.2.3",en}var Y0;function Wb(){if(Y0)return Nh.exports;Y0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),Nh.exports=Pb(),Nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X0;function $b(){if(X0)return to;X0=1;var f=Jb(),t=Af(),i=Wb();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function c(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function p(e){if(l(e)!==e)throw Error(s(188))}function h(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,o=n;;){var d=a.return;if(d===null)break;var m=d.alternate;if(m===null){if(o=d.return,o!==null){a=o;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===a)return p(d),e;if(m===o)return p(d),n;m=m.sibling}throw Error(s(188))}if(a.return!==o.return)a=d,o=m;else{for(var M=!1,v=d.child;v;){if(v===a){M=!0,a=d,o=m;break}if(v===o){M=!0,o=d,a=m;break}v=v.sibling}if(!M){for(v=m.child;v;){if(v===a){M=!0,a=m,o=d;break}if(v===o){M=!0,o=m,a=d;break}v=v.sibling}if(!M)throw Error(s(189))}}if(a.alternate!==o)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function y(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=y(e),n!==null)return n;e=e.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),X=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),Z=Symbol.for("react.memo"),et=Symbol.for("react.lazy"),Et=Symbol.for("react.activity"),Mt=Symbol.for("react.memo_cache_sentinel"),vt=Symbol.iterator;function dt(e){return e===null||typeof e!="object"?null:(e=vt&&e[vt]||e["@@iterator"],typeof e=="function"?e:null)}var Vt=Symbol.for("react.client.reference");function ee(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Vt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T:return"Fragment";case z:return"Profiler";case w:return"StrictMode";case I:return"Suspense";case $:return"SuspenseList";case Et:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case S:return"Portal";case X:return e.displayName||"Context";case L:return(e._context.displayName||"Context")+".Consumer";case D:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Z:return n=e.displayName||null,n!==null?n:ee(e.type)||"Memo";case et:n=e._payload,e=e._init;try{return ee(e(n))}catch{}}return null}var Ot=Array.isArray,H=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ut={pending:!1,data:null,method:null,action:null},Bt=[],Ct=-1;function C(e){return{current:e}}function U(e){0>Ct||(e.current=Bt[Ct],Bt[Ct]=null,Ct--)}function it(e,n){Ct++,Bt[Ct]=e.current,e.current=n}var at=C(null),yt=C(null),At=C(null),K=C(null);function J(e,n){switch(it(At,n),it(yt,e),it(at,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?r0(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=r0(n),e=o0(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}U(at),it(at,e)}function _(){U(at),U(yt),U(At)}function Dt(e){e.memoizedState!==null&&it(K,e);var n=at.current,a=o0(n,e.type);n!==a&&(it(yt,e),it(at,a))}function bt(e){yt.current===e&&(U(at),U(yt)),K.current===e&&(U(K),Qr._currentValue=ut)}var nt,R;function j(e){if(nt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);nt=n&&n[1]||"",R=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+nt+e+R}var O=!1;function G(e,n){if(!e||O)return"";O=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var W=function(){throw Error()};if(Object.defineProperty(W.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(W,[])}catch(Y){var V=Y}Reflect.construct(e,[],W)}else{try{W.call()}catch(Y){V=Y}e.call(W.prototype)}}else{try{throw Error()}catch(Y){V=Y}(W=e())&&typeof W.catch=="function"&&W.catch(function(){})}}catch(Y){if(Y&&V&&typeof Y.stack=="string")return[Y.stack,V.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=o.DetermineComponentFrameRoot(),M=m[0],v=m[1];if(M&&v){var A=M.split(`
`),F=v.split(`
`);for(d=o=0;o<A.length&&!A[o].includes("DetermineComponentFrameRoot");)o++;for(;d<F.length&&!F[d].includes("DetermineComponentFrameRoot");)d++;if(o===A.length||d===F.length)for(o=A.length-1,d=F.length-1;1<=o&&0<=d&&A[o]!==F[d];)d--;for(;1<=o&&0<=d;o--,d--)if(A[o]!==F[d]){if(o!==1||d!==1)do if(o--,d--,0>d||A[o]!==F[d]){var Q=`
`+A[o].replace(" at new "," at ");return e.displayName&&Q.includes("<anonymous>")&&(Q=Q.replace("<anonymous>",e.displayName)),Q}while(1<=o&&0<=d);break}}}finally{O=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?j(a):""}function st(e,n){switch(e.tag){case 26:case 27:case 5:return j(e.type);case 16:return j("Lazy");case 13:return e.child!==n&&n!==null?j("Suspense Fallback"):j("Suspense");case 19:return j("SuspenseList");case 0:case 15:return G(e.type,!1);case 11:return G(e.type.render,!1);case 1:return G(e.type,!0);case 31:return j("Activity");default:return""}}function St(e){try{var n="",a=null;do n+=st(e,a),a=e,e=e.return;while(e);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var gt=Object.prototype.hasOwnProperty,ht=f.unstable_scheduleCallback,ft=f.unstable_cancelCallback,wt=f.unstable_shouldYield,Zt=f.unstable_requestPaint,mt=f.unstable_now,Nt=f.unstable_getCurrentPriorityLevel,Tt=f.unstable_ImmediatePriority,Wt=f.unstable_UserBlockingPriority,Kt=f.unstable_NormalPriority,$t=f.unstable_LowPriority,fe=f.unstable_IdlePriority,Xe=f.log,Hi=f.unstable_setDisableYieldValue,an=null,Fe=null;function cn(e){if(typeof Xe=="function"&&Hi(e),Fe&&typeof Fe.setStrictMode=="function")try{Fe.setStrictMode(an,e)}catch{}}var Ue=Math.clz32?Math.clz32:He,lr=Math.log,$e=Math.LN2;function He(e){return e>>>=0,e===0?32:31-(lr(e)/$e|0)|0}var Ae=256,ue=262144,ze=4194304;function tn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ni(e,n,a){var o=e.pendingLanes;if(o===0)return 0;var d=0,m=e.suspendedLanes,M=e.pingedLanes;e=e.warmLanes;var v=o&134217727;return v!==0?(o=v&~m,o!==0?d=tn(o):(M&=v,M!==0?d=tn(M):a||(a=v&~e,a!==0&&(d=tn(a))))):(v=o&~m,v!==0?d=tn(v):M!==0?d=tn(M):a||(a=o&~e,a!==0&&(d=tn(a)))),d===0?0:n!==0&&n!==d&&(n&m)===0&&(m=d&-d,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:d}function Yn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function dc(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vf(){var e=ze;return ze<<=1,(ze&62914560)===0&&(ze=4194304),e}function pc(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function cr(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Dg(e,n,a,o,d,m){var M=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var v=e.entanglements,A=e.expirationTimes,F=e.hiddenUpdates;for(a=M&~a;0<a;){var Q=31-Ue(a),W=1<<Q;v[Q]=0,A[Q]=-1;var V=F[Q];if(V!==null)for(F[Q]=null,Q=0;Q<V.length;Q++){var Y=V[Q];Y!==null&&(Y.lane&=-536870913)}a&=~W}o!==0&&If(e,o,0),m!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=m&~(M&~n))}function If(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var o=31-Ue(n);e.entangledLanes|=n,e.entanglements[o]=e.entanglements[o]|1073741824|a&261930}function Gf(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var o=31-Ue(a),d=1<<o;d&n|e[o]&n&&(e[o]|=n),a&=~d}}function Yf(e,n){var a=n&-n;return a=(a&42)!==0?1:mc(a),(a&(e.suspendedLanes|n))!==0?0:a}function mc(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function yc(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Xf(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:R0(e.type))}function qf(e,n){var a=tt.p;try{return tt.p=e,n()}finally{tt.p=a}}var Vi=Math.random().toString(36).slice(2),qe="__reactFiber$"+Vi,un="__reactProps$"+Vi,Ks="__reactContainer$"+Vi,gc="__reactEvents$"+Vi,Bg="__reactListeners$"+Vi,Lg="__reactHandles$"+Vi,Zf="__reactResources$"+Vi,ur="__reactMarker$"+Vi;function xc(e){delete e[qe],delete e[un],delete e[gc],delete e[Bg],delete e[Lg]}function Qs(e){var n=e[qe];if(n)return n;for(var a=e.parentNode;a;){if(n=a[Ks]||a[qe]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=p0(e);e!==null;){if(a=e[qe])return a;e=p0(e)}return n}e=a,a=e.parentNode}return null}function Js(e){if(e=e[qe]||e[Ks]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function hr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function Ps(e){var n=e[Zf];return n||(n=e[Zf]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ve(e){e[ur]=!0}var Kf=new Set,Qf={};function Ss(e,n){Ws(e,n),Ws(e+"Capture",n)}function Ws(e,n){for(Qf[e]=n,e=0;e<n.length;e++)Kf.add(n[e])}var Ug=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jf={},Pf={};function jg(e){return gt.call(Pf,e)?!0:gt.call(Jf,e)?!1:Ug.test(e)?Pf[e]=!0:(Jf[e]=!0,!1)}function Mo(e,n,a){if(jg(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function So(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function ui(e,n,a,o){if(o===null)e.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+o)}}function Rn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Wf(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function kg(e,n,a){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var d=o.get,m=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return d.call(this)},set:function(M){a=""+M,m.call(this,M)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return a},setValue:function(M){a=""+M},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function bc(e){if(!e._valueTracker){var n=Wf(e)?"checked":"value";e._valueTracker=kg(e,n,""+e[n])}}function $f(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),o="";return e&&(o=Wf(e)?e.checked?"true":"false":e.value),e=o,e!==a?(n.setValue(e),!0):!1}function vo(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Fg=/[\n"\\]/g;function Nn(e){return e.replace(Fg,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Mc(e,n,a,o,d,m,M,v){e.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?e.type=M:e.removeAttribute("type"),n!=null?M==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+Rn(n)):e.value!==""+Rn(n)&&(e.value=""+Rn(n)):M!=="submit"&&M!=="reset"||e.removeAttribute("value"),n!=null?Sc(e,M,Rn(n)):a!=null?Sc(e,M,Rn(a)):o!=null&&e.removeAttribute("value"),d==null&&m!=null&&(e.defaultChecked=!!m),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.name=""+Rn(v):e.removeAttribute("name")}function td(e,n,a,o,d,m,M,v){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){bc(e);return}a=a!=null?""+Rn(a):"",n=n!=null?""+Rn(n):a,v||n===e.value||(e.value=n),e.defaultValue=n}o=o??d,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=v?e.checked:!!o,e.defaultChecked=!!o,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(e.name=M),bc(e)}function Sc(e,n,a){n==="number"&&vo(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function $s(e,n,a,o){if(e=e.options,n){n={};for(var d=0;d<a.length;d++)n["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=n.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&o&&(e[a].defaultSelected=!0)}else{for(a=""+Rn(a),n=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,o&&(e[d].defaultSelected=!0);return}n!==null||e[d].disabled||(n=e[d])}n!==null&&(n.selected=!0)}}function ed(e,n,a){if(n!=null&&(n=""+Rn(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+Rn(a):""}function nd(e,n,a,o){if(n==null){if(o!=null){if(a!=null)throw Error(s(92));if(Ot(o)){if(1<o.length)throw Error(s(93));o=o[0]}a=o}a==null&&(a=""),n=a}a=Rn(n),e.defaultValue=a,o=e.textContent,o===a&&o!==""&&o!==null&&(e.value=o),bc(e)}function ta(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var Hg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function id(e,n,a){var o=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?o?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":o?e.setProperty(n,a):typeof a!="number"||a===0||Hg.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function sd(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var o in a)!a.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var d in n)o=n[d],n.hasOwnProperty(d)&&a[d]!==o&&id(e,d,o)}else for(var m in n)n.hasOwnProperty(m)&&id(e,m,n[m])}function vc(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ig=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function To(e){return Ig.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function hi(){}var Tc=null;function wc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ea=null,na=null;function ad(e){var n=Js(e);if(n&&(e=n.stateNode)){var a=e[un]||null;t:switch(e=n.stateNode,n.type){case"input":if(Mc(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Nn(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var o=a[n];if(o!==e&&o.form===e.form){var d=o[un]||null;if(!d)throw Error(s(90));Mc(o,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(n=0;n<a.length;n++)o=a[n],o.form===e.form&&$f(o)}break t;case"textarea":ed(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&$s(e,!!a.multiple,n,!1)}}}var _c=!1;function rd(e,n,a){if(_c)return e(n,a);_c=!0;try{var o=e(n);return o}finally{if(_c=!1,(ea!==null||na!==null)&&(ul(),ea&&(n=ea,e=na,na=ea=null,ad(n),e)))for(n=0;n<e.length;n++)ad(e[n])}}function fr(e,n){var a=e.stateNode;if(a===null)return null;var o=a[un]||null;if(o===null)return null;a=o[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ec=!1;if(fi)try{var dr={};Object.defineProperty(dr,"passive",{get:function(){Ec=!0}}),window.addEventListener("test",dr,dr),window.removeEventListener("test",dr,dr)}catch{Ec=!1}var Ii=null,Ac=null,wo=null;function od(){if(wo)return wo;var e,n=Ac,a=n.length,o,d="value"in Ii?Ii.value:Ii.textContent,m=d.length;for(e=0;e<a&&n[e]===d[e];e++);var M=a-e;for(o=1;o<=M&&n[a-o]===d[m-o];o++);return wo=d.slice(e,1<o?1-o:void 0)}function _o(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Eo(){return!0}function ld(){return!1}function hn(e){function n(a,o,d,m,M){this._reactName=a,this._targetInst=d,this.type=o,this.nativeEvent=m,this.target=M,this.currentTarget=null;for(var v in e)e.hasOwnProperty(v)&&(a=e[v],this[v]=a?a(m):m[v]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Eo:ld,this.isPropagationStopped=ld,this}return g(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Eo)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Eo)},persist:function(){},isPersistent:Eo}),n}var vs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ao=hn(vs),pr=g({},vs,{view:0,detail:0}),Gg=hn(pr),zc,Cc,mr,zo=g({},pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==mr&&(mr&&e.type==="mousemove"?(zc=e.screenX-mr.screenX,Cc=e.screenY-mr.screenY):Cc=zc=0,mr=e),zc)},movementY:function(e){return"movementY"in e?e.movementY:Cc}}),cd=hn(zo),Yg=g({},zo,{dataTransfer:0}),Xg=hn(Yg),qg=g({},pr,{relatedTarget:0}),Rc=hn(qg),Zg=g({},vs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kg=hn(Zg),Qg=g({},vs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Jg=hn(Qg),Pg=g({},vs,{data:0}),ud=hn(Pg),Wg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$g={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ex(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=tx[e])?!!n[e]:!1}function Nc(){return ex}var nx=g({},pr,{key:function(e){if(e.key){var n=Wg[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=_o(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?$g[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nc,charCode:function(e){return e.type==="keypress"?_o(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?_o(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ix=hn(nx),sx=g({},zo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hd=hn(sx),ax=g({},pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nc}),rx=hn(ax),ox=g({},vs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lx=hn(ox),cx=g({},zo,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ux=hn(cx),hx=g({},vs,{newState:0,oldState:0}),fx=hn(hx),dx=[9,13,27,32],Oc=fi&&"CompositionEvent"in window,yr=null;fi&&"documentMode"in document&&(yr=document.documentMode);var px=fi&&"TextEvent"in window&&!yr,fd=fi&&(!Oc||yr&&8<yr&&11>=yr),dd=" ",pd=!1;function md(e,n){switch(e){case"keyup":return dx.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ia=!1;function mx(e,n){switch(e){case"compositionend":return yd(n);case"keypress":return n.which!==32?null:(pd=!0,dd);case"textInput":return e=n.data,e===dd&&pd?null:e;default:return null}}function yx(e,n){if(ia)return e==="compositionend"||!Oc&&md(e,n)?(e=od(),wo=Ac=Ii=null,ia=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return fd&&n.locale!=="ko"?null:n.data;default:return null}}var gx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gd(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!gx[e.type]:n==="textarea"}function xd(e,n,a,o){ea?na?na.push(o):na=[o]:ea=o,n=gl(n,"onChange"),0<n.length&&(a=new Ao("onChange","change",null,a,o),e.push({event:a,listeners:n}))}var gr=null,xr=null;function xx(e){t0(e,0)}function Co(e){var n=hr(e);if($f(n))return e}function bd(e,n){if(e==="change")return n}var Md=!1;if(fi){var Dc;if(fi){var Bc="oninput"in document;if(!Bc){var Sd=document.createElement("div");Sd.setAttribute("oninput","return;"),Bc=typeof Sd.oninput=="function"}Dc=Bc}else Dc=!1;Md=Dc&&(!document.documentMode||9<document.documentMode)}function vd(){gr&&(gr.detachEvent("onpropertychange",Td),xr=gr=null)}function Td(e){if(e.propertyName==="value"&&Co(xr)){var n=[];xd(n,xr,e,wc(e)),rd(xx,n)}}function bx(e,n,a){e==="focusin"?(vd(),gr=n,xr=a,gr.attachEvent("onpropertychange",Td)):e==="focusout"&&vd()}function Mx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Co(xr)}function Sx(e,n){if(e==="click")return Co(n)}function vx(e,n){if(e==="input"||e==="change")return Co(n)}function Tx(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var gn=typeof Object.is=="function"?Object.is:Tx;function br(e,n){if(gn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),o=Object.keys(n);if(a.length!==o.length)return!1;for(o=0;o<a.length;o++){var d=a[o];if(!gt.call(n,d)||!gn(e[d],n[d]))return!1}return!0}function wd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _d(e,n){var a=wd(e);e=0;for(var o;a;){if(a.nodeType===3){if(o=e+a.textContent.length,e<=n&&o>=n)return{node:a,offset:n-e};e=o}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=wd(a)}}function Ed(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Ed(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Ad(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=vo(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=vo(e.document)}return n}function Lc(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var wx=fi&&"documentMode"in document&&11>=document.documentMode,sa=null,Uc=null,Mr=null,jc=!1;function zd(e,n,a){var o=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;jc||sa==null||sa!==vo(o)||(o=sa,"selectionStart"in o&&Lc(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Mr&&br(Mr,o)||(Mr=o,o=gl(Uc,"onSelect"),0<o.length&&(n=new Ao("onSelect","select",null,n,a),e.push({event:n,listeners:o}),n.target=sa)))}function Ts(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var aa={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionrun:Ts("Transition","TransitionRun"),transitionstart:Ts("Transition","TransitionStart"),transitioncancel:Ts("Transition","TransitionCancel"),transitionend:Ts("Transition","TransitionEnd")},kc={},Cd={};fi&&(Cd=document.createElement("div").style,"AnimationEvent"in window||(delete aa.animationend.animation,delete aa.animationiteration.animation,delete aa.animationstart.animation),"TransitionEvent"in window||delete aa.transitionend.transition);function ws(e){if(kc[e])return kc[e];if(!aa[e])return e;var n=aa[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in Cd)return kc[e]=n[a];return e}var Rd=ws("animationend"),Nd=ws("animationiteration"),Od=ws("animationstart"),_x=ws("transitionrun"),Ex=ws("transitionstart"),Ax=ws("transitioncancel"),Dd=ws("transitionend"),Bd=new Map,Fc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fc.push("scrollEnd");function Xn(e,n){Bd.set(e,n),Ss(n,[e])}var Ro=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},On=[],ra=0,Hc=0;function No(){for(var e=ra,n=Hc=ra=0;n<e;){var a=On[n];On[n++]=null;var o=On[n];On[n++]=null;var d=On[n];On[n++]=null;var m=On[n];if(On[n++]=null,o!==null&&d!==null){var M=o.pending;M===null?d.next=d:(d.next=M.next,M.next=d),o.pending=d}m!==0&&Ld(a,d,m)}}function Oo(e,n,a,o){On[ra++]=e,On[ra++]=n,On[ra++]=a,On[ra++]=o,Hc|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function Vc(e,n,a,o){return Oo(e,n,a,o),Do(e)}function _s(e,n){return Oo(e,null,null,n),Do(e)}function Ld(e,n,a){e.lanes|=a;var o=e.alternate;o!==null&&(o.lanes|=a);for(var d=!1,m=e.return;m!==null;)m.childLanes|=a,o=m.alternate,o!==null&&(o.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(d=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,d&&n!==null&&(d=31-Ue(a),e=m.hiddenUpdates,o=e[d],o===null?e[d]=[n]:o.push(n),n.lane=a|536870912),m):null}function Do(e){if(50<Ir)throw Ir=0,Ju=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var oa={};function zx(e,n,a,o){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(e,n,a,o){return new zx(e,n,a,o)}function Ic(e){return e=e.prototype,!(!e||!e.isReactComponent)}function di(e,n){var a=e.alternate;return a===null?(a=xn(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Ud(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Bo(e,n,a,o,d,m){var M=0;if(o=e,typeof e=="function")Ic(e)&&(M=1);else if(typeof e=="string")M=Db(e,a,at.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case Et:return e=xn(31,a,n,d),e.elementType=Et,e.lanes=m,e;case T:return Es(a.children,d,m,n);case w:M=8,d|=24;break;case z:return e=xn(12,a,n,d|2),e.elementType=z,e.lanes=m,e;case I:return e=xn(13,a,n,d),e.elementType=I,e.lanes=m,e;case $:return e=xn(19,a,n,d),e.elementType=$,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case X:M=10;break t;case L:M=9;break t;case D:M=11;break t;case Z:M=14;break t;case et:M=16,o=null;break t}M=29,a=Error(s(130,e===null?"null":typeof e,"")),o=null}return n=xn(M,a,n,d),n.elementType=e,n.type=o,n.lanes=m,n}function Es(e,n,a,o){return e=xn(7,e,o,n),e.lanes=a,e}function Gc(e,n,a){return e=xn(6,e,null,n),e.lanes=a,e}function jd(e){var n=xn(18,null,null,0);return n.stateNode=e,n}function Yc(e,n,a){return n=xn(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var kd=new WeakMap;function Dn(e,n){if(typeof e=="object"&&e!==null){var a=kd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:St(n)},kd.set(e,n),n)}return{value:e,source:n,stack:St(n)}}var la=[],ca=0,Lo=null,Sr=0,Bn=[],Ln=0,Gi=null,ii=1,si="";function pi(e,n){la[ca++]=Sr,la[ca++]=Lo,Lo=e,Sr=n}function Fd(e,n,a){Bn[Ln++]=ii,Bn[Ln++]=si,Bn[Ln++]=Gi,Gi=e;var o=ii;e=si;var d=32-Ue(o)-1;o&=~(1<<d),a+=1;var m=32-Ue(n)+d;if(30<m){var M=d-d%5;m=(o&(1<<M)-1).toString(32),o>>=M,d-=M,ii=1<<32-Ue(n)+d|a<<d|o,si=m+e}else ii=1<<m|a<<d|o,si=e}function Xc(e){e.return!==null&&(pi(e,1),Fd(e,1,0))}function qc(e){for(;e===Lo;)Lo=la[--ca],la[ca]=null,Sr=la[--ca],la[ca]=null;for(;e===Gi;)Gi=Bn[--Ln],Bn[Ln]=null,si=Bn[--Ln],Bn[Ln]=null,ii=Bn[--Ln],Bn[Ln]=null}function Hd(e,n){Bn[Ln++]=ii,Bn[Ln++]=si,Bn[Ln++]=Gi,ii=n.id,si=n.overflow,Gi=e}var Ze=null,de=null,qt=!1,Yi=null,Un=!1,Zc=Error(s(519));function Xi(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vr(Dn(n,e)),Zc}function Vd(e){var n=e.stateNode,a=e.type,o=e.memoizedProps;switch(n[qe]=e,n[un]=o,a){case"dialog":Ut("cancel",n),Ut("close",n);break;case"iframe":case"object":case"embed":Ut("load",n);break;case"video":case"audio":for(a=0;a<Yr.length;a++)Ut(Yr[a],n);break;case"source":Ut("error",n);break;case"img":case"image":case"link":Ut("error",n),Ut("load",n);break;case"details":Ut("toggle",n);break;case"input":Ut("invalid",n),td(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":Ut("invalid",n);break;case"textarea":Ut("invalid",n),nd(n,o.value,o.defaultValue,o.children)}a=o.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||o.suppressHydrationWarning===!0||s0(n.textContent,a)?(o.popover!=null&&(Ut("beforetoggle",n),Ut("toggle",n)),o.onScroll!=null&&Ut("scroll",n),o.onScrollEnd!=null&&Ut("scrollend",n),o.onClick!=null&&(n.onclick=hi),n=!0):n=!1,n||Xi(e,!0)}function Id(e){for(Ze=e.return;Ze;)switch(Ze.tag){case 5:case 31:case 13:Un=!1;return;case 27:case 3:Un=!0;return;default:Ze=Ze.return}}function ua(e){if(e!==Ze)return!1;if(!qt)return Id(e),qt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||hh(e.type,e.memoizedProps)),a=!a),a&&de&&Xi(e),Id(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));de=d0(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));de=d0(e)}else n===27?(n=de,as(e.type)?(e=yh,yh=null,de=e):de=n):de=Ze?kn(e.stateNode.nextSibling):null;return!0}function As(){de=Ze=null,qt=!1}function Kc(){var e=Yi;return e!==null&&(mn===null?mn=e:mn.push.apply(mn,e),Yi=null),e}function vr(e){Yi===null?Yi=[e]:Yi.push(e)}var Qc=C(null),zs=null,mi=null;function qi(e,n,a){it(Qc,n._currentValue),n._currentValue=a}function yi(e){e._currentValue=Qc.current,U(Qc)}function Jc(e,n,a){for(;e!==null;){var o=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),e===a)break;e=e.return}}function Pc(e,n,a,o){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var m=d.dependencies;if(m!==null){var M=d.child;m=m.firstContext;t:for(;m!==null;){var v=m;m=d;for(var A=0;A<n.length;A++)if(v.context===n[A]){m.lanes|=a,v=m.alternate,v!==null&&(v.lanes|=a),Jc(m.return,a,e),o||(M=null);break t}m=v.next}}else if(d.tag===18){if(M=d.return,M===null)throw Error(s(341));M.lanes|=a,m=M.alternate,m!==null&&(m.lanes|=a),Jc(M,a,e),M=null}else M=d.child;if(M!==null)M.return=d;else for(M=d;M!==null;){if(M===e){M=null;break}if(d=M.sibling,d!==null){d.return=M.return,M=d;break}M=M.return}d=M}}function ha(e,n,a,o){e=null;for(var d=n,m=!1;d!==null;){if(!m){if((d.flags&524288)!==0)m=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var M=d.alternate;if(M===null)throw Error(s(387));if(M=M.memoizedProps,M!==null){var v=d.type;gn(d.pendingProps.value,M.value)||(e!==null?e.push(v):e=[v])}}else if(d===K.current){if(M=d.alternate,M===null)throw Error(s(387));M.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Qr):e=[Qr])}d=d.return}e!==null&&Pc(n,e,a,o),n.flags|=262144}function Uo(e){for(e=e.firstContext;e!==null;){if(!gn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Cs(e){zs=e,mi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ke(e){return Gd(zs,e)}function jo(e,n){return zs===null&&Cs(e),Gd(e,n)}function Gd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},mi===null){if(e===null)throw Error(s(308));mi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else mi=mi.next=n;return a}var Cx=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,o){e.push(o)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},Rx=f.unstable_scheduleCallback,Nx=f.unstable_NormalPriority,Ce={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Wc(){return{controller:new Cx,data:new Map,refCount:0}}function Tr(e){e.refCount--,e.refCount===0&&Rx(Nx,function(){e.controller.abort()})}var wr=null,$c=0,fa=0,da=null;function Ox(e,n){if(wr===null){var a=wr=[];$c=0,fa=nh(),da={status:"pending",value:void 0,then:function(o){a.push(o)}}}return $c++,n.then(Yd,Yd),n}function Yd(){if(--$c===0&&wr!==null){da!==null&&(da.status="fulfilled");var e=wr;wr=null,fa=0,da=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Dx(e,n){var a=[],o={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){o.status="fulfilled",o.value=n;for(var d=0;d<a.length;d++)(0,a[d])(n)},function(d){for(o.status="rejected",o.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),o}var Xd=H.S;H.S=function(e,n){zm=mt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ox(e,n),Xd!==null&&Xd(e,n)};var Rs=C(null);function tu(){var e=Rs.current;return e!==null?e:he.pooledCache}function ko(e,n){n===null?it(Rs,Rs.current):it(Rs,n.pool)}function qd(){var e=tu();return e===null?null:{parent:Ce._currentValue,pool:e}}var pa=Error(s(460)),eu=Error(s(474)),Fo=Error(s(542)),Ho={then:function(){}};function Zd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Kd(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(hi,hi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jd(e),e;default:if(typeof n.status=="string")n.then(hi,hi);else{if(e=he,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(o){if(n.status==="pending"){var d=n;d.status="fulfilled",d.value=o}},function(o){if(n.status==="pending"){var d=n;d.status="rejected",d.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Jd(e),e}throw Os=n,pa}}function Ns(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Os=a,pa):a}}var Os=null;function Qd(){if(Os===null)throw Error(s(459));var e=Os;return Os=null,e}function Jd(e){if(e===pa||e===Fo)throw Error(s(483))}var ma=null,_r=0;function Vo(e){var n=_r;return _r+=1,ma===null&&(ma=[]),Kd(ma,e,n)}function Er(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Io(e,n){throw n.$$typeof===x?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Pd(e){function n(B,N){if(e){var k=B.deletions;k===null?(B.deletions=[N],B.flags|=16):k.push(N)}}function a(B,N){if(!e)return null;for(;N!==null;)n(B,N),N=N.sibling;return null}function o(B){for(var N=new Map;B!==null;)B.key!==null?N.set(B.key,B):N.set(B.index,B),B=B.sibling;return N}function d(B,N){return B=di(B,N),B.index=0,B.sibling=null,B}function m(B,N,k){return B.index=k,e?(k=B.alternate,k!==null?(k=k.index,k<N?(B.flags|=67108866,N):k):(B.flags|=67108866,N)):(B.flags|=1048576,N)}function M(B){return e&&B.alternate===null&&(B.flags|=67108866),B}function v(B,N,k,P){return N===null||N.tag!==6?(N=Gc(k,B.mode,P),N.return=B,N):(N=d(N,k),N.return=B,N)}function A(B,N,k,P){var pt=k.type;return pt===T?Q(B,N,k.props.children,P,k.key):N!==null&&(N.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===et&&Ns(pt)===N.type)?(N=d(N,k.props),Er(N,k),N.return=B,N):(N=Bo(k.type,k.key,k.props,null,B.mode,P),Er(N,k),N.return=B,N)}function F(B,N,k,P){return N===null||N.tag!==4||N.stateNode.containerInfo!==k.containerInfo||N.stateNode.implementation!==k.implementation?(N=Yc(k,B.mode,P),N.return=B,N):(N=d(N,k.children||[]),N.return=B,N)}function Q(B,N,k,P,pt){return N===null||N.tag!==7?(N=Es(k,B.mode,P,pt),N.return=B,N):(N=d(N,k),N.return=B,N)}function W(B,N,k){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Gc(""+N,B.mode,k),N.return=B,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case b:return k=Bo(N.type,N.key,N.props,null,B.mode,k),Er(k,N),k.return=B,k;case S:return N=Yc(N,B.mode,k),N.return=B,N;case et:return N=Ns(N),W(B,N,k)}if(Ot(N)||dt(N))return N=Es(N,B.mode,k,null),N.return=B,N;if(typeof N.then=="function")return W(B,Vo(N),k);if(N.$$typeof===X)return W(B,jo(B,N),k);Io(B,N)}return null}function V(B,N,k,P){var pt=N!==null?N.key:null;if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return pt!==null?null:v(B,N,""+k,P);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case b:return k.key===pt?A(B,N,k,P):null;case S:return k.key===pt?F(B,N,k,P):null;case et:return k=Ns(k),V(B,N,k,P)}if(Ot(k)||dt(k))return pt!==null?null:Q(B,N,k,P,null);if(typeof k.then=="function")return V(B,N,Vo(k),P);if(k.$$typeof===X)return V(B,N,jo(B,k),P);Io(B,k)}return null}function Y(B,N,k,P,pt){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return B=B.get(k)||null,v(N,B,""+P,pt);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case b:return B=B.get(P.key===null?k:P.key)||null,A(N,B,P,pt);case S:return B=B.get(P.key===null?k:P.key)||null,F(N,B,P,pt);case et:return P=Ns(P),Y(B,N,k,P,pt)}if(Ot(P)||dt(P))return B=B.get(k)||null,Q(N,B,P,pt,null);if(typeof P.then=="function")return Y(B,N,k,Vo(P),pt);if(P.$$typeof===X)return Y(B,N,k,jo(N,P),pt);Io(N,P)}return null}function rt(B,N,k,P){for(var pt=null,Jt=null,ct=N,Rt=N=0,Gt=null;ct!==null&&Rt<k.length;Rt++){ct.index>Rt?(Gt=ct,ct=null):Gt=ct.sibling;var Pt=V(B,ct,k[Rt],P);if(Pt===null){ct===null&&(ct=Gt);break}e&&ct&&Pt.alternate===null&&n(B,ct),N=m(Pt,N,Rt),Jt===null?pt=Pt:Jt.sibling=Pt,Jt=Pt,ct=Gt}if(Rt===k.length)return a(B,ct),qt&&pi(B,Rt),pt;if(ct===null){for(;Rt<k.length;Rt++)ct=W(B,k[Rt],P),ct!==null&&(N=m(ct,N,Rt),Jt===null?pt=ct:Jt.sibling=ct,Jt=ct);return qt&&pi(B,Rt),pt}for(ct=o(ct);Rt<k.length;Rt++)Gt=Y(ct,B,Rt,k[Rt],P),Gt!==null&&(e&&Gt.alternate!==null&&ct.delete(Gt.key===null?Rt:Gt.key),N=m(Gt,N,Rt),Jt===null?pt=Gt:Jt.sibling=Gt,Jt=Gt);return e&&ct.forEach(function(us){return n(B,us)}),qt&&pi(B,Rt),pt}function xt(B,N,k,P){if(k==null)throw Error(s(151));for(var pt=null,Jt=null,ct=N,Rt=N=0,Gt=null,Pt=k.next();ct!==null&&!Pt.done;Rt++,Pt=k.next()){ct.index>Rt?(Gt=ct,ct=null):Gt=ct.sibling;var us=V(B,ct,Pt.value,P);if(us===null){ct===null&&(ct=Gt);break}e&&ct&&us.alternate===null&&n(B,ct),N=m(us,N,Rt),Jt===null?pt=us:Jt.sibling=us,Jt=us,ct=Gt}if(Pt.done)return a(B,ct),qt&&pi(B,Rt),pt;if(ct===null){for(;!Pt.done;Rt++,Pt=k.next())Pt=W(B,Pt.value,P),Pt!==null&&(N=m(Pt,N,Rt),Jt===null?pt=Pt:Jt.sibling=Pt,Jt=Pt);return qt&&pi(B,Rt),pt}for(ct=o(ct);!Pt.done;Rt++,Pt=k.next())Pt=Y(ct,B,Rt,Pt.value,P),Pt!==null&&(e&&Pt.alternate!==null&&ct.delete(Pt.key===null?Rt:Pt.key),N=m(Pt,N,Rt),Jt===null?pt=Pt:Jt.sibling=Pt,Jt=Pt);return e&&ct.forEach(function(Yb){return n(B,Yb)}),qt&&pi(B,Rt),pt}function oe(B,N,k,P){if(typeof k=="object"&&k!==null&&k.type===T&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case b:t:{for(var pt=k.key;N!==null;){if(N.key===pt){if(pt=k.type,pt===T){if(N.tag===7){a(B,N.sibling),P=d(N,k.props.children),P.return=B,B=P;break t}}else if(N.elementType===pt||typeof pt=="object"&&pt!==null&&pt.$$typeof===et&&Ns(pt)===N.type){a(B,N.sibling),P=d(N,k.props),Er(P,k),P.return=B,B=P;break t}a(B,N);break}else n(B,N);N=N.sibling}k.type===T?(P=Es(k.props.children,B.mode,P,k.key),P.return=B,B=P):(P=Bo(k.type,k.key,k.props,null,B.mode,P),Er(P,k),P.return=B,B=P)}return M(B);case S:t:{for(pt=k.key;N!==null;){if(N.key===pt)if(N.tag===4&&N.stateNode.containerInfo===k.containerInfo&&N.stateNode.implementation===k.implementation){a(B,N.sibling),P=d(N,k.children||[]),P.return=B,B=P;break t}else{a(B,N);break}else n(B,N);N=N.sibling}P=Yc(k,B.mode,P),P.return=B,B=P}return M(B);case et:return k=Ns(k),oe(B,N,k,P)}if(Ot(k))return rt(B,N,k,P);if(dt(k)){if(pt=dt(k),typeof pt!="function")throw Error(s(150));return k=pt.call(k),xt(B,N,k,P)}if(typeof k.then=="function")return oe(B,N,Vo(k),P);if(k.$$typeof===X)return oe(B,N,jo(B,k),P);Io(B,k)}return typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint"?(k=""+k,N!==null&&N.tag===6?(a(B,N.sibling),P=d(N,k),P.return=B,B=P):(a(B,N),P=Gc(k,B.mode,P),P.return=B,B=P),M(B)):a(B,N)}return function(B,N,k,P){try{_r=0;var pt=oe(B,N,k,P);return ma=null,pt}catch(ct){if(ct===pa||ct===Fo)throw ct;var Jt=xn(29,ct,null,B.mode);return Jt.lanes=P,Jt.return=B,Jt}finally{}}}var Ds=Pd(!0),Wd=Pd(!1),Zi=!1;function nu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iu(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Ki(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Qi(e,n,a){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(te&2)!==0){var d=o.pending;return d===null?n.next=n:(n.next=d.next,d.next=n),o.pending=n,n=Do(e),Ld(e,null,a),n}return Oo(e,o,n,a),Do(e)}function Ar(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Gf(e,a)}}function su(e,n){var a=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,a===o)){var d=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var M={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?d=m=M:m=m.next=M,a=a.next}while(a!==null);m===null?d=m=n:m=m.next=n}else d=m=n;a={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:o.shared,callbacks:o.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var au=!1;function zr(){if(au){var e=da;if(e!==null)throw e}}function Cr(e,n,a,o){au=!1;var d=e.updateQueue;Zi=!1;var m=d.firstBaseUpdate,M=d.lastBaseUpdate,v=d.shared.pending;if(v!==null){d.shared.pending=null;var A=v,F=A.next;A.next=null,M===null?m=F:M.next=F,M=A;var Q=e.alternate;Q!==null&&(Q=Q.updateQueue,v=Q.lastBaseUpdate,v!==M&&(v===null?Q.firstBaseUpdate=F:v.next=F,Q.lastBaseUpdate=A))}if(m!==null){var W=d.baseState;M=0,Q=F=A=null,v=m;do{var V=v.lane&-536870913,Y=V!==v.lane;if(Y?(It&V)===V:(o&V)===V){V!==0&&V===fa&&(au=!0),Q!==null&&(Q=Q.next={lane:0,tag:v.tag,payload:v.payload,callback:null,next:null});t:{var rt=e,xt=v;V=n;var oe=a;switch(xt.tag){case 1:if(rt=xt.payload,typeof rt=="function"){W=rt.call(oe,W,V);break t}W=rt;break t;case 3:rt.flags=rt.flags&-65537|128;case 0:if(rt=xt.payload,V=typeof rt=="function"?rt.call(oe,W,V):rt,V==null)break t;W=g({},W,V);break t;case 2:Zi=!0}}V=v.callback,V!==null&&(e.flags|=64,Y&&(e.flags|=8192),Y=d.callbacks,Y===null?d.callbacks=[V]:Y.push(V))}else Y={lane:V,tag:v.tag,payload:v.payload,callback:v.callback,next:null},Q===null?(F=Q=Y,A=W):Q=Q.next=Y,M|=V;if(v=v.next,v===null){if(v=d.shared.pending,v===null)break;Y=v,v=Y.next,Y.next=null,d.lastBaseUpdate=Y,d.shared.pending=null}}while(!0);Q===null&&(A=W),d.baseState=A,d.firstBaseUpdate=F,d.lastBaseUpdate=Q,m===null&&(d.shared.lanes=0),ts|=M,e.lanes=M,e.memoizedState=W}}function $d(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function tp(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)$d(a[e],n)}var ya=C(null),Go=C(0);function ep(e,n){e=_i,it(Go,e),it(ya,n),_i=e|n.baseLanes}function ru(){it(Go,_i),it(ya,ya.current)}function ou(){_i=Go.current,U(ya),U(Go)}var bn=C(null),jn=null;function Ji(e){var n=e.alternate;it(we,we.current&1),it(bn,e),jn===null&&(n===null||ya.current!==null||n.memoizedState!==null)&&(jn=e)}function lu(e){it(we,we.current),it(bn,e),jn===null&&(jn=e)}function np(e){e.tag===22?(it(we,we.current),it(bn,e),jn===null&&(jn=e)):Pi()}function Pi(){it(we,we.current),it(bn,bn.current)}function Mn(e){U(bn),jn===e&&(jn=null),U(we)}var we=C(0);function Yo(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||ph(a)||mh(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var gi=0,zt=null,ae=null,Re=null,Xo=!1,ga=!1,Bs=!1,qo=0,Rr=0,xa=null,Bx=0;function be(){throw Error(s(321))}function cu(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!gn(e[a],n[a]))return!1;return!0}function uu(e,n,a,o,d,m){return gi=m,zt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,H.H=e===null||e.memoizedState===null?Fp:_u,Bs=!1,m=a(o,d),Bs=!1,ga&&(m=sp(n,a,o,d)),ip(e),m}function ip(e){H.H=Dr;var n=ae!==null&&ae.next!==null;if(gi=0,Re=ae=zt=null,Xo=!1,Rr=0,xa=null,n)throw Error(s(300));e===null||Ne||(e=e.dependencies,e!==null&&Uo(e)&&(Ne=!0))}function sp(e,n,a,o){zt=e;var d=0;do{if(ga&&(xa=null),Rr=0,ga=!1,25<=d)throw Error(s(301));if(d+=1,Re=ae=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}H.H=Hp,m=n(a,o)}while(ga);return m}function Lx(){var e=H.H,n=e.useState()[0];return n=typeof n.then=="function"?Nr(n):n,e=e.useState()[0],(ae!==null?ae.memoizedState:null)!==e&&(zt.flags|=1024),n}function hu(){var e=qo!==0;return qo=0,e}function fu(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function du(e){if(Xo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Xo=!1}gi=0,Re=ae=zt=null,ga=!1,Rr=qo=0,xa=null}function rn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?zt.memoizedState=Re=e:Re=Re.next=e,Re}function _e(){if(ae===null){var e=zt.alternate;e=e!==null?e.memoizedState:null}else e=ae.next;var n=Re===null?zt.memoizedState:Re.next;if(n!==null)Re=n,ae=e;else{if(e===null)throw zt.alternate===null?Error(s(467)):Error(s(310));ae=e,e={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},Re===null?zt.memoizedState=Re=e:Re=Re.next=e}return Re}function Zo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Nr(e){var n=Rr;return Rr+=1,xa===null&&(xa=[]),e=Kd(xa,e,n),n=zt,(Re===null?n.memoizedState:Re.next)===null&&(n=n.alternate,H.H=n===null||n.memoizedState===null?Fp:_u),e}function Ko(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Nr(e);if(e.$$typeof===X)return Ke(e)}throw Error(s(438,String(e)))}function pu(e){var n=null,a=zt.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var o=zt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(d){return d.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=Zo(),zt.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),o=0;o<e;o++)a[o]=Mt;return n.index++,a}function xi(e,n){return typeof n=="function"?n(e):n}function Qo(e){var n=_e();return mu(n,ae,e)}function mu(e,n,a){var o=e.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=a;var d=e.baseQueue,m=o.pending;if(m!==null){if(d!==null){var M=d.next;d.next=m.next,m.next=M}n.baseQueue=d=m,o.pending=null}if(m=e.baseState,d===null)e.memoizedState=m;else{n=d.next;var v=M=null,A=null,F=n,Q=!1;do{var W=F.lane&-536870913;if(W!==F.lane?(It&W)===W:(gi&W)===W){var V=F.revertLane;if(V===0)A!==null&&(A=A.next={lane:0,revertLane:0,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),W===fa&&(Q=!0);else if((gi&V)===V){F=F.next,V===fa&&(Q=!0);continue}else W={lane:0,revertLane:F.revertLane,gesture:null,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(v=A=W,M=m):A=A.next=W,zt.lanes|=V,ts|=V;W=F.action,Bs&&a(m,W),m=F.hasEagerState?F.eagerState:a(m,W)}else V={lane:W,revertLane:F.revertLane,gesture:F.gesture,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},A===null?(v=A=V,M=m):A=A.next=V,zt.lanes|=W,ts|=W;F=F.next}while(F!==null&&F!==n);if(A===null?M=m:A.next=v,!gn(m,e.memoizedState)&&(Ne=!0,Q&&(a=da,a!==null)))throw a;e.memoizedState=m,e.baseState=M,e.baseQueue=A,o.lastRenderedState=m}return d===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function yu(e){var n=_e(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var o=a.dispatch,d=a.pending,m=n.memoizedState;if(d!==null){a.pending=null;var M=d=d.next;do m=e(m,M.action),M=M.next;while(M!==d);gn(m,n.memoizedState)||(Ne=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,o]}function ap(e,n,a){var o=zt,d=_e(),m=qt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var M=!gn((ae||d).memoizedState,a);if(M&&(d.memoizedState=a,Ne=!0),d=d.queue,bu(lp.bind(null,o,d,e),[e]),d.getSnapshot!==n||M||Re!==null&&Re.memoizedState.tag&1){if(o.flags|=2048,ba(9,{destroy:void 0},op.bind(null,o,d,a,n),null),he===null)throw Error(s(349));m||(gi&127)!==0||rp(o,n,a)}return a}function rp(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=zt.updateQueue,n===null?(n=Zo(),zt.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function op(e,n,a,o){n.value=a,n.getSnapshot=o,cp(n)&&up(e)}function lp(e,n,a){return a(function(){cp(n)&&up(e)})}function cp(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!gn(e,a)}catch{return!0}}function up(e){var n=_s(e,2);n!==null&&yn(n,e,2)}function gu(e){var n=rn();if(typeof e=="function"){var a=e;if(e=a(),Bs){cn(!0);try{a()}finally{cn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:e},n}function hp(e,n,a,o){return e.baseState=a,mu(e,ae,typeof o=="function"?o:xi)}function Ux(e,n,a,o,d){if(Wo(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){m.listeners.push(M)}};H.T!==null?a(!0):m.isTransition=!1,o(m),a=n.pending,a===null?(m.next=n.pending=m,fp(n,m)):(m.next=a.next,n.pending=a.next=m)}}function fp(e,n){var a=n.action,o=n.payload,d=e.state;if(n.isTransition){var m=H.T,M={};H.T=M;try{var v=a(d,o),A=H.S;A!==null&&A(M,v),dp(e,n,v)}catch(F){xu(e,n,F)}finally{m!==null&&M.types!==null&&(m.types=M.types),H.T=m}}else try{m=a(d,o),dp(e,n,m)}catch(F){xu(e,n,F)}}function dp(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(o){pp(e,n,o)},function(o){return xu(e,n,o)}):pp(e,n,a)}function pp(e,n,a){n.status="fulfilled",n.value=a,mp(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,fp(e,a)))}function xu(e,n,a){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=a,mp(n),n=n.next;while(n!==o)}e.action=null}function mp(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function yp(e,n){return n}function gp(e,n){if(qt){var a=he.formState;if(a!==null){t:{var o=zt;if(qt){if(de){e:{for(var d=de,m=Un;d.nodeType!==8;){if(!m){d=null;break e}if(d=kn(d.nextSibling),d===null){d=null;break e}}m=d.data,d=m==="F!"||m==="F"?d:null}if(d){de=kn(d.nextSibling),o=d.data==="F!";break t}}Xi(o)}o=!1}o&&(n=a[0])}}return a=rn(),a.memoizedState=a.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yp,lastRenderedState:n},a.queue=o,a=Up.bind(null,zt,o),o.dispatch=a,o=gu(!1),m=wu.bind(null,zt,!1,o.queue),o=rn(),d={state:n,dispatch:null,action:e,pending:null},o.queue=d,a=Ux.bind(null,zt,d,m,a),d.dispatch=a,o.memoizedState=e,[n,a,!1]}function xp(e){var n=_e();return bp(n,ae,e)}function bp(e,n,a){if(n=mu(e,n,yp)[0],e=Qo(xi)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=Nr(n)}catch(M){throw M===pa?Fo:M}else o=n;n=_e();var d=n.queue,m=d.dispatch;return a!==n.memoizedState&&(zt.flags|=2048,ba(9,{destroy:void 0},jx.bind(null,d,a),null)),[o,m,e]}function jx(e,n){e.action=n}function Mp(e){var n=_e(),a=ae;if(a!==null)return bp(n,a,e);_e(),n=n.memoizedState,a=_e();var o=a.queue.dispatch;return a.memoizedState=e,[n,o,!1]}function ba(e,n,a,o){return e={tag:e,create:a,deps:o,inst:n,next:null},n=zt.updateQueue,n===null&&(n=Zo(),zt.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(o=a.next,a.next=e,e.next=o,n.lastEffect=e),e}function Sp(){return _e().memoizedState}function Jo(e,n,a,o){var d=rn();zt.flags|=e,d.memoizedState=ba(1|n,{destroy:void 0},a,o===void 0?null:o)}function Po(e,n,a,o){var d=_e();o=o===void 0?null:o;var m=d.memoizedState.inst;ae!==null&&o!==null&&cu(o,ae.memoizedState.deps)?d.memoizedState=ba(n,m,a,o):(zt.flags|=e,d.memoizedState=ba(1|n,m,a,o))}function vp(e,n){Jo(8390656,8,e,n)}function bu(e,n){Po(2048,8,e,n)}function kx(e){zt.flags|=4;var n=zt.updateQueue;if(n===null)n=Zo(),zt.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function Tp(e){var n=_e().memoizedState;return kx({ref:n,nextImpl:e}),function(){if((te&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function wp(e,n){return Po(4,2,e,n)}function _p(e,n){return Po(4,4,e,n)}function Ep(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Ap(e,n,a){a=a!=null?a.concat([e]):null,Po(4,4,Ep.bind(null,n,e),a)}function Mu(){}function zp(e,n){var a=_e();n=n===void 0?null:n;var o=a.memoizedState;return n!==null&&cu(n,o[1])?o[0]:(a.memoizedState=[e,n],e)}function Cp(e,n){var a=_e();n=n===void 0?null:n;var o=a.memoizedState;if(n!==null&&cu(n,o[1]))return o[0];if(o=e(),Bs){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[o,n],o}function Su(e,n,a){return a===void 0||(gi&1073741824)!==0&&(It&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=Rm(),zt.lanes|=e,ts|=e,a)}function Rp(e,n,a,o){return gn(a,n)?a:ya.current!==null?(e=Su(e,a,o),gn(e,n)||(Ne=!0),e):(gi&42)===0||(gi&1073741824)!==0&&(It&261930)===0?(Ne=!0,e.memoizedState=a):(e=Rm(),zt.lanes|=e,ts|=e,n)}function Np(e,n,a,o,d){var m=tt.p;tt.p=m!==0&&8>m?m:8;var M=H.T,v={};H.T=v,wu(e,!1,n,a);try{var A=d(),F=H.S;if(F!==null&&F(v,A),A!==null&&typeof A=="object"&&typeof A.then=="function"){var Q=Dx(A,o);Or(e,n,Q,Tn(e))}else Or(e,n,o,Tn(e))}catch(W){Or(e,n,{then:function(){},status:"rejected",reason:W},Tn())}finally{tt.p=m,M!==null&&v.types!==null&&(M.types=v.types),H.T=M}}function Fx(){}function vu(e,n,a,o){if(e.tag!==5)throw Error(s(476));var d=Op(e).queue;Np(e,d,n,ut,a===null?Fx:function(){return Dp(e),a(o)})}function Op(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:ut,baseState:ut,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:ut},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function Dp(e){var n=Op(e);n.next===null&&(n=e.alternate.memoizedState),Or(e,n.next.queue,{},Tn())}function Tu(){return Ke(Qr)}function Bp(){return _e().memoizedState}function Lp(){return _e().memoizedState}function Hx(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=Tn();e=Ki(a);var o=Qi(n,e,a);o!==null&&(yn(o,n,a),Ar(o,n,a)),n={cache:Wc()},e.payload=n;return}n=n.return}}function Vx(e,n,a){var o=Tn();a={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Wo(e)?jp(n,a):(a=Vc(e,n,a,o),a!==null&&(yn(a,e,o),kp(a,n,o)))}function Up(e,n,a){var o=Tn();Or(e,n,a,o)}function Or(e,n,a,o){var d={lane:o,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Wo(e))jp(n,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var M=n.lastRenderedState,v=m(M,a);if(d.hasEagerState=!0,d.eagerState=v,gn(v,M))return Oo(e,n,d,0),he===null&&No(),!1}catch{}finally{}if(a=Vc(e,n,d,o),a!==null)return yn(a,e,o),kp(a,n,o),!0}return!1}function wu(e,n,a,o){if(o={lane:2,revertLane:nh(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Wo(e)){if(n)throw Error(s(479))}else n=Vc(e,a,o,2),n!==null&&yn(n,e,2)}function Wo(e){var n=e.alternate;return e===zt||n!==null&&n===zt}function jp(e,n){ga=Xo=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function kp(e,n,a){if((a&4194048)!==0){var o=n.lanes;o&=e.pendingLanes,a|=o,n.lanes=a,Gf(e,a)}}var Dr={readContext:Ke,use:Ko,useCallback:be,useContext:be,useEffect:be,useImperativeHandle:be,useLayoutEffect:be,useInsertionEffect:be,useMemo:be,useReducer:be,useRef:be,useState:be,useDebugValue:be,useDeferredValue:be,useTransition:be,useSyncExternalStore:be,useId:be,useHostTransitionStatus:be,useFormState:be,useActionState:be,useOptimistic:be,useMemoCache:be,useCacheRefresh:be};Dr.useEffectEvent=be;var Fp={readContext:Ke,use:Ko,useCallback:function(e,n){return rn().memoizedState=[e,n===void 0?null:n],e},useContext:Ke,useEffect:vp,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,Jo(4194308,4,Ep.bind(null,n,e),a)},useLayoutEffect:function(e,n){return Jo(4194308,4,e,n)},useInsertionEffect:function(e,n){Jo(4,2,e,n)},useMemo:function(e,n){var a=rn();n=n===void 0?null:n;var o=e();if(Bs){cn(!0);try{e()}finally{cn(!1)}}return a.memoizedState=[o,n],o},useReducer:function(e,n,a){var o=rn();if(a!==void 0){var d=a(n);if(Bs){cn(!0);try{a(n)}finally{cn(!1)}}}else d=n;return o.memoizedState=o.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},o.queue=e,e=e.dispatch=Vx.bind(null,zt,e),[o.memoizedState,e]},useRef:function(e){var n=rn();return e={current:e},n.memoizedState=e},useState:function(e){e=gu(e);var n=e.queue,a=Up.bind(null,zt,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Mu,useDeferredValue:function(e,n){var a=rn();return Su(a,e,n)},useTransition:function(){var e=gu(!1);return e=Np.bind(null,zt,e.queue,!0,!1),rn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var o=zt,d=rn();if(qt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),he===null)throw Error(s(349));(It&127)!==0||rp(o,n,a)}d.memoizedState=a;var m={value:a,getSnapshot:n};return d.queue=m,vp(lp.bind(null,o,m,e),[e]),o.flags|=2048,ba(9,{destroy:void 0},op.bind(null,o,m,a,n),null),a},useId:function(){var e=rn(),n=he.identifierPrefix;if(qt){var a=si,o=ii;a=(o&~(1<<32-Ue(o)-1)).toString(32)+a,n="_"+n+"R_"+a,a=qo++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Bx++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Tu,useFormState:gp,useActionState:gp,useOptimistic:function(e){var n=rn();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=wu.bind(null,zt,!0,a),a.dispatch=n,[e,n]},useMemoCache:pu,useCacheRefresh:function(){return rn().memoizedState=Hx.bind(null,zt)},useEffectEvent:function(e){var n=rn(),a={impl:e};return n.memoizedState=a,function(){if((te&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},_u={readContext:Ke,use:Ko,useCallback:zp,useContext:Ke,useEffect:bu,useImperativeHandle:Ap,useInsertionEffect:wp,useLayoutEffect:_p,useMemo:Cp,useReducer:Qo,useRef:Sp,useState:function(){return Qo(xi)},useDebugValue:Mu,useDeferredValue:function(e,n){var a=_e();return Rp(a,ae.memoizedState,e,n)},useTransition:function(){var e=Qo(xi)[0],n=_e().memoizedState;return[typeof e=="boolean"?e:Nr(e),n]},useSyncExternalStore:ap,useId:Bp,useHostTransitionStatus:Tu,useFormState:xp,useActionState:xp,useOptimistic:function(e,n){var a=_e();return hp(a,ae,e,n)},useMemoCache:pu,useCacheRefresh:Lp};_u.useEffectEvent=Tp;var Hp={readContext:Ke,use:Ko,useCallback:zp,useContext:Ke,useEffect:bu,useImperativeHandle:Ap,useInsertionEffect:wp,useLayoutEffect:_p,useMemo:Cp,useReducer:yu,useRef:Sp,useState:function(){return yu(xi)},useDebugValue:Mu,useDeferredValue:function(e,n){var a=_e();return ae===null?Su(a,e,n):Rp(a,ae.memoizedState,e,n)},useTransition:function(){var e=yu(xi)[0],n=_e().memoizedState;return[typeof e=="boolean"?e:Nr(e),n]},useSyncExternalStore:ap,useId:Bp,useHostTransitionStatus:Tu,useFormState:Mp,useActionState:Mp,useOptimistic:function(e,n){var a=_e();return ae!==null?hp(a,ae,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:pu,useCacheRefresh:Lp};Hp.useEffectEvent=Tp;function Eu(e,n,a,o){n=e.memoizedState,a=a(o,n),a=a==null?n:g({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Au={enqueueSetState:function(e,n,a){e=e._reactInternals;var o=Tn(),d=Ki(o);d.payload=n,a!=null&&(d.callback=a),n=Qi(e,d,o),n!==null&&(yn(n,e,o),Ar(n,e,o))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var o=Tn(),d=Ki(o);d.tag=1,d.payload=n,a!=null&&(d.callback=a),n=Qi(e,d,o),n!==null&&(yn(n,e,o),Ar(n,e,o))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=Tn(),o=Ki(a);o.tag=2,n!=null&&(o.callback=n),n=Qi(e,o,a),n!==null&&(yn(n,e,a),Ar(n,e,a))}};function Vp(e,n,a,o,d,m,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,m,M):n.prototype&&n.prototype.isPureReactComponent?!br(a,o)||!br(d,m):!0}function Ip(e,n,a,o){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,o),n.state!==e&&Au.enqueueReplaceState(n,n.state,null)}function Ls(e,n){var a=n;if("ref"in n){a={};for(var o in n)o!=="ref"&&(a[o]=n[o])}if(e=e.defaultProps){a===n&&(a=g({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}function Gp(e){Ro(e)}function Yp(e){console.error(e)}function Xp(e){Ro(e)}function $o(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function qp(e,n,a){try{var o=e.onCaughtError;o(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function zu(e,n,a){return a=Ki(a),a.tag=3,a.payload={element:null},a.callback=function(){$o(e,n)},a}function Zp(e){return e=Ki(e),e.tag=3,e}function Kp(e,n,a,o){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var m=o.value;e.payload=function(){return d(m)},e.callback=function(){qp(n,a,o)}}var M=a.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(e.callback=function(){qp(n,a,o),typeof d!="function"&&(es===null?es=new Set([this]):es.add(this));var v=o.stack;this.componentDidCatch(o.value,{componentStack:v!==null?v:""})})}function Ix(e,n,a,o,d){if(a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=a.alternate,n!==null&&ha(n,a,d,!0),a=bn.current,a!==null){switch(a.tag){case 31:case 13:return jn===null?hl():a.alternate===null&&Me===0&&(Me=3),a.flags&=-257,a.flags|=65536,a.lanes=d,o===Ho?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([o]):n.add(o),$u(e,o,d)),!1;case 22:return a.flags|=65536,o===Ho?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([o]):a.add(o)),$u(e,o,d)),!1}throw Error(s(435,a.tag))}return $u(e,o,d),hl(),!1}if(qt)return n=bn.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=d,o!==Zc&&(e=Error(s(422),{cause:o}),vr(Dn(e,a)))):(o!==Zc&&(n=Error(s(423),{cause:o}),vr(Dn(n,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,o=Dn(o,a),d=zu(e.stateNode,o,d),su(e,d),Me!==4&&(Me=2)),!1;var m=Error(s(520),{cause:o});if(m=Dn(m,a),Vr===null?Vr=[m]:Vr.push(m),Me!==4&&(Me=2),n===null)return!0;o=Dn(o,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=zu(a.stateNode,o,e),su(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(es===null||!es.has(m))))return a.flags|=65536,d&=-d,a.lanes|=d,d=Zp(d),Kp(d,e,a,o),su(a,d),!1}a=a.return}while(a!==null);return!1}var Cu=Error(s(461)),Ne=!1;function Qe(e,n,a,o){n.child=e===null?Wd(n,null,a,o):Ds(n,e.child,a,o)}function Qp(e,n,a,o,d){a=a.render;var m=n.ref;if("ref"in o){var M={};for(var v in o)v!=="ref"&&(M[v]=o[v])}else M=o;return Cs(n),o=uu(e,n,a,M,m,d),v=hu(),e!==null&&!Ne?(fu(e,n,d),bi(e,n,d)):(qt&&v&&Xc(n),n.flags|=1,Qe(e,n,o,d),n.child)}function Jp(e,n,a,o,d){if(e===null){var m=a.type;return typeof m=="function"&&!Ic(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,Pp(e,n,m,o,d)):(e=Bo(a.type,null,o,n,n.mode,d),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!ju(e,d)){var M=m.memoizedProps;if(a=a.compare,a=a!==null?a:br,a(M,o)&&e.ref===n.ref)return bi(e,n,d)}return n.flags|=1,e=di(m,o),e.ref=n.ref,e.return=n,n.child=e}function Pp(e,n,a,o,d){if(e!==null){var m=e.memoizedProps;if(br(m,o)&&e.ref===n.ref)if(Ne=!1,n.pendingProps=o=m,ju(e,d))(e.flags&131072)!==0&&(Ne=!0);else return n.lanes=e.lanes,bi(e,n,d)}return Ru(e,n,a,o,d)}function Wp(e,n,a,o){var d=o.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(o=n.child=e.child,d=0;o!==null;)d=d|o.lanes|o.childLanes,o=o.sibling;o=d&~m}else o=0,n.child=null;return $p(e,n,m,a,o)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&ko(n,m!==null?m.cachePool:null),m!==null?ep(n,m):ru(),np(n);else return o=n.lanes=536870912,$p(e,n,m!==null?m.baseLanes|a:a,a,o)}else m!==null?(ko(n,m.cachePool),ep(n,m),Pi(),n.memoizedState=null):(e!==null&&ko(n,null),ru(),Pi());return Qe(e,n,d,a),n.child}function Br(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function $p(e,n,a,o,d){var m=tu();return m=m===null?null:{parent:Ce._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&ko(n,null),ru(),np(n),e!==null&&ha(e,n,o,!0),n.childLanes=d,null}function tl(e,n){return n=nl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function tm(e,n,a){return Ds(n,e.child,null,a),e=tl(n,n.pendingProps),e.flags|=2,Mn(n),n.memoizedState=null,e}function Gx(e,n,a){var o=n.pendingProps,d=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(qt){if(o.mode==="hidden")return e=tl(n,o),n.lanes=536870912,Br(null,e);if(lu(n),(e=de)?(e=f0(e,Un),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Gi!==null?{id:ii,overflow:si}:null,retryLane:536870912,hydrationErrors:null},a=jd(e),a.return=n,n.child=a,Ze=n,de=null)):e=null,e===null)throw Xi(n);return n.lanes=536870912,null}return tl(n,o)}var m=e.memoizedState;if(m!==null){var M=m.dehydrated;if(lu(n),d)if(n.flags&256)n.flags&=-257,n=tm(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(Ne||ha(e,n,a,!1),d=(a&e.childLanes)!==0,Ne||d){if(o=he,o!==null&&(M=Yf(o,a),M!==0&&M!==m.retryLane))throw m.retryLane=M,_s(e,M),yn(o,e,M),Cu;hl(),n=tm(e,n,a)}else e=m.treeContext,de=kn(M.nextSibling),Ze=n,qt=!0,Yi=null,Un=!1,e!==null&&Hd(n,e),n=tl(n,o),n.flags|=4096;return n}return e=di(e.child,{mode:o.mode,children:o.children}),e.ref=n.ref,n.child=e,e.return=n,e}function el(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Ru(e,n,a,o,d){return Cs(n),a=uu(e,n,a,o,void 0,d),o=hu(),e!==null&&!Ne?(fu(e,n,d),bi(e,n,d)):(qt&&o&&Xc(n),n.flags|=1,Qe(e,n,a,d),n.child)}function em(e,n,a,o,d,m){return Cs(n),n.updateQueue=null,a=sp(n,o,a,d),ip(e),o=hu(),e!==null&&!Ne?(fu(e,n,m),bi(e,n,m)):(qt&&o&&Xc(n),n.flags|=1,Qe(e,n,a,m),n.child)}function nm(e,n,a,o,d){if(Cs(n),n.stateNode===null){var m=oa,M=a.contextType;typeof M=="object"&&M!==null&&(m=Ke(M)),m=new a(o,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Au,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=o,m.state=n.memoizedState,m.refs={},nu(n),M=a.contextType,m.context=typeof M=="object"&&M!==null?Ke(M):oa,m.state=n.memoizedState,M=a.getDerivedStateFromProps,typeof M=="function"&&(Eu(n,a,M,o),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(M=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),M!==m.state&&Au.enqueueReplaceState(m,m.state,null),Cr(n,o,m,d),zr(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(e===null){m=n.stateNode;var v=n.memoizedProps,A=Ls(a,v);m.props=A;var F=m.context,Q=a.contextType;M=oa,typeof Q=="object"&&Q!==null&&(M=Ke(Q));var W=a.getDerivedStateFromProps;Q=typeof W=="function"||typeof m.getSnapshotBeforeUpdate=="function",v=n.pendingProps!==v,Q||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(v||F!==M)&&Ip(n,m,o,M),Zi=!1;var V=n.memoizedState;m.state=V,Cr(n,o,m,d),zr(),F=n.memoizedState,v||V!==F||Zi?(typeof W=="function"&&(Eu(n,a,W,o),F=n.memoizedState),(A=Zi||Vp(n,a,A,o,V,F,M))?(Q||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=F),m.props=o,m.state=F,m.context=M,o=A):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{m=n.stateNode,iu(e,n),M=n.memoizedProps,Q=Ls(a,M),m.props=Q,W=n.pendingProps,V=m.context,F=a.contextType,A=oa,typeof F=="object"&&F!==null&&(A=Ke(F)),v=a.getDerivedStateFromProps,(F=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(M!==W||V!==A)&&Ip(n,m,o,A),Zi=!1,V=n.memoizedState,m.state=V,Cr(n,o,m,d),zr();var Y=n.memoizedState;M!==W||V!==Y||Zi||e!==null&&e.dependencies!==null&&Uo(e.dependencies)?(typeof v=="function"&&(Eu(n,a,v,o),Y=n.memoizedState),(Q=Zi||Vp(n,a,Q,o,V,Y,A)||e!==null&&e.dependencies!==null&&Uo(e.dependencies))?(F||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,Y,A),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,Y,A)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||M===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=Y),m.props=o,m.state=Y,m.context=A,o=Q):(typeof m.componentDidUpdate!="function"||M===e.memoizedProps&&V===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||M===e.memoizedProps&&V===e.memoizedState||(n.flags|=1024),o=!1)}return m=o,el(e,n),o=(n.flags&128)!==0,m||o?(m=n.stateNode,a=o&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&o?(n.child=Ds(n,e.child,null,d),n.child=Ds(n,null,a,d)):Qe(e,n,a,d),n.memoizedState=m.state,e=n.child):e=bi(e,n,d),e}function im(e,n,a,o){return As(),n.flags|=256,Qe(e,n,a,o),n.child}var Nu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ou(e){return{baseLanes:e,cachePool:qd()}}function Du(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=vn),e}function sm(e,n,a){var o=n.pendingProps,d=!1,m=(n.flags&128)!==0,M;if((M=m)||(M=e!==null&&e.memoizedState===null?!1:(we.current&2)!==0),M&&(d=!0,n.flags&=-129),M=(n.flags&32)!==0,n.flags&=-33,e===null){if(qt){if(d?Ji(n):Pi(),(e=de)?(e=f0(e,Un),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Gi!==null?{id:ii,overflow:si}:null,retryLane:536870912,hydrationErrors:null},a=jd(e),a.return=n,n.child=a,Ze=n,de=null)):e=null,e===null)throw Xi(n);return mh(e)?n.lanes=32:n.lanes=536870912,null}var v=o.children;return o=o.fallback,d?(Pi(),d=n.mode,v=nl({mode:"hidden",children:v},d),o=Es(o,d,a,null),v.return=n,o.return=n,v.sibling=o,n.child=v,o=n.child,o.memoizedState=Ou(a),o.childLanes=Du(e,M,a),n.memoizedState=Nu,Br(null,o)):(Ji(n),Bu(n,v))}var A=e.memoizedState;if(A!==null&&(v=A.dehydrated,v!==null)){if(m)n.flags&256?(Ji(n),n.flags&=-257,n=Lu(e,n,a)):n.memoizedState!==null?(Pi(),n.child=e.child,n.flags|=128,n=null):(Pi(),v=o.fallback,d=n.mode,o=nl({mode:"visible",children:o.children},d),v=Es(v,d,a,null),v.flags|=2,o.return=n,v.return=n,o.sibling=v,n.child=o,Ds(n,e.child,null,a),o=n.child,o.memoizedState=Ou(a),o.childLanes=Du(e,M,a),n.memoizedState=Nu,n=Br(null,o));else if(Ji(n),mh(v)){if(M=v.nextSibling&&v.nextSibling.dataset,M)var F=M.dgst;M=F,o=Error(s(419)),o.stack="",o.digest=M,vr({value:o,source:null,stack:null}),n=Lu(e,n,a)}else if(Ne||ha(e,n,a,!1),M=(a&e.childLanes)!==0,Ne||M){if(M=he,M!==null&&(o=Yf(M,a),o!==0&&o!==A.retryLane))throw A.retryLane=o,_s(e,o),yn(M,e,o),Cu;ph(v)||hl(),n=Lu(e,n,a)}else ph(v)?(n.flags|=192,n.child=e.child,n=null):(e=A.treeContext,de=kn(v.nextSibling),Ze=n,qt=!0,Yi=null,Un=!1,e!==null&&Hd(n,e),n=Bu(n,o.children),n.flags|=4096);return n}return d?(Pi(),v=o.fallback,d=n.mode,A=e.child,F=A.sibling,o=di(A,{mode:"hidden",children:o.children}),o.subtreeFlags=A.subtreeFlags&65011712,F!==null?v=di(F,v):(v=Es(v,d,a,null),v.flags|=2),v.return=n,o.return=n,o.sibling=v,n.child=o,Br(null,o),o=n.child,v=e.child.memoizedState,v===null?v=Ou(a):(d=v.cachePool,d!==null?(A=Ce._currentValue,d=d.parent!==A?{parent:A,pool:A}:d):d=qd(),v={baseLanes:v.baseLanes|a,cachePool:d}),o.memoizedState=v,o.childLanes=Du(e,M,a),n.memoizedState=Nu,Br(e.child,o)):(Ji(n),a=e.child,e=a.sibling,a=di(a,{mode:"visible",children:o.children}),a.return=n,a.sibling=null,e!==null&&(M=n.deletions,M===null?(n.deletions=[e],n.flags|=16):M.push(e)),n.child=a,n.memoizedState=null,a)}function Bu(e,n){return n=nl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function nl(e,n){return e=xn(22,e,null,n),e.lanes=0,e}function Lu(e,n,a){return Ds(n,e.child,null,a),e=Bu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function am(e,n,a){e.lanes|=n;var o=e.alternate;o!==null&&(o.lanes|=n),Jc(e.return,n,a)}function Uu(e,n,a,o,d,m){var M=e.memoizedState;M===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:a,tailMode:d,treeForkCount:m}:(M.isBackwards=n,M.rendering=null,M.renderingStartTime=0,M.last=o,M.tail=a,M.tailMode=d,M.treeForkCount=m)}function rm(e,n,a){var o=n.pendingProps,d=o.revealOrder,m=o.tail;o=o.children;var M=we.current,v=(M&2)!==0;if(v?(M=M&1|2,n.flags|=128):M&=1,it(we,M),Qe(e,n,o,a),o=qt?Sr:0,!v&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&am(e,a,n);else if(e.tag===19)am(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(d){case"forwards":for(a=n.child,d=null;a!==null;)e=a.alternate,e!==null&&Yo(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=n.child,n.child=null):(d=a.sibling,a.sibling=null),Uu(n,!1,d,a,m,o);break;case"backwards":case"unstable_legacy-backwards":for(a=null,d=n.child,n.child=null;d!==null;){if(e=d.alternate,e!==null&&Yo(e)===null){n.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Uu(n,!0,a,null,m,o);break;case"together":Uu(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function bi(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),ts|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ha(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=di(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=di(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function ju(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Uo(e)))}function Yx(e,n,a){switch(n.tag){case 3:J(n,n.stateNode.containerInfo),qi(n,Ce,e.memoizedState.cache),As();break;case 27:case 5:Dt(n);break;case 4:J(n,n.stateNode.containerInfo);break;case 10:qi(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,lu(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ji(n),n.flags|=128,null):(a&n.child.childLanes)!==0?sm(e,n,a):(Ji(n),e=bi(e,n,a),e!==null?e.sibling:null);Ji(n);break;case 19:var d=(e.flags&128)!==0;if(o=(a&n.childLanes)!==0,o||(ha(e,n,a,!1),o=(a&n.childLanes)!==0),d){if(o)return rm(e,n,a);n.flags|=128}if(d=n.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),it(we,we.current),o)break;return null;case 22:return n.lanes=0,Wp(e,n,a,n.pendingProps);case 24:qi(n,Ce,e.memoizedState.cache)}return bi(e,n,a)}function om(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)Ne=!0;else{if(!ju(e,a)&&(n.flags&128)===0)return Ne=!1,Yx(e,n,a);Ne=(e.flags&131072)!==0}else Ne=!1,qt&&(n.flags&1048576)!==0&&Fd(n,Sr,n.index);switch(n.lanes=0,n.tag){case 16:t:{var o=n.pendingProps;if(e=Ns(n.elementType),n.type=e,typeof e=="function")Ic(e)?(o=Ls(e,o),n.tag=1,n=nm(null,n,e,o,a)):(n.tag=0,n=Ru(null,n,e,o,a));else{if(e!=null){var d=e.$$typeof;if(d===D){n.tag=11,n=Qp(null,n,e,o,a);break t}else if(d===Z){n.tag=14,n=Jp(null,n,e,o,a);break t}}throw n=ee(e)||e,Error(s(306,n,""))}}return n;case 0:return Ru(e,n,n.type,n.pendingProps,a);case 1:return o=n.type,d=Ls(o,n.pendingProps),nm(e,n,o,d,a);case 3:t:{if(J(n,n.stateNode.containerInfo),e===null)throw Error(s(387));o=n.pendingProps;var m=n.memoizedState;d=m.element,iu(e,n),Cr(n,o,null,a);var M=n.memoizedState;if(o=M.cache,qi(n,Ce,o),o!==m.cache&&Pc(n,[Ce],a,!0),zr(),o=M.element,m.isDehydrated)if(m={element:o,isDehydrated:!1,cache:M.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=im(e,n,o,a);break t}else if(o!==d){d=Dn(Error(s(424)),n),vr(d),n=im(e,n,o,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(de=kn(e.firstChild),Ze=n,qt=!0,Yi=null,Un=!0,a=Wd(n,null,o,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(As(),o===d){n=bi(e,n,a);break t}Qe(e,n,o,a)}n=n.child}return n;case 26:return el(e,n),e===null?(a=x0(n.type,null,n.pendingProps,null))?n.memoizedState=a:qt||(a=n.type,e=n.pendingProps,o=xl(At.current).createElement(a),o[qe]=n,o[un]=e,Je(o,a,e),Ve(o),n.stateNode=o):n.memoizedState=x0(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Dt(n),e===null&&qt&&(o=n.stateNode=m0(n.type,n.pendingProps,At.current),Ze=n,Un=!0,d=de,as(n.type)?(yh=d,de=kn(o.firstChild)):de=d),Qe(e,n,n.pendingProps.children,a),el(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&qt&&((d=o=de)&&(o=Mb(o,n.type,n.pendingProps,Un),o!==null?(n.stateNode=o,Ze=n,de=kn(o.firstChild),Un=!1,d=!0):d=!1),d||Xi(n)),Dt(n),d=n.type,m=n.pendingProps,M=e!==null?e.memoizedProps:null,o=m.children,hh(d,m)?o=null:M!==null&&hh(d,M)&&(n.flags|=32),n.memoizedState!==null&&(d=uu(e,n,Lx,null,null,a),Qr._currentValue=d),el(e,n),Qe(e,n,o,a),n.child;case 6:return e===null&&qt&&((e=a=de)&&(a=Sb(a,n.pendingProps,Un),a!==null?(n.stateNode=a,Ze=n,de=null,e=!0):e=!1),e||Xi(n)),null;case 13:return sm(e,n,a);case 4:return J(n,n.stateNode.containerInfo),o=n.pendingProps,e===null?n.child=Ds(n,null,o,a):Qe(e,n,o,a),n.child;case 11:return Qp(e,n,n.type,n.pendingProps,a);case 7:return Qe(e,n,n.pendingProps,a),n.child;case 8:return Qe(e,n,n.pendingProps.children,a),n.child;case 12:return Qe(e,n,n.pendingProps.children,a),n.child;case 10:return o=n.pendingProps,qi(n,n.type,o.value),Qe(e,n,o.children,a),n.child;case 9:return d=n.type._context,o=n.pendingProps.children,Cs(n),d=Ke(d),o=o(d),n.flags|=1,Qe(e,n,o,a),n.child;case 14:return Jp(e,n,n.type,n.pendingProps,a);case 15:return Pp(e,n,n.type,n.pendingProps,a);case 19:return rm(e,n,a);case 31:return Gx(e,n,a);case 22:return Wp(e,n,a,n.pendingProps);case 24:return Cs(n),o=Ke(Ce),e===null?(d=tu(),d===null&&(d=he,m=Wc(),d.pooledCache=m,m.refCount++,m!==null&&(d.pooledCacheLanes|=a),d=m),n.memoizedState={parent:o,cache:d},nu(n),qi(n,Ce,d)):((e.lanes&a)!==0&&(iu(e,n),Cr(n,null,null,a),zr()),d=e.memoizedState,m=n.memoizedState,d.parent!==o?(d={parent:o,cache:o},n.memoizedState=d,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=d),qi(n,Ce,o)):(o=m.cache,qi(n,Ce,o),o!==d.cache&&Pc(n,[Ce],a,!0))),Qe(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function Mi(e){e.flags|=4}function ku(e,n,a,o,d){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(d&335544128)===d)if(e.stateNode.complete)e.flags|=8192;else if(Bm())e.flags|=8192;else throw Os=Ho,eu}else e.flags&=-16777217}function lm(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!T0(n))if(Bm())e.flags|=8192;else throw Os=Ho,eu}function il(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?Vf():536870912,e.lanes|=n,Ta|=n)}function Lr(e,n){if(!qt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function pe(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,o=0;if(n)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags&65011712,o|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=o,e.childLanes=a,n}function Xx(e,n,a){var o=n.pendingProps;switch(qc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(n),null;case 1:return pe(n),null;case 3:return a=n.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),yi(Ce),_(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(ua(n)?Mi(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Kc())),pe(n),null;case 26:var d=n.type,m=n.memoizedState;return e===null?(Mi(n),m!==null?(pe(n),lm(n,m)):(pe(n),ku(n,d,null,o,a))):m?m!==e.memoizedState?(Mi(n),pe(n),lm(n,m)):(pe(n),n.flags&=-16777217):(e=e.memoizedProps,e!==o&&Mi(n),pe(n),ku(n,d,e,o,a)),null;case 27:if(bt(n),a=At.current,d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Mi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return pe(n),null}e=at.current,ua(n)?Vd(n):(e=m0(d,o,a),n.stateNode=e,Mi(n))}return pe(n),null;case 5:if(bt(n),d=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==o&&Mi(n);else{if(!o){if(n.stateNode===null)throw Error(s(166));return pe(n),null}if(m=at.current,ua(n))Vd(n);else{var M=xl(At.current);switch(m){case 1:m=M.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:m=M.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":m=M.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":m=M.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":m=M.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof o.is=="string"?M.createElement("select",{is:o.is}):M.createElement("select"),o.multiple?m.multiple=!0:o.size&&(m.size=o.size);break;default:m=typeof o.is=="string"?M.createElement(d,{is:o.is}):M.createElement(d)}}m[qe]=n,m[un]=o;t:for(M=n.child;M!==null;){if(M.tag===5||M.tag===6)m.appendChild(M.stateNode);else if(M.tag!==4&&M.tag!==27&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===n)break t;for(;M.sibling===null;){if(M.return===null||M.return===n)break t;M=M.return}M.sibling.return=M.return,M=M.sibling}n.stateNode=m;t:switch(Je(m,d,o),d){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break t;case"img":o=!0;break t;default:o=!1}o&&Mi(n)}}return pe(n),ku(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==o&&Mi(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(s(166));if(e=At.current,ua(n)){if(e=n.stateNode,a=n.memoizedProps,o=null,d=Ze,d!==null)switch(d.tag){case 27:case 5:o=d.memoizedProps}e[qe]=n,e=!!(e.nodeValue===a||o!==null&&o.suppressHydrationWarning===!0||s0(e.nodeValue,a)),e||Xi(n,!0)}else e=xl(e).createTextNode(o),e[qe]=n,n.stateNode=e}return pe(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(o=ua(n),a!==null){if(e===null){if(!o)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[qe]=n}else As(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pe(n),e=!1}else a=Kc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(Mn(n),n):(Mn(n),null);if((n.flags&128)!==0)throw Error(s(558))}return pe(n),null;case 13:if(o=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=ua(n),o!==null&&o.dehydrated!==null){if(e===null){if(!d)throw Error(s(318));if(d=n.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(s(317));d[qe]=n}else As(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;pe(n),d=!1}else d=Kc(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return n.flags&256?(Mn(n),n):(Mn(n),null)}return Mn(n),(n.flags&128)!==0?(n.lanes=a,n):(a=o!==null,e=e!==null&&e.memoizedState!==null,a&&(o=n.child,d=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(d=o.alternate.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==d&&(o.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),il(n,n.updateQueue),pe(n),null);case 4:return _(),e===null&&rh(n.stateNode.containerInfo),pe(n),null;case 10:return yi(n.type),pe(n),null;case 19:if(U(we),o=n.memoizedState,o===null)return pe(n),null;if(d=(n.flags&128)!==0,m=o.rendering,m===null)if(d)Lr(o,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=Yo(e),m!==null){for(n.flags|=128,Lr(o,!1),e=m.updateQueue,n.updateQueue=e,il(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)Ud(a,e),a=a.sibling;return it(we,we.current&1|2),qt&&pi(n,o.treeForkCount),n.child}e=e.sibling}o.tail!==null&&mt()>ll&&(n.flags|=128,d=!0,Lr(o,!1),n.lanes=4194304)}else{if(!d)if(e=Yo(m),e!==null){if(n.flags|=128,d=!0,e=e.updateQueue,n.updateQueue=e,il(n,e),Lr(o,!0),o.tail===null&&o.tailMode==="hidden"&&!m.alternate&&!qt)return pe(n),null}else 2*mt()-o.renderingStartTime>ll&&a!==536870912&&(n.flags|=128,d=!0,Lr(o,!1),n.lanes=4194304);o.isBackwards?(m.sibling=n.child,n.child=m):(e=o.last,e!==null?e.sibling=m:n.child=m,o.last=m)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=mt(),e.sibling=null,a=we.current,it(we,d?a&1|2:a&1),qt&&pi(n,o.treeForkCount),e):(pe(n),null);case 22:case 23:return Mn(n),ou(),o=n.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(a&536870912)!==0&&(n.flags&128)===0&&(pe(n),n.subtreeFlags&6&&(n.flags|=8192)):pe(n),a=n.updateQueue,a!==null&&il(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==a&&(n.flags|=2048),e!==null&&U(Rs),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),yi(Ce),pe(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function qx(e,n){switch(qc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return yi(Ce),_(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return bt(n),null;case 31:if(n.memoizedState!==null){if(Mn(n),n.alternate===null)throw Error(s(340));As()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(Mn(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));As()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return U(we),null;case 4:return _(),null;case 10:return yi(n.type),null;case 22:case 23:return Mn(n),ou(),e!==null&&U(Rs),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return yi(Ce),null;case 25:return null;default:return null}}function cm(e,n){switch(qc(n),n.tag){case 3:yi(Ce),_();break;case 26:case 27:case 5:bt(n);break;case 4:_();break;case 31:n.memoizedState!==null&&Mn(n);break;case 13:Mn(n);break;case 19:U(we);break;case 10:yi(n.type);break;case 22:case 23:Mn(n),ou(),e!==null&&U(Rs);break;case 24:yi(Ce)}}function Ur(e,n){try{var a=n.updateQueue,o=a!==null?a.lastEffect:null;if(o!==null){var d=o.next;a=d;do{if((a.tag&e)===e){o=void 0;var m=a.create,M=a.inst;o=m(),M.destroy=o}a=a.next}while(a!==d)}}catch(v){ie(n,n.return,v)}}function Wi(e,n,a){try{var o=n.updateQueue,d=o!==null?o.lastEffect:null;if(d!==null){var m=d.next;o=m;do{if((o.tag&e)===e){var M=o.inst,v=M.destroy;if(v!==void 0){M.destroy=void 0,d=n;var A=a,F=v;try{F()}catch(Q){ie(d,A,Q)}}}o=o.next}while(o!==m)}}catch(Q){ie(n,n.return,Q)}}function um(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{tp(n,a)}catch(o){ie(e,e.return,o)}}}function hm(e,n,a){a.props=Ls(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(o){ie(e,n,o)}}function jr(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof a=="function"?e.refCleanup=a(o):a.current=o}}catch(d){ie(e,n,d)}}function ai(e,n){var a=e.ref,o=e.refCleanup;if(a!==null)if(typeof o=="function")try{o()}catch(d){ie(e,n,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){ie(e,n,d)}else a.current=null}function fm(e){var n=e.type,a=e.memoizedProps,o=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&o.focus();break t;case"img":a.src?o.src=a.src:a.srcSet&&(o.srcset=a.srcSet)}}catch(d){ie(e,e.return,d)}}function Fu(e,n,a){try{var o=e.stateNode;pb(o,e.type,a,n),o[un]=n}catch(d){ie(e,e.return,d)}}function dm(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&as(e.type)||e.tag===4}function Hu(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||dm(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&as(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Vu(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=hi));else if(o!==4&&(o===27&&as(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Vu(e,n,a),e=e.sibling;e!==null;)Vu(e,n,a),e=e.sibling}function sl(e,n,a){var o=e.tag;if(o===5||o===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(o!==4&&(o===27&&as(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(sl(e,n,a),e=e.sibling;e!==null;)sl(e,n,a),e=e.sibling}function pm(e){var n=e.stateNode,a=e.memoizedProps;try{for(var o=e.type,d=n.attributes;d.length;)n.removeAttributeNode(d[0]);Je(n,o,a),n[qe]=e,n[un]=a}catch(m){ie(e,e.return,m)}}var Si=!1,Oe=!1,Iu=!1,mm=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Zx(e,n){if(e=e.containerInfo,ch=_l,e=Ad(e),Lc(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var o=a.getSelection&&a.getSelection();if(o&&o.rangeCount!==0){a=o.anchorNode;var d=o.anchorOffset,m=o.focusNode;o=o.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var M=0,v=-1,A=-1,F=0,Q=0,W=e,V=null;e:for(;;){for(var Y;W!==a||d!==0&&W.nodeType!==3||(v=M+d),W!==m||o!==0&&W.nodeType!==3||(A=M+o),W.nodeType===3&&(M+=W.nodeValue.length),(Y=W.firstChild)!==null;)V=W,W=Y;for(;;){if(W===e)break e;if(V===a&&++F===d&&(v=M),V===m&&++Q===o&&(A=M),(Y=W.nextSibling)!==null)break;W=V,V=W.parentNode}W=Y}a=v===-1||A===-1?null:{start:v,end:A}}else a=null}a=a||{start:0,end:0}}else a=null;for(uh={focusedElem:e,selectionRange:a},_l=!1,Ie=n;Ie!==null;)if(n=Ie,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Ie=e;else for(;Ie!==null;){switch(n=Ie,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)d=e[a],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,d=m.memoizedProps,m=m.memoizedState,o=a.stateNode;try{var rt=Ls(a.type,d);e=o.getSnapshotBeforeUpdate(rt,m),o.__reactInternalSnapshotBeforeUpdate=e}catch(xt){ie(a,a.return,xt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)dh(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":dh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Ie=e;break}Ie=n.return}}function ym(e,n,a){var o=a.flags;switch(a.tag){case 0:case 11:case 15:Ti(e,a),o&4&&Ur(5,a);break;case 1:if(Ti(e,a),o&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(M){ie(a,a.return,M)}else{var d=Ls(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(d,n,e.__reactInternalSnapshotBeforeUpdate)}catch(M){ie(a,a.return,M)}}o&64&&um(a),o&512&&jr(a,a.return);break;case 3:if(Ti(e,a),o&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{tp(e,n)}catch(M){ie(a,a.return,M)}}break;case 27:n===null&&o&4&&pm(a);case 26:case 5:Ti(e,a),n===null&&o&4&&fm(a),o&512&&jr(a,a.return);break;case 12:Ti(e,a);break;case 31:Ti(e,a),o&4&&bm(e,a);break;case 13:Ti(e,a),o&4&&Mm(e,a),o&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=nb.bind(null,a),vb(e,a))));break;case 22:if(o=a.memoizedState!==null||Si,!o){n=n!==null&&n.memoizedState!==null||Oe,d=Si;var m=Oe;Si=o,(Oe=n)&&!m?wi(e,a,(a.subtreeFlags&8772)!==0):Ti(e,a),Si=d,Oe=m}break;case 30:break;default:Ti(e,a)}}function gm(e){var n=e.alternate;n!==null&&(e.alternate=null,gm(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&xc(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ge=null,fn=!1;function vi(e,n,a){for(a=a.child;a!==null;)xm(e,n,a),a=a.sibling}function xm(e,n,a){if(Fe&&typeof Fe.onCommitFiberUnmount=="function")try{Fe.onCommitFiberUnmount(an,a)}catch{}switch(a.tag){case 26:Oe||ai(a,n),vi(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Oe||ai(a,n);var o=ge,d=fn;as(a.type)&&(ge=a.stateNode,fn=!1),vi(e,n,a),qr(a.stateNode),ge=o,fn=d;break;case 5:Oe||ai(a,n);case 6:if(o=ge,d=fn,ge=null,vi(e,n,a),ge=o,fn=d,ge!==null)if(fn)try{(ge.nodeType===9?ge.body:ge.nodeName==="HTML"?ge.ownerDocument.body:ge).removeChild(a.stateNode)}catch(m){ie(a,n,m)}else try{ge.removeChild(a.stateNode)}catch(m){ie(a,n,m)}break;case 18:ge!==null&&(fn?(e=ge,u0(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Na(e)):u0(ge,a.stateNode));break;case 4:o=ge,d=fn,ge=a.stateNode.containerInfo,fn=!0,vi(e,n,a),ge=o,fn=d;break;case 0:case 11:case 14:case 15:Wi(2,a,n),Oe||Wi(4,a,n),vi(e,n,a);break;case 1:Oe||(ai(a,n),o=a.stateNode,typeof o.componentWillUnmount=="function"&&hm(a,n,o)),vi(e,n,a);break;case 21:vi(e,n,a);break;case 22:Oe=(o=Oe)||a.memoizedState!==null,vi(e,n,a),Oe=o;break;default:vi(e,n,a)}}function bm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Na(e)}catch(a){ie(n,n.return,a)}}}function Mm(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Na(e)}catch(a){ie(n,n.return,a)}}function Kx(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new mm),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new mm),n;default:throw Error(s(435,e.tag))}}function al(e,n){var a=Kx(e);n.forEach(function(o){if(!a.has(o)){a.add(o);var d=ib.bind(null,e,o);o.then(d,d)}})}function dn(e,n){var a=n.deletions;if(a!==null)for(var o=0;o<a.length;o++){var d=a[o],m=e,M=n,v=M;t:for(;v!==null;){switch(v.tag){case 27:if(as(v.type)){ge=v.stateNode,fn=!1;break t}break;case 5:ge=v.stateNode,fn=!1;break t;case 3:case 4:ge=v.stateNode.containerInfo,fn=!0;break t}v=v.return}if(ge===null)throw Error(s(160));xm(m,M,d),ge=null,fn=!1,m=d.alternate,m!==null&&(m.return=null),d.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Sm(n,e),n=n.sibling}var qn=null;function Sm(e,n){var a=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:dn(n,e),pn(e),o&4&&(Wi(3,e,e.return),Ur(3,e),Wi(5,e,e.return));break;case 1:dn(n,e),pn(e),o&512&&(Oe||a===null||ai(a,a.return)),o&64&&Si&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?o:a.concat(o))));break;case 26:var d=qn;if(dn(n,e),pn(e),o&512&&(Oe||a===null||ai(a,a.return)),o&4){var m=a!==null?a.memoizedState:null;if(o=e.memoizedState,a===null)if(o===null)if(e.stateNode===null){t:{o=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(o){case"title":m=d.getElementsByTagName("title")[0],(!m||m[ur]||m[qe]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=d.createElement(o),d.head.insertBefore(m,d.querySelector("head > title"))),Je(m,o,a),m[qe]=e,Ve(m),o=m;break t;case"link":var M=S0("link","href",d).get(o+(a.href||""));if(M){for(var v=0;v<M.length;v++)if(m=M[v],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){M.splice(v,1);break e}}m=d.createElement(o),Je(m,o,a),d.head.appendChild(m);break;case"meta":if(M=S0("meta","content",d).get(o+(a.content||""))){for(v=0;v<M.length;v++)if(m=M[v],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){M.splice(v,1);break e}}m=d.createElement(o),Je(m,o,a),d.head.appendChild(m);break;default:throw Error(s(468,o))}m[qe]=e,Ve(m),o=m}e.stateNode=o}else v0(d,e.type,e.stateNode);else e.stateNode=M0(d,o,e.memoizedProps);else m!==o?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,o===null?v0(d,e.type,e.stateNode):M0(d,o,e.memoizedProps)):o===null&&e.stateNode!==null&&Fu(e,e.memoizedProps,a.memoizedProps)}break;case 27:dn(n,e),pn(e),o&512&&(Oe||a===null||ai(a,a.return)),a!==null&&o&4&&Fu(e,e.memoizedProps,a.memoizedProps);break;case 5:if(dn(n,e),pn(e),o&512&&(Oe||a===null||ai(a,a.return)),e.flags&32){d=e.stateNode;try{ta(d,"")}catch(rt){ie(e,e.return,rt)}}o&4&&e.stateNode!=null&&(d=e.memoizedProps,Fu(e,d,a!==null?a.memoizedProps:d)),o&1024&&(Iu=!0);break;case 6:if(dn(n,e),pn(e),o&4){if(e.stateNode===null)throw Error(s(162));o=e.memoizedProps,a=e.stateNode;try{a.nodeValue=o}catch(rt){ie(e,e.return,rt)}}break;case 3:if(Sl=null,d=qn,qn=bl(n.containerInfo),dn(n,e),qn=d,pn(e),o&4&&a!==null&&a.memoizedState.isDehydrated)try{Na(n.containerInfo)}catch(rt){ie(e,e.return,rt)}Iu&&(Iu=!1,vm(e));break;case 4:o=qn,qn=bl(e.stateNode.containerInfo),dn(n,e),pn(e),qn=o;break;case 12:dn(n,e),pn(e);break;case 31:dn(n,e),pn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,al(e,o)));break;case 13:dn(n,e),pn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ol=mt()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,al(e,o)));break;case 22:d=e.memoizedState!==null;var A=a!==null&&a.memoizedState!==null,F=Si,Q=Oe;if(Si=F||d,Oe=Q||A,dn(n,e),Oe=Q,Si=F,pn(e),o&8192)t:for(n=e.stateNode,n._visibility=d?n._visibility&-2:n._visibility|1,d&&(a===null||A||Si||Oe||Us(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){A=a=n;try{if(m=A.stateNode,d)M=m.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{v=A.stateNode;var W=A.memoizedProps.style,V=W!=null&&W.hasOwnProperty("display")?W.display:null;v.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(rt){ie(A,A.return,rt)}}}else if(n.tag===6){if(a===null){A=n;try{A.stateNode.nodeValue=d?"":A.memoizedProps}catch(rt){ie(A,A.return,rt)}}}else if(n.tag===18){if(a===null){A=n;try{var Y=A.stateNode;d?h0(Y,!0):h0(A.stateNode,!1)}catch(rt){ie(A,A.return,rt)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=e.updateQueue,o!==null&&(a=o.retryQueue,a!==null&&(o.retryQueue=null,al(e,a))));break;case 19:dn(n,e),pn(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,al(e,o)));break;case 30:break;case 21:break;default:dn(n,e),pn(e)}}function pn(e){var n=e.flags;if(n&2){try{for(var a,o=e.return;o!==null;){if(dm(o)){a=o;break}o=o.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var d=a.stateNode,m=Hu(e);sl(e,m,d);break;case 5:var M=a.stateNode;a.flags&32&&(ta(M,""),a.flags&=-33);var v=Hu(e);sl(e,v,M);break;case 3:case 4:var A=a.stateNode.containerInfo,F=Hu(e);Vu(e,F,A);break;default:throw Error(s(161))}}catch(Q){ie(e,e.return,Q)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function vm(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;vm(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Ti(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)ym(e,n.alternate,n),n=n.sibling}function Us(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Wi(4,n,n.return),Us(n);break;case 1:ai(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&hm(n,n.return,a),Us(n);break;case 27:qr(n.stateNode);case 26:case 5:ai(n,n.return),Us(n);break;case 22:n.memoizedState===null&&Us(n);break;case 30:Us(n);break;default:Us(n)}e=e.sibling}}function wi(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,d=e,m=n,M=m.flags;switch(m.tag){case 0:case 11:case 15:wi(d,m,a),Ur(4,m);break;case 1:if(wi(d,m,a),o=m,d=o.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(F){ie(o,o.return,F)}if(o=m,d=o.updateQueue,d!==null){var v=o.stateNode;try{var A=d.shared.hiddenCallbacks;if(A!==null)for(d.shared.hiddenCallbacks=null,d=0;d<A.length;d++)$d(A[d],v)}catch(F){ie(o,o.return,F)}}a&&M&64&&um(m),jr(m,m.return);break;case 27:pm(m);case 26:case 5:wi(d,m,a),a&&o===null&&M&4&&fm(m),jr(m,m.return);break;case 12:wi(d,m,a);break;case 31:wi(d,m,a),a&&M&4&&bm(d,m);break;case 13:wi(d,m,a),a&&M&4&&Mm(d,m);break;case 22:m.memoizedState===null&&wi(d,m,a),jr(m,m.return);break;case 30:break;default:wi(d,m,a)}n=n.sibling}}function Gu(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Tr(a))}function Yu(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Tr(e))}function Zn(e,n,a,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Tm(e,n,a,o),n=n.sibling}function Tm(e,n,a,o){var d=n.flags;switch(n.tag){case 0:case 11:case 15:Zn(e,n,a,o),d&2048&&Ur(9,n);break;case 1:Zn(e,n,a,o);break;case 3:Zn(e,n,a,o),d&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Tr(e)));break;case 12:if(d&2048){Zn(e,n,a,o),e=n.stateNode;try{var m=n.memoizedProps,M=m.id,v=m.onPostCommit;typeof v=="function"&&v(M,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(A){ie(n,n.return,A)}}else Zn(e,n,a,o);break;case 31:Zn(e,n,a,o);break;case 13:Zn(e,n,a,o);break;case 23:break;case 22:m=n.stateNode,M=n.alternate,n.memoizedState!==null?m._visibility&2?Zn(e,n,a,o):kr(e,n):m._visibility&2?Zn(e,n,a,o):(m._visibility|=2,Ma(e,n,a,o,(n.subtreeFlags&10256)!==0||!1)),d&2048&&Gu(M,n);break;case 24:Zn(e,n,a,o),d&2048&&Yu(n.alternate,n);break;default:Zn(e,n,a,o)}}function Ma(e,n,a,o,d){for(d=d&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,M=n,v=a,A=o,F=M.flags;switch(M.tag){case 0:case 11:case 15:Ma(m,M,v,A,d),Ur(8,M);break;case 23:break;case 22:var Q=M.stateNode;M.memoizedState!==null?Q._visibility&2?Ma(m,M,v,A,d):kr(m,M):(Q._visibility|=2,Ma(m,M,v,A,d)),d&&F&2048&&Gu(M.alternate,M);break;case 24:Ma(m,M,v,A,d),d&&F&2048&&Yu(M.alternate,M);break;default:Ma(m,M,v,A,d)}n=n.sibling}}function kr(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,o=n,d=o.flags;switch(o.tag){case 22:kr(a,o),d&2048&&Gu(o.alternate,o);break;case 24:kr(a,o),d&2048&&Yu(o.alternate,o);break;default:kr(a,o)}n=n.sibling}}var Fr=8192;function Sa(e,n,a){if(e.subtreeFlags&Fr)for(e=e.child;e!==null;)wm(e,n,a),e=e.sibling}function wm(e,n,a){switch(e.tag){case 26:Sa(e,n,a),e.flags&Fr&&e.memoizedState!==null&&Bb(a,qn,e.memoizedState,e.memoizedProps);break;case 5:Sa(e,n,a);break;case 3:case 4:var o=qn;qn=bl(e.stateNode.containerInfo),Sa(e,n,a),qn=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Fr,Fr=16777216,Sa(e,n,a),Fr=o):Sa(e,n,a));break;default:Sa(e,n,a)}}function _m(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Hr(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ie=o,Am(o,e)}_m(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Em(e),e=e.sibling}function Em(e){switch(e.tag){case 0:case 11:case 15:Hr(e),e.flags&2048&&Wi(9,e,e.return);break;case 3:Hr(e);break;case 12:Hr(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,rl(e)):Hr(e);break;default:Hr(e)}}function rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var o=n[a];Ie=o,Am(o,e)}_m(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Wi(8,n,n.return),rl(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,rl(n));break;default:rl(n)}e=e.sibling}}function Am(e,n){for(;Ie!==null;){var a=Ie;switch(a.tag){case 0:case 11:case 15:Wi(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var o=a.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Tr(a.memoizedState.cache)}if(o=a.child,o!==null)o.return=a,Ie=o;else t:for(a=e;Ie!==null;){o=Ie;var d=o.sibling,m=o.return;if(gm(o),o===a){Ie=null;break t}if(d!==null){d.return=m,Ie=d;break t}Ie=m}}}var Qx={getCacheForType:function(e){var n=Ke(Ce),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Ke(Ce).controller.signal}},Jx=typeof WeakMap=="function"?WeakMap:Map,te=0,he=null,Lt=null,It=0,ne=0,Sn=null,$i=!1,va=!1,Xu=!1,_i=0,Me=0,ts=0,js=0,qu=0,vn=0,Ta=0,Vr=null,mn=null,Zu=!1,ol=0,zm=0,ll=1/0,cl=null,es=null,je=0,ns=null,wa=null,Ei=0,Ku=0,Qu=null,Cm=null,Ir=0,Ju=null;function Tn(){return(te&2)!==0&&It!==0?It&-It:H.T!==null?nh():Xf()}function Rm(){if(vn===0)if((It&536870912)===0||qt){var e=ue;ue<<=1,(ue&3932160)===0&&(ue=262144),vn=e}else vn=536870912;return e=bn.current,e!==null&&(e.flags|=32),vn}function yn(e,n,a){(e===he&&(ne===2||ne===9)||e.cancelPendingCommit!==null)&&(_a(e,0),is(e,It,vn,!1)),cr(e,a),((te&2)===0||e!==he)&&(e===he&&((te&2)===0&&(js|=a),Me===4&&is(e,It,vn,!1)),ri(e))}function Nm(e,n,a){if((te&6)!==0)throw Error(s(327));var o=!a&&(n&127)===0&&(n&e.expiredLanes)===0||Yn(e,n),d=o?$x(e,n):Wu(e,n,!0),m=o;do{if(d===0){va&&!o&&is(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!Px(a)){d=Wu(e,n,!1),m=!1;continue}if(d===2){if(m=n,e.errorRecoveryDisabledLanes&m)var M=0;else M=e.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){n=M;t:{var v=e;d=Vr;var A=v.current.memoizedState.isDehydrated;if(A&&(_a(v,M).flags|=256),M=Wu(v,M,!1),M!==2){if(Xu&&!A){v.errorRecoveryDisabledLanes|=m,js|=m,d=4;break t}m=mn,mn=d,m!==null&&(mn===null?mn=m:mn.push.apply(mn,m))}d=M}if(m=!1,d!==2)continue}}if(d===1){_a(e,0),is(e,n,0,!0);break}t:{switch(o=e,m=d,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:is(o,n,vn,!$i);break t;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(d=ol+300-mt(),10<d)){if(is(o,n,vn,!$i),ni(o,0,!0)!==0)break t;Ei=n,o.timeoutHandle=l0(Om.bind(null,o,a,mn,cl,Zu,n,vn,js,Ta,$i,m,"Throttled",-0,0),d);break t}Om(o,a,mn,cl,Zu,n,vn,js,Ta,$i,m,null,-0,0)}}break}while(!0);ri(e)}function Om(e,n,a,o,d,m,M,v,A,F,Q,W,V,Y){if(e.timeoutHandle=-1,W=n.subtreeFlags,W&8192||(W&16785408)===16785408){W={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hi},wm(n,m,W);var rt=(m&62914560)===m?ol-mt():(m&4194048)===m?zm-mt():0;if(rt=Lb(W,rt),rt!==null){Ei=m,e.cancelPendingCommit=rt(Hm.bind(null,e,n,m,a,o,d,M,v,A,Q,W,null,V,Y)),is(e,m,M,!F);return}}Hm(e,n,m,a,o,d,M,v,A)}function Px(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var o=0;o<a.length;o++){var d=a[o],m=d.getSnapshot;d=d.value;try{if(!gn(m(),d))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function is(e,n,a,o){n&=~qu,n&=~js,e.suspendedLanes|=n,e.pingedLanes&=~n,o&&(e.warmLanes|=n),o=e.expirationTimes;for(var d=n;0<d;){var m=31-Ue(d),M=1<<m;o[m]=-1,d&=~M}a!==0&&If(e,a,n)}function ul(){return(te&6)===0?(Gr(0),!1):!0}function Pu(){if(Lt!==null){if(ne===0)var e=Lt.return;else e=Lt,mi=zs=null,du(e),ma=null,_r=0,e=Lt;for(;e!==null;)cm(e.alternate,e),e=e.return;Lt=null}}function _a(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,gb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Ei=0,Pu(),he=e,Lt=a=di(e.current,null),It=n,ne=0,Sn=null,$i=!1,va=Yn(e,n),Xu=!1,Ta=vn=qu=js=ts=Me=0,mn=Vr=null,Zu=!1,(n&8)!==0&&(n|=n&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=n;0<o;){var d=31-Ue(o),m=1<<d;n|=e[d],o&=~m}return _i=n,No(),a}function Dm(e,n){zt=null,H.H=Dr,n===pa||n===Fo?(n=Qd(),ne=3):n===eu?(n=Qd(),ne=4):ne=n===Cu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Sn=n,Lt===null&&(Me=1,$o(e,Dn(n,e.current)))}function Bm(){var e=bn.current;return e===null?!0:(It&4194048)===It?jn===null:(It&62914560)===It||(It&536870912)!==0?e===jn:!1}function Lm(){var e=H.H;return H.H=Dr,e===null?Dr:e}function Um(){var e=H.A;return H.A=Qx,e}function hl(){Me=4,$i||(It&4194048)!==It&&bn.current!==null||(va=!0),(ts&134217727)===0&&(js&134217727)===0||he===null||is(he,It,vn,!1)}function Wu(e,n,a){var o=te;te|=2;var d=Lm(),m=Um();(he!==e||It!==n)&&(cl=null,_a(e,n)),n=!1;var M=Me;t:do try{if(ne!==0&&Lt!==null){var v=Lt,A=Sn;switch(ne){case 8:Pu(),M=6;break t;case 3:case 2:case 9:case 6:bn.current===null&&(n=!0);var F=ne;if(ne=0,Sn=null,Ea(e,v,A,F),a&&va){M=0;break t}break;default:F=ne,ne=0,Sn=null,Ea(e,v,A,F)}}Wx(),M=Me;break}catch(Q){Dm(e,Q)}while(!0);return n&&e.shellSuspendCounter++,mi=zs=null,te=o,H.H=d,H.A=m,Lt===null&&(he=null,It=0,No()),M}function Wx(){for(;Lt!==null;)jm(Lt)}function $x(e,n){var a=te;te|=2;var o=Lm(),d=Um();he!==e||It!==n?(cl=null,ll=mt()+500,_a(e,n)):va=Yn(e,n);t:do try{if(ne!==0&&Lt!==null){n=Lt;var m=Sn;e:switch(ne){case 1:ne=0,Sn=null,Ea(e,n,m,1);break;case 2:case 9:if(Zd(m)){ne=0,Sn=null,km(n);break}n=function(){ne!==2&&ne!==9||he!==e||(ne=7),ri(e)},m.then(n,n);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:Zd(m)?(ne=0,Sn=null,km(n)):(ne=0,Sn=null,Ea(e,n,m,7));break;case 5:var M=null;switch(Lt.tag){case 26:M=Lt.memoizedState;case 5:case 27:var v=Lt;if(M?T0(M):v.stateNode.complete){ne=0,Sn=null;var A=v.sibling;if(A!==null)Lt=A;else{var F=v.return;F!==null?(Lt=F,fl(F)):Lt=null}break e}}ne=0,Sn=null,Ea(e,n,m,5);break;case 6:ne=0,Sn=null,Ea(e,n,m,6);break;case 8:Pu(),Me=6;break t;default:throw Error(s(462))}}tb();break}catch(Q){Dm(e,Q)}while(!0);return mi=zs=null,H.H=o,H.A=d,te=a,Lt!==null?0:(he=null,It=0,No(),Me)}function tb(){for(;Lt!==null&&!wt();)jm(Lt)}function jm(e){var n=om(e.alternate,e,_i);e.memoizedProps=e.pendingProps,n===null?fl(e):Lt=n}function km(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=em(a,n,n.pendingProps,n.type,void 0,It);break;case 11:n=em(a,n,n.pendingProps,n.type.render,n.ref,It);break;case 5:du(n);default:cm(a,n),n=Lt=Ud(n,_i),n=om(a,n,_i)}e.memoizedProps=e.pendingProps,n===null?fl(e):Lt=n}function Ea(e,n,a,o){mi=zs=null,du(n),ma=null,_r=0;var d=n.return;try{if(Ix(e,d,n,a,It)){Me=1,$o(e,Dn(a,e.current)),Lt=null;return}}catch(m){if(d!==null)throw Lt=d,m;Me=1,$o(e,Dn(a,e.current)),Lt=null;return}n.flags&32768?(qt||o===1?e=!0:va||(It&536870912)!==0?e=!1:($i=e=!0,(o===2||o===9||o===3||o===6)&&(o=bn.current,o!==null&&o.tag===13&&(o.flags|=16384))),Fm(n,e)):fl(n)}function fl(e){var n=e;do{if((n.flags&32768)!==0){Fm(n,$i);return}e=n.return;var a=Xx(n.alternate,n,_i);if(a!==null){Lt=a;return}if(n=n.sibling,n!==null){Lt=n;return}Lt=n=e}while(n!==null);Me===0&&(Me=5)}function Fm(e,n){do{var a=qx(e.alternate,e);if(a!==null){a.flags&=32767,Lt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Lt=e;return}Lt=e=a}while(e!==null);Me=6,Lt=null}function Hm(e,n,a,o,d,m,M,v,A){e.cancelPendingCommit=null;do dl();while(je!==0);if((te&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=Hc,Dg(e,a,m,M,v,A),e===he&&(Lt=he=null,It=0),wa=n,ns=e,Ei=a,Ku=m,Qu=d,Cm=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sb(Kt,function(){return Xm(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=H.T,H.T=null,d=tt.p,tt.p=2,M=te,te|=4;try{Zx(e,n,a)}finally{te=M,tt.p=d,H.T=o}}je=1,Vm(),Im(),Gm()}}function Vm(){if(je===1){je=0;var e=ns,n=wa,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=H.T,H.T=null;var o=tt.p;tt.p=2;var d=te;te|=4;try{Sm(n,e);var m=uh,M=Ad(e.containerInfo),v=m.focusedElem,A=m.selectionRange;if(M!==v&&v&&v.ownerDocument&&Ed(v.ownerDocument.documentElement,v)){if(A!==null&&Lc(v)){var F=A.start,Q=A.end;if(Q===void 0&&(Q=F),"selectionStart"in v)v.selectionStart=F,v.selectionEnd=Math.min(Q,v.value.length);else{var W=v.ownerDocument||document,V=W&&W.defaultView||window;if(V.getSelection){var Y=V.getSelection(),rt=v.textContent.length,xt=Math.min(A.start,rt),oe=A.end===void 0?xt:Math.min(A.end,rt);!Y.extend&&xt>oe&&(M=oe,oe=xt,xt=M);var B=_d(v,xt),N=_d(v,oe);if(B&&N&&(Y.rangeCount!==1||Y.anchorNode!==B.node||Y.anchorOffset!==B.offset||Y.focusNode!==N.node||Y.focusOffset!==N.offset)){var k=W.createRange();k.setStart(B.node,B.offset),Y.removeAllRanges(),xt>oe?(Y.addRange(k),Y.extend(N.node,N.offset)):(k.setEnd(N.node,N.offset),Y.addRange(k))}}}}for(W=[],Y=v;Y=Y.parentNode;)Y.nodeType===1&&W.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<W.length;v++){var P=W[v];P.element.scrollLeft=P.left,P.element.scrollTop=P.top}}_l=!!ch,uh=ch=null}finally{te=d,tt.p=o,H.T=a}}e.current=n,je=2}}function Im(){if(je===2){je=0;var e=ns,n=wa,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=H.T,H.T=null;var o=tt.p;tt.p=2;var d=te;te|=4;try{ym(e,n.alternate,n)}finally{te=d,tt.p=o,H.T=a}}je=3}}function Gm(){if(je===4||je===3){je=0,Zt();var e=ns,n=wa,a=Ei,o=Cm;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?je=5:(je=0,wa=ns=null,Ym(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(es=null),yc(a),n=n.stateNode,Fe&&typeof Fe.onCommitFiberRoot=="function")try{Fe.onCommitFiberRoot(an,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=H.T,d=tt.p,tt.p=2,H.T=null;try{for(var m=e.onRecoverableError,M=0;M<o.length;M++){var v=o[M];m(v.value,{componentStack:v.stack})}}finally{H.T=n,tt.p=d}}(Ei&3)!==0&&dl(),ri(e),d=e.pendingLanes,(a&261930)!==0&&(d&42)!==0?e===Ju?Ir++:(Ir=0,Ju=e):Ir=0,Gr(0)}}function Ym(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Tr(n)))}function dl(){return Vm(),Im(),Gm(),Xm()}function Xm(){if(je!==5)return!1;var e=ns,n=Ku;Ku=0;var a=yc(Ei),o=H.T,d=tt.p;try{tt.p=32>a?32:a,H.T=null,a=Qu,Qu=null;var m=ns,M=Ei;if(je=0,wa=ns=null,Ei=0,(te&6)!==0)throw Error(s(331));var v=te;if(te|=4,Em(m.current),Tm(m,m.current,M,a),te=v,Gr(0,!1),Fe&&typeof Fe.onPostCommitFiberRoot=="function")try{Fe.onPostCommitFiberRoot(an,m)}catch{}return!0}finally{tt.p=d,H.T=o,Ym(e,n)}}function qm(e,n,a){n=Dn(a,n),n=zu(e.stateNode,n,2),e=Qi(e,n,2),e!==null&&(cr(e,2),ri(e))}function ie(e,n,a){if(e.tag===3)qm(e,e,a);else for(;n!==null;){if(n.tag===3){qm(n,e,a);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(es===null||!es.has(o))){e=Dn(a,e),a=Zp(2),o=Qi(n,a,2),o!==null&&(Kp(a,o,n,e),cr(o,2),ri(o));break}}n=n.return}}function $u(e,n,a){var o=e.pingCache;if(o===null){o=e.pingCache=new Jx;var d=new Set;o.set(n,d)}else d=o.get(n),d===void 0&&(d=new Set,o.set(n,d));d.has(a)||(Xu=!0,d.add(a),e=eb.bind(null,e,n,a),n.then(e,e))}function eb(e,n,a){var o=e.pingCache;o!==null&&o.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,he===e&&(It&a)===a&&(Me===4||Me===3&&(It&62914560)===It&&300>mt()-ol?(te&2)===0&&_a(e,0):qu|=a,Ta===It&&(Ta=0)),ri(e)}function Zm(e,n){n===0&&(n=Vf()),e=_s(e,n),e!==null&&(cr(e,n),ri(e))}function nb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Zm(e,a)}function ib(e,n){var a=0;switch(e.tag){case 31:case 13:var o=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(s(314))}o!==null&&o.delete(n),Zm(e,a)}function sb(e,n){return ht(e,n)}var pl=null,Aa=null,th=!1,ml=!1,eh=!1,ss=0;function ri(e){e!==Aa&&e.next===null&&(Aa===null?pl=Aa=e:Aa=Aa.next=e),ml=!0,th||(th=!0,rb())}function Gr(e,n){if(!eh&&ml){eh=!0;do for(var a=!1,o=pl;o!==null;){if(e!==0){var d=o.pendingLanes;if(d===0)var m=0;else{var M=o.suspendedLanes,v=o.pingedLanes;m=(1<<31-Ue(42|e)+1)-1,m&=d&~(M&~v),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Pm(o,m))}else m=It,m=ni(o,o===he?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(m&3)===0||Yn(o,m)||(a=!0,Pm(o,m));o=o.next}while(a);eh=!1}}function ab(){Km()}function Km(){ml=th=!1;var e=0;ss!==0&&yb()&&(e=ss);for(var n=mt(),a=null,o=pl;o!==null;){var d=o.next,m=Qm(o,n);m===0?(o.next=null,a===null?pl=d:a.next=d,d===null&&(Aa=a)):(a=o,(e!==0||(m&3)!==0)&&(ml=!0)),o=d}je!==0&&je!==5||Gr(e),ss!==0&&(ss=0)}function Qm(e,n){for(var a=e.suspendedLanes,o=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var M=31-Ue(m),v=1<<M,A=d[M];A===-1?((v&a)===0||(v&o)!==0)&&(d[M]=dc(v,n)):A<=n&&(e.expiredLanes|=v),m&=~v}if(n=he,a=It,a=ni(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,a===0||e===n&&(ne===2||ne===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&ft(o),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Yn(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(o!==null&&ft(o),yc(a)){case 2:case 8:a=Wt;break;case 32:a=Kt;break;case 268435456:a=fe;break;default:a=Kt}return o=Jm.bind(null,e),a=ht(a,o),e.callbackPriority=n,e.callbackNode=a,n}return o!==null&&o!==null&&ft(o),e.callbackPriority=2,e.callbackNode=null,2}function Jm(e,n){if(je!==0&&je!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(dl()&&e.callbackNode!==a)return null;var o=It;return o=ni(e,e===he?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(Nm(e,o,n),Qm(e,mt()),e.callbackNode!=null&&e.callbackNode===a?Jm.bind(null,e):null)}function Pm(e,n){if(dl())return null;Nm(e,n,!0)}function rb(){xb(function(){(te&6)!==0?ht(Tt,ab):Km()})}function nh(){if(ss===0){var e=fa;e===0&&(e=Ae,Ae<<=1,(Ae&261888)===0&&(Ae=256)),ss=e}return ss}function Wm(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:To(""+e)}function $m(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function ob(e,n,a,o,d){if(n==="submit"&&a&&a.stateNode===d){var m=Wm((d[un]||null).action),M=o.submitter;M&&(n=(n=M[un]||null)?Wm(n.formAction):M.getAttribute("formAction"),n!==null&&(m=n,M=null));var v=new Ao("action","action",null,o,d);e.push({event:v,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ss!==0){var A=M?$m(d,M):new FormData(d);vu(a,{pending:!0,data:A,method:d.method,action:m},null,A)}}else typeof m=="function"&&(v.preventDefault(),A=M?$m(d,M):new FormData(d),vu(a,{pending:!0,data:A,method:d.method,action:m},m,A))},currentTarget:d}]})}}for(var ih=0;ih<Fc.length;ih++){var sh=Fc[ih],lb=sh.toLowerCase(),cb=sh[0].toUpperCase()+sh.slice(1);Xn(lb,"on"+cb)}Xn(Rd,"onAnimationEnd"),Xn(Nd,"onAnimationIteration"),Xn(Od,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(_x,"onTransitionRun"),Xn(Ex,"onTransitionStart"),Xn(Ax,"onTransitionCancel"),Xn(Dd,"onTransitionEnd"),Ws("onMouseEnter",["mouseout","mouseover"]),Ws("onMouseLeave",["mouseout","mouseover"]),Ws("onPointerEnter",["pointerout","pointerover"]),Ws("onPointerLeave",["pointerout","pointerover"]),Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yr));function t0(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var o=e[a],d=o.event;o=o.listeners;t:{var m=void 0;if(n)for(var M=o.length-1;0<=M;M--){var v=o[M],A=v.instance,F=v.currentTarget;if(v=v.listener,A!==m&&d.isPropagationStopped())break t;m=v,d.currentTarget=F;try{m(d)}catch(Q){Ro(Q)}d.currentTarget=null,m=A}else for(M=0;M<o.length;M++){if(v=o[M],A=v.instance,F=v.currentTarget,v=v.listener,A!==m&&d.isPropagationStopped())break t;m=v,d.currentTarget=F;try{m(d)}catch(Q){Ro(Q)}d.currentTarget=null,m=A}}}}function Ut(e,n){var a=n[gc];a===void 0&&(a=n[gc]=new Set);var o=e+"__bubble";a.has(o)||(e0(n,e,2,!1),a.add(o))}function ah(e,n,a){var o=0;n&&(o|=4),e0(a,e,o,n)}var yl="_reactListening"+Math.random().toString(36).slice(2);function rh(e){if(!e[yl]){e[yl]=!0,Kf.forEach(function(a){a!=="selectionchange"&&(ub.has(a)||ah(a,!1,e),ah(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[yl]||(n[yl]=!0,ah("selectionchange",!1,n))}}function e0(e,n,a,o){switch(R0(n)){case 2:var d=kb;break;case 8:d=Fb;break;default:d=Sh}a=d.bind(null,n,a,e),d=void 0,!Ec||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(d=!0),o?d!==void 0?e.addEventListener(n,a,{capture:!0,passive:d}):e.addEventListener(n,a,!0):d!==void 0?e.addEventListener(n,a,{passive:d}):e.addEventListener(n,a,!1)}function oh(e,n,a,o,d){var m=o;if((n&1)===0&&(n&2)===0&&o!==null)t:for(;;){if(o===null)return;var M=o.tag;if(M===3||M===4){var v=o.stateNode.containerInfo;if(v===d)break;if(M===4)for(M=o.return;M!==null;){var A=M.tag;if((A===3||A===4)&&M.stateNode.containerInfo===d)return;M=M.return}for(;v!==null;){if(M=Qs(v),M===null)return;if(A=M.tag,A===5||A===6||A===26||A===27){o=m=M;continue t}v=v.parentNode}}o=o.return}rd(function(){var F=m,Q=wc(a),W=[];t:{var V=Bd.get(e);if(V!==void 0){var Y=Ao,rt=e;switch(e){case"keypress":if(_o(a)===0)break t;case"keydown":case"keyup":Y=ix;break;case"focusin":rt="focus",Y=Rc;break;case"focusout":rt="blur",Y=Rc;break;case"beforeblur":case"afterblur":Y=Rc;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=cd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=Xg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=rx;break;case Rd:case Nd:case Od:Y=Kg;break;case Dd:Y=lx;break;case"scroll":case"scrollend":Y=Gg;break;case"wheel":Y=ux;break;case"copy":case"cut":case"paste":Y=Jg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=hd;break;case"toggle":case"beforetoggle":Y=fx}var xt=(n&4)!==0,oe=!xt&&(e==="scroll"||e==="scrollend"),B=xt?V!==null?V+"Capture":null:V;xt=[];for(var N=F,k;N!==null;){var P=N;if(k=P.stateNode,P=P.tag,P!==5&&P!==26&&P!==27||k===null||B===null||(P=fr(N,B),P!=null&&xt.push(Xr(N,P,k))),oe)break;N=N.return}0<xt.length&&(V=new Y(V,rt,null,a,Q),W.push({event:V,listeners:xt}))}}if((n&7)===0){t:{if(V=e==="mouseover"||e==="pointerover",Y=e==="mouseout"||e==="pointerout",V&&a!==Tc&&(rt=a.relatedTarget||a.fromElement)&&(Qs(rt)||rt[Ks]))break t;if((Y||V)&&(V=Q.window===Q?Q:(V=Q.ownerDocument)?V.defaultView||V.parentWindow:window,Y?(rt=a.relatedTarget||a.toElement,Y=F,rt=rt?Qs(rt):null,rt!==null&&(oe=l(rt),xt=rt.tag,rt!==oe||xt!==5&&xt!==27&&xt!==6)&&(rt=null)):(Y=null,rt=F),Y!==rt)){if(xt=cd,P="onMouseLeave",B="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(xt=hd,P="onPointerLeave",B="onPointerEnter",N="pointer"),oe=Y==null?V:hr(Y),k=rt==null?V:hr(rt),V=new xt(P,N+"leave",Y,a,Q),V.target=oe,V.relatedTarget=k,P=null,Qs(Q)===F&&(xt=new xt(B,N+"enter",rt,a,Q),xt.target=k,xt.relatedTarget=oe,P=xt),oe=P,Y&&rt)e:{for(xt=hb,B=Y,N=rt,k=0,P=B;P;P=xt(P))k++;P=0;for(var pt=N;pt;pt=xt(pt))P++;for(;0<k-P;)B=xt(B),k--;for(;0<P-k;)N=xt(N),P--;for(;k--;){if(B===N||N!==null&&B===N.alternate){xt=B;break e}B=xt(B),N=xt(N)}xt=null}else xt=null;Y!==null&&n0(W,V,Y,xt,!1),rt!==null&&oe!==null&&n0(W,oe,rt,xt,!0)}}t:{if(V=F?hr(F):window,Y=V.nodeName&&V.nodeName.toLowerCase(),Y==="select"||Y==="input"&&V.type==="file")var Jt=bd;else if(gd(V))if(Md)Jt=vx;else{Jt=Mx;var ct=bx}else Y=V.nodeName,!Y||Y.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?F&&vc(F.elementType)&&(Jt=bd):Jt=Sx;if(Jt&&(Jt=Jt(e,F))){xd(W,Jt,a,Q);break t}ct&&ct(e,V,F),e==="focusout"&&F&&V.type==="number"&&F.memoizedProps.value!=null&&Sc(V,"number",V.value)}switch(ct=F?hr(F):window,e){case"focusin":(gd(ct)||ct.contentEditable==="true")&&(sa=ct,Uc=F,Mr=null);break;case"focusout":Mr=Uc=sa=null;break;case"mousedown":jc=!0;break;case"contextmenu":case"mouseup":case"dragend":jc=!1,zd(W,a,Q);break;case"selectionchange":if(wx)break;case"keydown":case"keyup":zd(W,a,Q)}var Rt;if(Oc)t:{switch(e){case"compositionstart":var Gt="onCompositionStart";break t;case"compositionend":Gt="onCompositionEnd";break t;case"compositionupdate":Gt="onCompositionUpdate";break t}Gt=void 0}else ia?md(e,a)&&(Gt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Gt="onCompositionStart");Gt&&(fd&&a.locale!=="ko"&&(ia||Gt!=="onCompositionStart"?Gt==="onCompositionEnd"&&ia&&(Rt=od()):(Ii=Q,Ac="value"in Ii?Ii.value:Ii.textContent,ia=!0)),ct=gl(F,Gt),0<ct.length&&(Gt=new ud(Gt,e,null,a,Q),W.push({event:Gt,listeners:ct}),Rt?Gt.data=Rt:(Rt=yd(a),Rt!==null&&(Gt.data=Rt)))),(Rt=px?mx(e,a):yx(e,a))&&(Gt=gl(F,"onBeforeInput"),0<Gt.length&&(ct=new ud("onBeforeInput","beforeinput",null,a,Q),W.push({event:ct,listeners:Gt}),ct.data=Rt)),ob(W,e,F,a,Q)}t0(W,n)})}function Xr(e,n,a){return{instance:e,listener:n,currentTarget:a}}function gl(e,n){for(var a=n+"Capture",o=[];e!==null;){var d=e,m=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||m===null||(d=fr(e,a),d!=null&&o.unshift(Xr(e,d,m)),d=fr(e,n),d!=null&&o.push(Xr(e,d,m))),e.tag===3)return o;e=e.return}return[]}function hb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function n0(e,n,a,o,d){for(var m=n._reactName,M=[];a!==null&&a!==o;){var v=a,A=v.alternate,F=v.stateNode;if(v=v.tag,A!==null&&A===o)break;v!==5&&v!==26&&v!==27||F===null||(A=F,d?(F=fr(a,m),F!=null&&M.unshift(Xr(a,F,A))):d||(F=fr(a,m),F!=null&&M.push(Xr(a,F,A)))),a=a.return}M.length!==0&&e.push({event:n,listeners:M})}var fb=/\r\n?/g,db=/\u0000|\uFFFD/g;function i0(e){return(typeof e=="string"?e:""+e).replace(fb,`
`).replace(db,"")}function s0(e,n){return n=i0(n),i0(e)===n}function re(e,n,a,o,d,m){switch(a){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ta(e,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ta(e,""+o);break;case"className":So(e,"class",o);break;case"tabIndex":So(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":So(e,a,o);break;case"style":sd(e,o,m);break;case"data":if(n!=="object"){So(e,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=To(""+o),e.setAttribute(a,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&re(e,n,"name",d.name,d,null),re(e,n,"formEncType",d.formEncType,d,null),re(e,n,"formMethod",d.formMethod,d,null),re(e,n,"formTarget",d.formTarget,d,null)):(re(e,n,"encType",d.encType,d,null),re(e,n,"method",d.method,d,null),re(e,n,"target",d.target,d,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(a);break}o=To(""+o),e.setAttribute(a,o);break;case"onClick":o!=null&&(e.onclick=hi);break;case"onScroll":o!=null&&Ut("scroll",e);break;case"onScrollEnd":o!=null&&Ut("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}a=To(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""+o):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":o===!0?e.setAttribute(a,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(a,o):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(a,o):e.removeAttribute(a);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(a):e.setAttribute(a,o);break;case"popover":Ut("beforetoggle",e),Ut("toggle",e),Mo(e,"popover",o);break;case"xlinkActuate":ui(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":ui(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":ui(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":ui(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":ui(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":ui(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":ui(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":ui(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":ui(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":Mo(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Vg.get(a)||a,Mo(e,a,o))}}function lh(e,n,a,o,d,m){switch(a){case"style":sd(e,o,m);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(s(61));if(a=o.__html,a!=null){if(d.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof o=="string"?ta(e,o):(typeof o=="number"||typeof o=="bigint")&&ta(e,""+o);break;case"onScroll":o!=null&&Ut("scroll",e);break;case"onScrollEnd":o!=null&&Ut("scrollend",e);break;case"onClick":o!=null&&(e.onclick=hi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qf.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),n=a.slice(2,d?a.length-7:void 0),m=e[un]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,d),typeof o=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,o,d);break t}a in e?e[a]=o:o===!0?e.setAttribute(a,""):Mo(e,a,o)}}}function Je(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ut("error",e),Ut("load",e);var o=!1,d=!1,m;for(m in a)if(a.hasOwnProperty(m)){var M=a[m];if(M!=null)switch(m){case"src":o=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:re(e,n,m,M,a,null)}}d&&re(e,n,"srcSet",a.srcSet,a,null),o&&re(e,n,"src",a.src,a,null);return;case"input":Ut("invalid",e);var v=m=M=d=null,A=null,F=null;for(o in a)if(a.hasOwnProperty(o)){var Q=a[o];if(Q!=null)switch(o){case"name":d=Q;break;case"type":M=Q;break;case"checked":A=Q;break;case"defaultChecked":F=Q;break;case"value":m=Q;break;case"defaultValue":v=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(s(137,n));break;default:re(e,n,o,Q,a,null)}}td(e,m,v,A,F,M,d,!1);return;case"select":Ut("invalid",e),o=M=m=null;for(d in a)if(a.hasOwnProperty(d)&&(v=a[d],v!=null))switch(d){case"value":m=v;break;case"defaultValue":M=v;break;case"multiple":o=v;default:re(e,n,d,v,a,null)}n=m,a=M,e.multiple=!!o,n!=null?$s(e,!!o,n,!1):a!=null&&$s(e,!!o,a,!0);return;case"textarea":Ut("invalid",e),m=d=o=null;for(M in a)if(a.hasOwnProperty(M)&&(v=a[M],v!=null))switch(M){case"value":o=v;break;case"defaultValue":d=v;break;case"children":m=v;break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(s(91));break;default:re(e,n,M,v,a,null)}nd(e,o,d,m);return;case"option":for(A in a)if(a.hasOwnProperty(A)&&(o=a[A],o!=null))switch(A){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:re(e,n,A,o,a,null)}return;case"dialog":Ut("beforetoggle",e),Ut("toggle",e),Ut("cancel",e),Ut("close",e);break;case"iframe":case"object":Ut("load",e);break;case"video":case"audio":for(o=0;o<Yr.length;o++)Ut(Yr[o],e);break;case"image":Ut("error",e),Ut("load",e);break;case"details":Ut("toggle",e);break;case"embed":case"source":case"link":Ut("error",e),Ut("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in a)if(a.hasOwnProperty(F)&&(o=a[F],o!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:re(e,n,F,o,a,null)}return;default:if(vc(n)){for(Q in a)a.hasOwnProperty(Q)&&(o=a[Q],o!==void 0&&lh(e,n,Q,o,a,void 0));return}}for(v in a)a.hasOwnProperty(v)&&(o=a[v],o!=null&&re(e,n,v,o,a,null))}function pb(e,n,a,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,m=null,M=null,v=null,A=null,F=null,Q=null;for(Y in a){var W=a[Y];if(a.hasOwnProperty(Y)&&W!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":A=W;default:o.hasOwnProperty(Y)||re(e,n,Y,null,o,W)}}for(var V in o){var Y=o[V];if(W=a[V],o.hasOwnProperty(V)&&(Y!=null||W!=null))switch(V){case"type":m=Y;break;case"name":d=Y;break;case"checked":F=Y;break;case"defaultChecked":Q=Y;break;case"value":M=Y;break;case"defaultValue":v=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,n));break;default:Y!==W&&re(e,n,V,Y,o,W)}}Mc(e,M,v,A,F,Q,m,d);return;case"select":Y=M=v=V=null;for(m in a)if(A=a[m],a.hasOwnProperty(m)&&A!=null)switch(m){case"value":break;case"multiple":Y=A;default:o.hasOwnProperty(m)||re(e,n,m,null,o,A)}for(d in o)if(m=o[d],A=a[d],o.hasOwnProperty(d)&&(m!=null||A!=null))switch(d){case"value":V=m;break;case"defaultValue":v=m;break;case"multiple":M=m;default:m!==A&&re(e,n,d,m,o,A)}n=v,a=M,o=Y,V!=null?$s(e,!!a,V,!1):!!o!=!!a&&(n!=null?$s(e,!!a,n,!0):$s(e,!!a,a?[]:"",!1));return;case"textarea":Y=V=null;for(v in a)if(d=a[v],a.hasOwnProperty(v)&&d!=null&&!o.hasOwnProperty(v))switch(v){case"value":break;case"children":break;default:re(e,n,v,null,o,d)}for(M in o)if(d=o[M],m=a[M],o.hasOwnProperty(M)&&(d!=null||m!=null))switch(M){case"value":V=d;break;case"defaultValue":Y=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(s(91));break;default:d!==m&&re(e,n,M,d,o,m)}ed(e,V,Y);return;case"option":for(var rt in a)if(V=a[rt],a.hasOwnProperty(rt)&&V!=null&&!o.hasOwnProperty(rt))switch(rt){case"selected":e.selected=!1;break;default:re(e,n,rt,null,o,V)}for(A in o)if(V=o[A],Y=a[A],o.hasOwnProperty(A)&&V!==Y&&(V!=null||Y!=null))switch(A){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:re(e,n,A,V,o,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in a)V=a[xt],a.hasOwnProperty(xt)&&V!=null&&!o.hasOwnProperty(xt)&&re(e,n,xt,null,o,V);for(F in o)if(V=o[F],Y=a[F],o.hasOwnProperty(F)&&V!==Y&&(V!=null||Y!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(s(137,n));break;default:re(e,n,F,V,o,Y)}return;default:if(vc(n)){for(var oe in a)V=a[oe],a.hasOwnProperty(oe)&&V!==void 0&&!o.hasOwnProperty(oe)&&lh(e,n,oe,void 0,o,V);for(Q in o)V=o[Q],Y=a[Q],!o.hasOwnProperty(Q)||V===Y||V===void 0&&Y===void 0||lh(e,n,Q,V,o,Y);return}}for(var B in a)V=a[B],a.hasOwnProperty(B)&&V!=null&&!o.hasOwnProperty(B)&&re(e,n,B,null,o,V);for(W in o)V=o[W],Y=a[W],!o.hasOwnProperty(W)||V===Y||V==null&&Y==null||re(e,n,W,V,o,Y)}function a0(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),o=0;o<a.length;o++){var d=a[o],m=d.transferSize,M=d.initiatorType,v=d.duration;if(m&&v&&a0(M)){for(M=0,v=d.responseEnd,o+=1;o<a.length;o++){var A=a[o],F=A.startTime;if(F>v)break;var Q=A.transferSize,W=A.initiatorType;Q&&a0(W)&&(A=A.responseEnd,M+=Q*(A<v?1:(v-F)/(A-F)))}if(--o,n+=8*(m+M)/(d.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var ch=null,uh=null;function xl(e){return e.nodeType===9?e:e.ownerDocument}function r0(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function o0(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function hh(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var fh=null;function yb(){var e=window.event;return e&&e.type==="popstate"?e===fh?!1:(fh=e,!0):(fh=null,!1)}var l0=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,c0=typeof Promise=="function"?Promise:void 0,xb=typeof queueMicrotask=="function"?queueMicrotask:typeof c0<"u"?function(e){return c0.resolve(null).then(e).catch(bb)}:l0;function bb(e){setTimeout(function(){throw e})}function as(e){return e==="head"}function u0(e,n){var a=n,o=0;do{var d=a.nextSibling;if(e.removeChild(a),d&&d.nodeType===8)if(a=d.data,a==="/$"||a==="/&"){if(o===0){e.removeChild(d),Na(n);return}o--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")o++;else if(a==="html")qr(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,qr(a);for(var m=a.firstChild;m;){var M=m.nextSibling,v=m.nodeName;m[ur]||v==="SCRIPT"||v==="STYLE"||v==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=M}}else a==="body"&&qr(e.ownerDocument.body);a=d}while(a);Na(n)}function h0(e,n){var a=e;e=0;do{var o=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),o&&o.nodeType===8)if(a=o.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=o}while(a)}function dh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":dh(a),xc(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Mb(e,n,a,o){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[ur])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=kn(e.nextSibling),e===null)break}return null}function Sb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=kn(e.nextSibling),e===null))return null;return e}function f0(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=kn(e.nextSibling),e===null))return null;return e}function ph(e){return e.data==="$?"||e.data==="$~"}function mh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function vb(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var o=function(){n(),a.removeEventListener("DOMContentLoaded",o)};a.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function kn(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var yh=null;function d0(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return kn(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function p0(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function m0(e,n,a){switch(n=xl(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function qr(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);xc(e)}var Fn=new Map,y0=new Set;function bl(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ai=tt.d;tt.d={f:Tb,r:wb,D:_b,C:Eb,L:Ab,m:zb,X:Rb,S:Cb,M:Nb};function Tb(){var e=Ai.f(),n=ul();return e||n}function wb(e){var n=Js(e);n!==null&&n.tag===5&&n.type==="form"?Dp(n):Ai.r(e)}var za=typeof document>"u"?null:document;function g0(e,n,a){var o=za;if(o&&typeof n=="string"&&n){var d=Nn(n);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),y0.has(d)||(y0.add(d),e={rel:e,crossOrigin:a,href:n},o.querySelector(d)===null&&(n=o.createElement("link"),Je(n,"link",e),Ve(n),o.head.appendChild(n)))}}function _b(e){Ai.D(e),g0("dns-prefetch",e,null)}function Eb(e,n){Ai.C(e,n),g0("preconnect",e,n)}function Ab(e,n,a){Ai.L(e,n,a);var o=za;if(o&&e&&n){var d='link[rel="preload"][as="'+Nn(n)+'"]';n==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+Nn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+Nn(a.imageSizes)+'"]')):d+='[href="'+Nn(e)+'"]';var m=d;switch(n){case"style":m=Ca(e);break;case"script":m=Ra(e)}Fn.has(m)||(e=g({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Fn.set(m,e),o.querySelector(d)!==null||n==="style"&&o.querySelector(Zr(m))||n==="script"&&o.querySelector(Kr(m))||(n=o.createElement("link"),Je(n,"link",e),Ve(n),o.head.appendChild(n)))}}function zb(e,n){Ai.m(e,n);var a=za;if(a&&e){var o=n&&typeof n.as=="string"?n.as:"script",d='link[rel="modulepreload"][as="'+Nn(o)+'"][href="'+Nn(e)+'"]',m=d;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Ra(e)}if(!Fn.has(m)&&(e=g({rel:"modulepreload",href:e},n),Fn.set(m,e),a.querySelector(d)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Kr(m)))return}o=a.createElement("link"),Je(o,"link",e),Ve(o),a.head.appendChild(o)}}}function Cb(e,n,a){Ai.S(e,n,a);var o=za;if(o&&e){var d=Ps(o).hoistableStyles,m=Ca(e);n=n||"default";var M=d.get(m);if(!M){var v={loading:0,preload:null};if(M=o.querySelector(Zr(m)))v.loading=5;else{e=g({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Fn.get(m))&&gh(e,a);var A=M=o.createElement("link");Ve(A),Je(A,"link",e),A._p=new Promise(function(F,Q){A.onload=F,A.onerror=Q}),A.addEventListener("load",function(){v.loading|=1}),A.addEventListener("error",function(){v.loading|=2}),v.loading|=4,Ml(M,n,o)}M={type:"stylesheet",instance:M,count:1,state:v},d.set(m,M)}}}function Rb(e,n){Ai.X(e,n);var a=za;if(a&&e){var o=Ps(a).hoistableScripts,d=Ra(e),m=o.get(d);m||(m=a.querySelector(Kr(d)),m||(e=g({src:e,async:!0},n),(n=Fn.get(d))&&xh(e,n),m=a.createElement("script"),Ve(m),Je(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function Nb(e,n){Ai.M(e,n);var a=za;if(a&&e){var o=Ps(a).hoistableScripts,d=Ra(e),m=o.get(d);m||(m=a.querySelector(Kr(d)),m||(e=g({src:e,async:!0,type:"module"},n),(n=Fn.get(d))&&xh(e,n),m=a.createElement("script"),Ve(m),Je(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},o.set(d,m))}}function x0(e,n,a,o){var d=(d=At.current)?bl(d):null;if(!d)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ca(a.href),a=Ps(d).hoistableStyles,o=a.get(n),o||(o={type:"style",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ca(a.href);var m=Ps(d).hoistableStyles,M=m.get(e);if(M||(d=d.ownerDocument||d,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,M),(m=d.querySelector(Zr(e)))&&!m._p&&(M.instance=m,M.state.loading=5),Fn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Fn.set(e,a),m||Ob(d,e,a,M.state))),n&&o===null)throw Error(s(528,""));return M}if(n&&o!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ra(a),a=Ps(d).hoistableScripts,o=a.get(n),o||(o={type:"script",instance:null,count:0,state:null},a.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ca(e){return'href="'+Nn(e)+'"'}function Zr(e){return'link[rel="stylesheet"]['+e+"]"}function b0(e){return g({},e,{"data-precedence":e.precedence,precedence:null})}function Ob(e,n,a,o){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=e.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),Je(n,"link",a),Ve(n),e.head.appendChild(n))}function Ra(e){return'[src="'+Nn(e)+'"]'}function Kr(e){return"script[async]"+e}function M0(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var o=e.querySelector('style[data-href~="'+Nn(a.href)+'"]');if(o)return n.instance=o,Ve(o),o;var d=g({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),Ve(o),Je(o,"style",d),Ml(o,a.precedence,e),n.instance=o;case"stylesheet":d=Ca(a.href);var m=e.querySelector(Zr(d));if(m)return n.state.loading|=4,n.instance=m,Ve(m),m;o=b0(a),(d=Fn.get(d))&&gh(o,d),m=(e.ownerDocument||e).createElement("link"),Ve(m);var M=m;return M._p=new Promise(function(v,A){M.onload=v,M.onerror=A}),Je(m,"link",o),n.state.loading|=4,Ml(m,a.precedence,e),n.instance=m;case"script":return m=Ra(a.src),(d=e.querySelector(Kr(m)))?(n.instance=d,Ve(d),d):(o=a,(d=Fn.get(m))&&(o=g({},a),xh(o,d)),e=e.ownerDocument||e,d=e.createElement("script"),Ve(d),Je(d,"link",o),e.head.appendChild(d),n.instance=d);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,Ml(o,a.precedence,e));return n.instance}function Ml(e,n,a){for(var o=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=o.length?o[o.length-1]:null,m=d,M=0;M<o.length;M++){var v=o[M];if(v.dataset.precedence===n)m=v;else if(m!==d)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function gh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function xh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Sl=null;function S0(e,n,a){if(Sl===null){var o=new Map,d=Sl=new Map;d.set(a,o)}else d=Sl,o=d.get(a),o||(o=new Map,d.set(a,o));if(o.has(e))return o;for(o.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var m=a[d];if(!(m[ur]||m[qe]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var M=m.getAttribute(n)||"";M=e+M;var v=o.get(M);v?v.push(m):o.set(M,[m])}}return o}function v0(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Db(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function T0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Bb(e,n,a,o){if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var d=Ca(o.href),m=n.querySelector(Zr(d));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=vl.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,Ve(m);return}m=n.ownerDocument||n,o=b0(o),(d=Fn.get(d))&&gh(o,d),m=m.createElement("link"),Ve(m);var M=m;M._p=new Promise(function(v,A){M.onload=v,M.onerror=A}),Je(m,"link",o),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=vl.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var bh=0;function Lb(e,n){return e.stylesheets&&e.count===0&&wl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var o=setTimeout(function(){if(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&bh===0&&(bh=62500*mb());var d=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&wl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>bh?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(d)}}:null}function vl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)wl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Tl=null;function wl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Tl=new Map,n.forEach(Ub,e),Tl=null,vl.call(e))}function Ub(e,n){if(!(n.state.loading&4)){var a=Tl.get(e);if(a)var o=a.get(null);else{a=new Map,Tl.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<d.length;m++){var M=d[m];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(a.set(M.dataset.precedence,M),o=M)}o&&a.set(null,o)}d=n.instance,M=d.getAttribute("data-precedence"),m=a.get(M)||o,m===o&&a.set(null,d),a.set(M,d),this.count++,o=vl.bind(this),d.addEventListener("load",o),d.addEventListener("error",o),m?m.parentNode.insertBefore(d,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),n.state.loading|=4}}var Qr={$$typeof:X,Provider:null,Consumer:null,_currentValue:ut,_currentValue2:ut,_threadCount:0};function jb(e,n,a,o,d,m,M,v,A){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=pc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pc(0),this.hiddenUpdates=pc(null),this.identifierPrefix=o,this.onUncaughtError=d,this.onCaughtError=m,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=A,this.incompleteTransitions=new Map}function w0(e,n,a,o,d,m,M,v,A,F,Q,W){return e=new jb(e,n,a,M,A,F,Q,W,v),n=1,m===!0&&(n|=24),m=xn(3,null,null,n),e.current=m,m.stateNode=e,n=Wc(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:o,isDehydrated:a,cache:n},nu(m),e}function _0(e){return e?(e=oa,e):oa}function E0(e,n,a,o,d,m){d=_0(d),o.context===null?o.context=d:o.pendingContext=d,o=Ki(n),o.payload={element:a},m=m===void 0?null:m,m!==null&&(o.callback=m),a=Qi(e,o,n),a!==null&&(yn(a,e,n),Ar(a,e,n))}function A0(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Mh(e,n){A0(e,n),(e=e.alternate)&&A0(e,n)}function z0(e){if(e.tag===13||e.tag===31){var n=_s(e,67108864);n!==null&&yn(n,e,67108864),Mh(e,67108864)}}function C0(e){if(e.tag===13||e.tag===31){var n=Tn();n=mc(n);var a=_s(e,n);a!==null&&yn(a,e,n),Mh(e,n)}}var _l=!0;function kb(e,n,a,o){var d=H.T;H.T=null;var m=tt.p;try{tt.p=2,Sh(e,n,a,o)}finally{tt.p=m,H.T=d}}function Fb(e,n,a,o){var d=H.T;H.T=null;var m=tt.p;try{tt.p=8,Sh(e,n,a,o)}finally{tt.p=m,H.T=d}}function Sh(e,n,a,o){if(_l){var d=vh(o);if(d===null)oh(e,n,o,El,a),N0(e,o);else if(Vb(d,e,n,a,o))o.stopPropagation();else if(N0(e,o),n&4&&-1<Hb.indexOf(e)){for(;d!==null;){var m=Js(d);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var M=tn(m.pendingLanes);if(M!==0){var v=m;for(v.pendingLanes|=2,v.entangledLanes|=2;M;){var A=1<<31-Ue(M);v.entanglements[1]|=A,M&=~A}ri(m),(te&6)===0&&(ll=mt()+500,Gr(0))}}break;case 31:case 13:v=_s(m,2),v!==null&&yn(v,m,2),ul(),Mh(m,2)}if(m=vh(o),m===null&&oh(e,n,o,El,a),m===d)break;d=m}d!==null&&o.stopPropagation()}else oh(e,n,o,null,a)}}function vh(e){return e=wc(e),Th(e)}var El=null;function Th(e){if(El=null,e=Qs(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=c(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return El=e,null}function R0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Nt()){case Tt:return 2;case Wt:return 8;case Kt:case $t:return 32;case fe:return 268435456;default:return 32}default:return 32}}var wh=!1,rs=null,os=null,ls=null,Jr=new Map,Pr=new Map,cs=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function N0(e,n){switch(e){case"focusin":case"focusout":rs=null;break;case"dragenter":case"dragleave":os=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":Jr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pr.delete(n.pointerId)}}function Wr(e,n,a,o,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:o,nativeEvent:m,targetContainers:[d]},n!==null&&(n=Js(n),n!==null&&z0(n)),e):(e.eventSystemFlags|=o,n=e.targetContainers,d!==null&&n.indexOf(d)===-1&&n.push(d),e)}function Vb(e,n,a,o,d){switch(n){case"focusin":return rs=Wr(rs,e,n,a,o,d),!0;case"dragenter":return os=Wr(os,e,n,a,o,d),!0;case"mouseover":return ls=Wr(ls,e,n,a,o,d),!0;case"pointerover":var m=d.pointerId;return Jr.set(m,Wr(Jr.get(m)||null,e,n,a,o,d)),!0;case"gotpointercapture":return m=d.pointerId,Pr.set(m,Wr(Pr.get(m)||null,e,n,a,o,d)),!0}return!1}function O0(e){var n=Qs(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=c(a),n!==null){e.blockedOn=n,qf(e.priority,function(){C0(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,qf(e.priority,function(){C0(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Al(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=vh(e.nativeEvent);if(a===null){a=e.nativeEvent;var o=new a.constructor(a.type,a);Tc=o,a.target.dispatchEvent(o),Tc=null}else return n=Js(a),n!==null&&z0(n),e.blockedOn=a,!1;n.shift()}return!0}function D0(e,n,a){Al(e)&&a.delete(n)}function Ib(){wh=!1,rs!==null&&Al(rs)&&(rs=null),os!==null&&Al(os)&&(os=null),ls!==null&&Al(ls)&&(ls=null),Jr.forEach(D0),Pr.forEach(D0)}function zl(e,n){e.blockedOn===n&&(e.blockedOn=null,wh||(wh=!0,f.unstable_scheduleCallback(f.unstable_NormalPriority,Ib)))}var Cl=null;function B0(e){Cl!==e&&(Cl=e,f.unstable_scheduleCallback(f.unstable_NormalPriority,function(){Cl===e&&(Cl=null);for(var n=0;n<e.length;n+=3){var a=e[n],o=e[n+1],d=e[n+2];if(typeof o!="function"){if(Th(o||a)===null)continue;break}var m=Js(a);m!==null&&(e.splice(n,3),n-=3,vu(m,{pending:!0,data:d,method:a.method,action:o},o,d))}}))}function Na(e){function n(A){return zl(A,e)}rs!==null&&zl(rs,e),os!==null&&zl(os,e),ls!==null&&zl(ls,e),Jr.forEach(n),Pr.forEach(n);for(var a=0;a<cs.length;a++){var o=cs[a];o.blockedOn===e&&(o.blockedOn=null)}for(;0<cs.length&&(a=cs[0],a.blockedOn===null);)O0(a),a.blockedOn===null&&cs.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(o=0;o<a.length;o+=3){var d=a[o],m=a[o+1],M=d[un]||null;if(typeof m=="function")M||B0(a);else if(M){var v=null;if(m&&m.hasAttribute("formAction")){if(d=m,M=m[un]||null)v=M.formAction;else if(Th(d)!==null)continue}else v=M.action;typeof v=="function"?a[o+1]=v:(a.splice(o,3),o-=3),B0(a)}}}function L0(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(M){return d=M})},focusReset:"manual",scroll:"manual"})}function n(){d!==null&&(d(),d=null),o||setTimeout(a,20)}function a(){if(!o&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,d=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),d!==null&&(d(),d=null)}}}function _h(e){this._internalRoot=e}Rl.prototype.render=_h.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,o=Tn();E0(a,o,e,n,null,null)},Rl.prototype.unmount=_h.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;E0(e.current,2,null,e,null,null),ul(),n[Ks]=null}};function Rl(e){this._internalRoot=e}Rl.prototype.unstable_scheduleHydration=function(e){if(e){var n=Xf();e={blockedOn:null,target:e,priority:n};for(var a=0;a<cs.length&&n!==0&&n<cs[a].priority;a++);cs.splice(a,0,e),a===0&&O0(e)}};var U0=t.version;if(U0!=="19.2.3")throw Error(s(527,U0,"19.2.3"));tt.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=h(n),e=e!==null?y(e):null,e=e===null?null:e.stateNode,e};var Gb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nl.isDisabled&&Nl.supportsFiber)try{an=Nl.inject(Gb),Fe=Nl}catch{}}return to.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,o="",d=Gp,m=Yp,M=Xp;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(d=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(M=n.onRecoverableError)),n=w0(e,1,!1,null,null,a,o,null,d,m,M,L0),e[Ks]=n.current,rh(e),new _h(n)},to.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var o=!1,d="",m=Gp,M=Yp,v=Xp,A=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(M=a.onCaughtError),a.onRecoverableError!==void 0&&(v=a.onRecoverableError),a.formState!==void 0&&(A=a.formState)),n=w0(e,1,!0,n,a??null,o,d,A,m,M,v,L0),n.context=_0(null),a=n.current,o=Tn(),o=mc(o),d=Ki(o),d.callback=null,Qi(a,d,o),a=o,n.current.lanes=a,cr(n,a),ri(n),e[Ks]=n.current,rh(e),new Rl(n)},to.version="19.2.3",to}var q0;function t1(){if(q0)return zh.exports;q0=1;function f(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f)}catch(t){console.error(t)}}return f(),zh.exports=$b(),zh.exports}var e1=t1();const n1=ng(e1);var Ee=(f=>(f.Standard="standard",f.Clay="clay",f.Normal="normal",f.Gold="gold",f.Matrix="matrix",f.Image="image",f))(Ee||{}),lt=(f=>(f.Slider="slider",f.Solid="solid",f.Facet="facet",f.Edge="edge",f.Vertex="vertex",f.LoopCut="loopCut",f.Knife="knife",f))(lt||{}),Ye=(f=>(f.Translate="translate",f.Rotate="rotate",f.Scale="scale",f))(Ye||{});const i1=({size:f=12})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),E.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),s1=({size:f=12})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),E.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),a1=({size:f=12})=>E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:f,height:f,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),Oa=({title:f,initialX:t,initialY:i,children:s,className:r="",onClose:l})=>{const[c,u]=kt.useState({x:t,y:i}),[p,h]=kt.useState(!1),y=kt.useRef({x:0,y:0}),g=kt.useRef(null);kt.useEffect(()=>{if(typeof window<"u"){const b=window.innerWidth-280,S=window.innerHeight-100;let T=c.x,w=c.y;T>b&&(T=Math.max(20,b)),T<0&&(T=20),w>S&&(w=Math.max(20,S)),w<0&&(w=20),(T!==c.x||w!==c.y)&&u({x:T,y:w})}},[]);const x=b=>{b.target.closest(".close-btn")||(h(!0),y.current={x:b.clientX-c.x,y:b.clientY-c.y})};return kt.useEffect(()=>{const b=T=>{p&&u({x:T.clientX-y.current.x,y:T.clientY-y.current.y})},S=()=>h(!1);return p&&(window.addEventListener("mousemove",b),window.addEventListener("mouseup",S)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",S)}},[p]),E.jsxs("div",{ref:g,className:`absolute flex flex-col pointer-events-auto bg-gray-800 border border-gray-600 rounded-lg shadow-xl text-white overflow-hidden ${r}`,style:{left:c.x,top:c.y,width:"260px",zIndex:100},children:[E.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-gray-700 border-b border-gray-600 cursor-move select-none",onMouseDown:x,children:[E.jsx("span",{className:"font-bold text-xs uppercase text-gray-200 tracking-wide",children:f}),E.jsxs("div",{className:"flex gap-2 items-center",children:[E.jsxs("div",{className:"flex gap-1",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500/50"}),E.jsx("div",{className:"w-2 h-2 rounded-full bg-yellow-500/50"}),E.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500/50"})]}),l&&E.jsx("button",{onClick:l,className:"close-btn text-gray-400 hover:text-white ml-2 p-0.5 rounded hover:bg-gray-600",children:E.jsx(a1,{})})]})]}),E.jsx("div",{className:"p-3 flex flex-col gap-4 max-h-[70vh] overflow-y-auto custom-scrollbar",children:s})]})},wn=({title:f,children:t})=>E.jsxs("div",{className:"flex flex-col gap-1",children:[E.jsx("h4",{className:"text-[10px] font-bold text-blue-400 uppercase mb-1",children:f}),t]}),le=({onClick:f,children:t,danger:i=!1})=>E.jsx("button",{onClick:f,className:`px-3 py-2 rounded text-xs font-medium text-left border transition-colors
    ${i?"bg-red-900/30 border-red-800 text-red-200 hover:bg-red-900/50":"bg-gray-700 border-gray-600 text-gray-200 hover:bg-gray-600 hover:border-gray-500 hover:text-white"}`,children:t}),ks=({active:f,onClick:t,children:i})=>E.jsx("button",{onClick:t,className:`flex-1 px-2 py-1.5 rounded text-xs font-bold border transition-colors ${f?"bg-blue-600 border-blue-500 text-white":"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600 hover:text-gray-200"}`,children:i}),r1=({x:f,y:t,onAction:i,close:s,currentTool:r,setTool:l,setGizmoMode:c,hasSelection:u})=>{const p={top:t,left:f,zIndex:9999};typeof window<"u"&&(f+160>window.innerWidth&&(p.left=f-160),t+250>window.innerHeight&&(p.top=t-250));const h=({label:x,onClick:b,danger:S=!1})=>E.jsx("button",{className:`w-full text-left px-3 py-1.5 text-xs hover:bg-blue-600 transition-colors ${S?"text-red-300 hover:bg-red-900":""}`,onClick:()=>{b(),s()},children:x}),y=()=>E.jsx("div",{className:"h-px bg-gray-600 my-1 mx-2"}),g=({label:x})=>E.jsx("div",{className:"px-3 py-1 text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:x});return E.jsxs("div",{className:"fixed w-48 bg-gray-800 border border-gray-600 rounded shadow-xl text-white py-1 flex flex-col pointer-events-auto",style:p,onMouseLeave:s,children:[!u&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"Selection Mode"}),E.jsx(h,{label:"Object Mode",onClick:()=>l(lt.Solid)}),E.jsx(h,{label:"Face Mode",onClick:()=>l(lt.Facet)}),E.jsx(h,{label:"Edge Mode",onClick:()=>l(lt.Edge)}),E.jsx(h,{label:"Vertex Mode",onClick:()=>l(lt.Vertex)}),E.jsx(y,{}),E.jsx(g,{label:"Gizmo"}),E.jsx(h,{label:"Move",onClick:()=>c(Ye.Translate)}),E.jsx(h,{label:"Rotate",onClick:()=>c(Ye.Rotate)}),E.jsx(h,{label:"Scale",onClick:()=>c(Ye.Scale)}),E.jsx(y,{}),E.jsx(g,{label:"Add Object"}),E.jsx(h,{label:"Add Cube",onClick:()=>i("addCube")})]}),u&&E.jsxs(E.Fragment,{children:[r===lt.Solid&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"Object Actions"}),E.jsx(h,{label:"Join Objects (Unir)",onClick:()=>i("join")}),E.jsx(h,{label:"Duplicate",onClick:()=>i("duplicate")}),E.jsx(h,{label:"Spherify",onClick:()=>i("spherify")}),E.jsx(h,{label:"Randomize",onClick:()=>i("randomize")}),E.jsx(h,{label:"Smooth Shape",onClick:()=>i("smooth")}),E.jsx(y,{}),E.jsx(h,{label:"Delete",onClick:()=>i("delete"),danger:!0})]}),r===lt.Facet&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"Face Actions"}),E.jsx(h,{label:"Separate (Detach)",onClick:()=>i("detach")}),E.jsx(h,{label:"Bridge Faces (Unir)",onClick:()=>i("bridge")}),E.jsx(y,{}),E.jsx(h,{label:"Extrude",onClick:()=>i("extrude")}),E.jsx(h,{label:"Inset",onClick:()=>i("inset")}),E.jsx(h,{label:"Bevel",onClick:()=>i("bevel")}),E.jsx(h,{label:"Subdivide",onClick:()=>i("subdivide")}),E.jsx(h,{label:"Poke Face",onClick:()=>i("poke")}),E.jsx(h,{label:"Flip Normals",onClick:()=>i("flipNormals")}),E.jsx(y,{}),E.jsx(h,{label:"Delete",onClick:()=>i("delete"),danger:!0})]}),r===lt.Edge&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"Edge Actions"}),E.jsx(h,{label:"Extrude Edge",onClick:()=>i("extrudeEdge")}),E.jsx(h,{label:"Bevel Edge",onClick:()=>i("bevelEdge")}),E.jsx(h,{label:"Loop Cut",onClick:()=>l(lt.LoopCut)}),E.jsx(h,{label:"Fill Face (F)",onClick:()=>i("createFace")}),E.jsx(y,{}),E.jsx(h,{label:"Delete",onClick:()=>i("delete"),danger:!0})]}),r===lt.Vertex&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"Vertex Actions"}),E.jsx(h,{label:"Extrude Vertex",onClick:()=>i("extrudeVertex")}),E.jsx(h,{label:"Chamfer",onClick:()=>i("chamferVertex")}),E.jsx(h,{label:"Connect",onClick:()=>i("connect")}),E.jsx(h,{label:"Weld",onClick:()=>i("weldVertices")}),E.jsx(h,{label:"Merge Center",onClick:()=>i("mergeVertices")}),E.jsx(h,{label:"Make Face (F)",onClick:()=>i("createFace")}),E.jsx(y,{}),E.jsx(h,{label:"Delete",onClick:()=>i("delete"),danger:!0})]}),r!==lt.Solid&&r!==lt.Facet&&r!==lt.Edge&&r!==lt.Vertex&&E.jsxs(E.Fragment,{children:[E.jsx(g,{label:"General"}),E.jsx(h,{label:"Deselect All",onClick:()=>i("clearSelection")}),E.jsx(h,{label:"Switch to Object Mode",onClick:()=>l(lt.Solid)})]})]})]})},o1=({currentTool:f,setTool:t,gizmoMode:i,setGizmoMode:s,options:r,setOptions:l,onAction:c,visibleLayers:u,toggleLayer:p,selectedLayer:h,setSelectedLayer:y,selectionCenter:g,selectedObjectCount:x,panelVisibility:b,togglePanel:S,contextMenu:T,closeContextMenu:w})=>{const z={x:20,y:20},L={x:typeof window<"u"?window.innerWidth-300:800,y:20},X={x:20,y:typeof window<"u"?window.innerHeight-350:500},D={x:typeof window<"u"?window.innerWidth-300:800,y:typeof window<"u"?window.innerHeight-250:600},I={x:typeof window<"u"?window.innerWidth-300:800,y:typeof window<"u"?window.innerHeight-550:300},$={x:20,y:typeof window<"u"?window.innerHeight-550:300},Z=kt.useRef(null),et=kt.useRef(null),[Et,Mt]=kt.useState(0),[vt,dt]=kt.useState(0),[Vt,ee]=kt.useState(0),[Ot,H]=kt.useState("#3b82f6");kt.useEffect(()=>{g&&(Mt(Math.round(g.x)),dt(Math.round(g.y)),ee(Math.round(g.z)))},[g]);const tt=(U,it)=>{const at=parseInt(it);if(isNaN(at))return;let yt={x:Et,y:vt,z:Vt};U==="x"&&(Mt(at),yt.x=at),U==="y"&&(dt(at),yt.y=at),U==="z"&&(ee(at),yt.z=at),c("updatePosition",yt)},ut=U=>{if(U.target.files&&U.target.files[0]){const it=U.target.files[0],at=new FileReader;at.onload=yt=>{var At;(At=yt.target)!=null&&At.result&&c("loadMatCap",yt.target.result)},at.readAsDataURL(it),U.target.value=""}},Bt=U=>{U.target.files&&U.target.files[0]&&(c("importFile",U.target.files[0]),U.target.value="")},Ct=U=>{c("setMaterial",U)},C=U=>{H(U.target.value),c("setColor",U.target.value)};return E.jsxs("div",{className:"absolute inset-0 pointer-events-none z-50 overflow-hidden text-sm",children:[T&&T.visible&&E.jsx(r1,{x:T.x,y:T.y,onAction:c,close:w,currentTool:f,setTool:t,setGizmoMode:s,hasSelection:x>0}),!b.files&&E.jsx("button",{onClick:()=>S("files"),className:"absolute bottom-4 left-4 pointer-events-auto bg-blue-600 hover:bg-blue-500 text-white p-2 rounded-full shadow-lg",title:"Open Menu",children:E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[E.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),E.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),E.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]})}),b.toolbox&&E.jsxs(Oa,{title:"Toolbox",initialX:z.x,initialY:z.y,onClose:()=>S("toolbox"),children:[E.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[E.jsx("button",{onClick:()=>c("undo"),className:"px-2 py-1.5 rounded text-xs font-bold bg-gray-700 border border-gray-600 hover:bg-gray-600",children:" Undo"}),E.jsx("button",{onClick:()=>c("redo"),className:"px-2 py-1.5 rounded text-xs font-bold bg-gray-700 border border-gray-600 hover:bg-gray-600",children:" Redo"})]}),E.jsxs("div",{className:"flex bg-gray-900 p-1 rounded border border-gray-700",children:[E.jsx(ks,{active:i===Ye.Translate,onClick:()=>s(Ye.Translate),children:"MOVE"}),E.jsx(ks,{active:i===Ye.Rotate,onClick:()=>s(Ye.Rotate),children:"ROT"}),E.jsx(ks,{active:i===Ye.Scale,onClick:()=>s(Ye.Scale),children:"SCALE"})]}),E.jsx(wn,{title:"Selection",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(ks,{active:f===lt.Solid,onClick:()=>t(lt.Solid),children:"OBJECT"}),E.jsx(ks,{active:f===lt.Facet,onClick:()=>t(lt.Facet),children:"FACE"}),E.jsx(ks,{active:f===lt.Edge,onClick:()=>t(lt.Edge),children:"EDGE"}),E.jsx(ks,{active:f===lt.Vertex,onClick:()=>t(lt.Vertex),children:"VERTEX"})]})}),E.jsx(wn,{title:"Tools",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("button",{onClick:()=>t(lt.LoopCut),className:`px-3 py-2 rounded text-xs font-bold border text-left ${f===lt.LoopCut?"bg-emerald-600 border-emerald-500 text-white":"bg-gray-700 border-gray-600 text-emerald-400 hover:bg-gray-600"}`,children:"Loop Cut"}),E.jsx("button",{onClick:()=>t(lt.Knife),className:`px-3 py-2 rounded text-xs font-bold border text-left ${f===lt.Knife?"bg-rose-600 border-rose-500 text-white":"bg-gray-700 border-gray-600 text-rose-400 hover:bg-gray-600"}`,children:"Knife"})]})})]}),b.files&&E.jsxs(Oa,{title:"File & Windows",initialX:$.x,initialY:$.y,onClose:()=>S("files"),children:[E.jsx("input",{type:"file",ref:et,className:"hidden",accept:".obj,.glb,.gltf",onChange:Bt}),E.jsx(wn,{title:"Windows",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-700 p-1.5 rounded border border-gray-600 hover:bg-gray-600",children:[E.jsx("input",{type:"checkbox",checked:b.toolbox,onChange:()=>S("toolbox"),className:"rounded bg-gray-500 border-gray-400"}),E.jsx("span",{className:"text-xs font-medium",children:"Toolbox"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-700 p-1.5 rounded border border-gray-600 hover:bg-gray-600",children:[E.jsx("input",{type:"checkbox",checked:b.modeling,onChange:()=>S("modeling"),className:"rounded bg-gray-500 border-gray-400"}),E.jsx("span",{className:"text-xs font-medium",children:"Modeling"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-700 p-1.5 rounded border border-gray-600 hover:bg-gray-600",children:[E.jsx("input",{type:"checkbox",checked:b.scene,onChange:()=>S("scene"),className:"rounded bg-gray-500 border-gray-400"}),E.jsx("span",{className:"text-xs font-medium",children:"Scene"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-700 p-1.5 rounded border border-gray-600 hover:bg-gray-600",children:[E.jsx("input",{type:"checkbox",checked:b.layers,onChange:()=>S("layers"),className:"rounded bg-gray-500 border-gray-400"}),E.jsx("span",{className:"text-xs font-medium",children:"Layers"})]})]})}),E.jsx(wn,{title:"Import / Export",children:E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsx(le,{onClick:()=>{var U;return(U=et.current)==null?void 0:U.click()},children:"Import File (OBJ/GLB)"}),E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(le,{onClick:()=>c("exportOBJ"),children:"Export OBJ"}),E.jsx(le,{onClick:()=>c("exportGLB"),children:"Export GLB"})]})]})})]}),b.modeling&&E.jsxs(Oa,{title:"Modeling",initialX:L.x,initialY:L.y,onClose:()=>S("modeling"),children:[E.jsx(wn,{title:"Faces",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(le,{onClick:()=>c("extrude"),children:"Extrude"}),E.jsx(le,{onClick:()=>c("inset"),children:"Inset"}),E.jsx(le,{onClick:()=>c("bevel"),children:"Bevel"}),E.jsx(le,{onClick:()=>c("createFace"),children:"Make Face (F)"}),E.jsx(le,{onClick:()=>c("detach"),children:"Separate (Detach)"}),E.jsx(le,{onClick:()=>c("join"),children:"Join (Select Objects)"})]})}),E.jsx(wn,{title:"Edges & Vertices",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(le,{onClick:()=>c("extrudeEdge"),children:"Extr. Edge"}),E.jsx(le,{onClick:()=>c("bevelEdge"),children:"Bevel Edge"}),E.jsx(le,{onClick:()=>c("extrudeVertex"),children:"Extr. Vert"}),E.jsx(le,{onClick:()=>c("chamferVertex"),children:"Chamfer"}),E.jsx(le,{onClick:()=>c("connect"),children:"Connect"}),E.jsx(le,{onClick:()=>c("weldVertices"),children:"Weld"}),E.jsx(le,{onClick:()=>c("mergeVertices"),children:"Merge Center"}),E.jsx(le,{onClick:()=>c("smooth"),children:"Smooth"})]})}),E.jsx(wn,{title:"Geometry",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx(le,{onClick:()=>c("subdivide"),children:"Subdivide"}),E.jsx(le,{onClick:()=>c("subdivideLinear"),children:"SubDiv Simple"}),E.jsx(le,{onClick:()=>c("triangulate"),children:"Triangulate"}),E.jsx(le,{onClick:()=>c("poke"),children:"Poke Face"}),E.jsx(le,{onClick:()=>c("bridge"),children:"Bridge"}),E.jsx(le,{onClick:()=>c("flipNormals"),children:"Flip Normals"})]})}),E.jsxs(wn,{title:"Structure & Symmetry",children:[E.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[E.jsx(le,{onClick:()=>c("spherify"),children:"To Sphere"}),E.jsx(le,{onClick:()=>c("randomize"),children:"Randomize"}),E.jsx(le,{onClick:()=>c("detach"),children:"Separate"}),E.jsx(le,{onClick:()=>c("delete"),danger:!0,children:"Delete"})]}),E.jsxs("div",{className:"flex gap-1 border-t border-gray-700 pt-2",children:[E.jsx("button",{onClick:()=>c("symmetrizeX"),className:"flex-1 py-1 rounded text-[10px] font-bold bg-purple-900 border border-purple-700 hover:bg-purple-800 text-purple-200",children:"Sym X"}),E.jsx("button",{onClick:()=>c("symmetrizeY"),className:"flex-1 py-1 rounded text-[10px] font-bold bg-purple-900 border border-purple-700 hover:bg-purple-800 text-purple-200",children:"Sym Y"}),E.jsx("button",{onClick:()=>c("symmetrizeZ"),className:"flex-1 py-1 rounded text-[10px] font-bold bg-purple-900 border border-purple-700 hover:bg-purple-800 text-purple-200",children:"Sym Z"})]})]})]}),b.scene&&E.jsxs(Oa,{title:"Scene",initialX:X.x,initialY:X.y,onClose:()=>S("scene"),children:[E.jsx(wn,{title:"Viewport",children:E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-700 rounded",children:[E.jsx("input",{type:"checkbox",checked:r.showSolid,onChange:U=>l({...r,showSolid:U.target.checked}),className:"rounded bg-gray-600 border-gray-500"}),E.jsx("span",{children:"Show Solid"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-700 rounded",children:[E.jsx("input",{type:"checkbox",checked:r.showOutlines,onChange:U=>l({...r,showOutlines:U.target.checked}),className:"rounded bg-gray-600 border-gray-500"}),E.jsx("span",{children:"Show Outlines"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-700 rounded",children:[E.jsx("input",{type:"checkbox",checked:r.showGrid,onChange:U=>l({...r,showGrid:U.target.checked}),className:"rounded bg-gray-600 border-gray-500"}),E.jsx("span",{children:"Show Grid"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-700 rounded",children:[E.jsx("input",{type:"checkbox",checked:r.showNormals,onChange:U=>l({...r,showNormals:U.target.checked}),className:"rounded bg-gray-600 border-gray-500"}),E.jsx("span",{children:"Show Normals"})]}),E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-1 hover:bg-gray-700 rounded",children:[E.jsx("input",{type:"checkbox",checked:r.showAxisPlanes,onChange:U=>l({...r,showAxisPlanes:U.target.checked}),className:"rounded bg-gray-600 border-gray-500"}),E.jsx("span",{className:"text-yellow-400",children:"Show Planes"})]})]})}),E.jsx(wn,{title:"Add Object",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("button",{onClick:()=>c("addCube"),className:"px-3 py-2 rounded text-xs font-bold bg-blue-600 hover:bg-blue-500 text-white border border-blue-500",children:"Cube"}),E.jsx("button",{onClick:()=>c("addSphere"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Sphere"}),E.jsx("button",{onClick:()=>c("addPlane"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Plane"}),E.jsx("button",{onClick:()=>c("addCylinder"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Cylinder"}),E.jsx("button",{onClick:()=>c("addCone"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Cone"}),E.jsx("button",{onClick:()=>c("addTorus"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Donut"}),E.jsx("button",{onClick:()=>c("addCircle"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Circle"}),E.jsx("button",{onClick:()=>c("addRing"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Ring"})]})}),E.jsx(wn,{title:"Actions",children:E.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[E.jsx("button",{onClick:()=>c("duplicate"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Duplicate"}),E.jsx("button",{onClick:()=>c("resetView"),className:"px-3 py-2 rounded text-xs font-bold bg-gray-700 hover:bg-gray-600 text-white border border-gray-600",children:"Reset Cam"}),E.jsx("button",{onClick:()=>c("clear"),className:"px-3 py-2 rounded text-xs font-bold bg-red-900/50 text-red-100 border border-red-800 hover:bg-red-800",children:"Clear All"})]})})]}),b.layers&&E.jsxs(Oa,{title:"Layers",initialX:D.x,initialY:D.y,onClose:()=>S("layers"),children:[E.jsx("div",{className:"flex flex-col bg-gray-900 rounded border border-gray-700 overflow-hidden max-h-48 overflow-y-auto",children:[0,1,2,3,4,5,6,7].map(U=>E.jsxs("div",{className:`flex items-center gap-2 px-2 py-1.5 cursor-pointer text-xs border-b border-gray-800 last:border-0 hover:bg-gray-700 transition-colors ${h===U?"bg-blue-900/50 text-white":"text-gray-400"}`,onClick:()=>y(U),children:[E.jsx("button",{onClick:it=>{it.stopPropagation(),p(U)},className:`w-5 h-5 flex items-center justify-center rounded hover:bg-gray-600 ${u[U]?"text-gray-200":"text-gray-600"}`,title:u[U]?"Hide Layer":"Show Layer",children:u[U]?E.jsx(i1,{}):E.jsx(s1,{})}),E.jsxs("span",{className:"flex-1 font-medium select-none",children:["Layer ",U]}),h===U&&E.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-blue-500 mr-1"})]},U))}),E.jsx("div",{className:"mt-2",children:E.jsxs(le,{onClick:()=>c("moveSelectionToLayer"),children:["Move Selection to Layer ",h]})})]}),x>0&&b.properties&&E.jsxs(Oa,{title:"Object Properties",initialX:I.x,initialY:I.y,onClose:()=>S("properties"),children:[E.jsx(wn,{title:"Location (Centroid)",children:E.jsxs("div",{className:"flex gap-1 mb-2",children:[E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"text-[9px] text-gray-400 block",children:"X"}),E.jsx("input",{type:"number",value:Et,onChange:U=>tt("x",U.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-xs text-right"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"text-[9px] text-gray-400 block",children:"Y"}),E.jsx("input",{type:"number",value:vt,onChange:U=>tt("y",U.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-xs text-right"})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("label",{className:"text-[9px] text-gray-400 block",children:"Z"}),E.jsx("input",{type:"number",value:Vt,onChange:U=>tt("z",U.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-xs text-right"})]})]})}),E.jsx(wn,{title:"Material",children:E.jsxs("div",{className:"flex flex-col gap-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"text-xs text-gray-400 w-12",children:"Color"}),E.jsx("input",{type:"color",value:Ot,onChange:C,className:"w-full h-6 rounded bg-transparent cursor-pointer border-none"})]}),E.jsxs("div",{className:"grid grid-cols-3 gap-1",children:[E.jsx("button",{onClick:()=>Ct(Ee.Standard),className:"px-1 py-1 text-[10px] rounded border bg-gray-700 border-gray-600 hover:bg-gray-600",children:"STD"}),E.jsx("button",{onClick:()=>Ct(Ee.Clay),className:"px-1 py-1 text-[10px] rounded border bg-orange-700 border-orange-600",children:"CLAY"}),E.jsx("button",{onClick:()=>Ct(Ee.Gold),className:"px-1 py-1 text-[10px] rounded border bg-yellow-600 border-yellow-500 text-black",children:"GOLD"}),E.jsx("button",{onClick:()=>Ct(Ee.Normal),className:"px-1 py-1 text-[10px] rounded border bg-purple-600 border-purple-500",children:"NORM"}),E.jsx("button",{onClick:()=>Ct(Ee.Matrix),className:"px-1 py-1 text-[10px] rounded border bg-green-900 border-green-500 text-green-400",children:"MTRX"}),E.jsx("button",{onClick:()=>Ct(Ee.Image),className:"px-1 py-1 text-[10px] rounded border bg-pink-600 border-pink-500 text-white",children:"IMG"})]}),E.jsxs("div",{className:"border-t border-gray-700 pt-2 mt-1",children:[E.jsx("div",{className:"text-[10px] text-gray-400 mb-1",children:"MatCap Texture (for IMG mode)"}),E.jsx("input",{type:"file",accept:".jpg,.jpeg,.png,.webp",ref:Z,className:"hidden",onChange:ut}),E.jsx("button",{onClick:()=>{var U;return(U=Z.current)==null?void 0:U.click()},className:"w-full px-2 py-1.5 rounded text-xs font-bold bg-gray-700 border border-gray-600 hover:bg-gray-600 text-gray-200",children:"Upload Texture"})]})]})})]})]})},l1=1e3,c1=4e4,u1=2e4,me=(f,t)=>({x:f.x+t.x,y:f.y+t.y,z:f.z+t.z}),ln=(f,t)=>({x:f.x-t.x,y:f.y-t.y,z:f.z-t.z}),In=(f,t)=>({x:f.x*t,y:f.y*t,z:f.z*t}),Pa=(f,t,i)=>me(f,In(ln(t,f),i)),h1=(f,t)=>f.x*t.x+f.y*t.y,ve=f=>{if(f.length===0)return{x:0,y:0,z:0};const t=f.reduce((i,s)=>me(i,s),{x:0,y:0,z:0});return In(t,1/f.length)},yf=(f,t)=>({x:f.y*t.z-f.z*t.y,y:f.z*t.x-f.x*t.z,z:f.x*t.y-f.y*t.x}),qs=f=>{const t=Math.sqrt(f.x*f.x+f.y*f.y+f.z*f.z);return t===0?{x:0,y:0,z:0}:In(f,1/t)},ig=(f,t)=>{const i=Math.cos(t),s=Math.sin(t);return{...f,y:f.y*i-f.z*s,z:f.y*s+f.z*i}},sg=(f,t)=>{const i=Math.cos(t),s=Math.sin(t);return{...f,x:f.x*i+f.z*s,z:-f.x*s+f.z*i}},ag=(f,t)=>{const i=Math.cos(t),s=Math.sin(t);return{...f,x:f.x*i-f.y*s,y:f.x*s+f.y*i}},mo=(f,t,i,s)=>{let r=ig(f,t);return r=sg(r,i),r=ag(r,s),r},ye=(f,t,i,s,r,l,c,u,p)=>{const h=mo(f,r,l,c),y=c1-h.z,g=u1-h.z,x=(y-g)/y;let b=h.x*x,S=h.y*x;const T=t/s;return b=b*T+t/2+u,S=-S*T+i/2+p,{x:b,y:S}},Yt=f=>{if(f.length<3)return;const t=f[0],i=f[1],s=f[2],r=ln(i,t),l=ln(s,t),c=qs(yf(r,l)),u=ve(f),p=me(u,In(c,200));return{start:u,end:p}},eo=(f,t,i)=>{const s=(t.x-i.x)**2+(t.y-i.y)**2;if(s===0)return Math.sqrt((f.x-t.x)**2+(f.y-t.y)**2);let r=((f.x-t.x)*(i.x-t.x)+(f.y-t.y)*(i.y-t.y))/s;r=Math.max(0,Math.min(1,r));const l=t.x+r*(i.x-t.x),c=t.y+r*(i.y-t.y);return Math.sqrt((f.x-l)**2+(f.y-c)**2)},Pe=[];for(let f=0;f<256;++f)Pe.push((f+256).toString(16).slice(1));function f1(f,t=0){return(Pe[f[t+0]]+Pe[f[t+1]]+Pe[f[t+2]]+Pe[f[t+3]]+"-"+Pe[f[t+4]]+Pe[f[t+5]]+"-"+Pe[f[t+6]]+Pe[f[t+7]]+"-"+Pe[f[t+8]]+Pe[f[t+9]]+"-"+Pe[f[t+10]]+Pe[f[t+11]]+Pe[f[t+12]]+Pe[f[t+13]]+Pe[f[t+14]]+Pe[f[t+15]]).toLowerCase()}let Oh;const d1=new Uint8Array(16);function p1(){if(!Oh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Oh=crypto.getRandomValues.bind(crypto)}return Oh(d1)}const m1=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Z0={randomUUID:m1};function y1(f,t,i){var r;f=f||{};const s=f.random??((r=f.rng)==null?void 0:r.call(f))??p1();if(s.length<16)throw new Error("Random bytes length must be >= 16");return s[6]=s[6]&15|64,s[8]=s[8]&63|128,f1(s)}function ot(f,t,i){return Z0.randomUUID&&!f?Z0.randomUUID():y1(f)}const Se=(f,t,i)=>({x:f,y:t,z:i,id:ot()}),g1="#3b82f6",bs="#1e293b",Ms=()=>({mode:Ee.Standard,color:g1}),K0=(f={x:0,y:0,z:0},t=l1)=>{const i=t,{x:s,y:r,z:l}=f,c=[Se(s-i,r-i,l-i),Se(s+i,r-i,l-i),Se(s+i,r-i,l+i),Se(s-i,r-i,l+i),Se(s-i,r+i,l-i),Se(s+i,r+i,l-i),Se(s+i,r+i,l+i),Se(s-i,r+i,l+i)],u=ot(),p=y=>({id:ot(),points:y,cubeId:u,normal:Yt(y)}),h=[p([c[0],c[1],c[2],c[3]]),p([c[7],c[6],c[5],c[4]]),p([c[3],c[2],c[6],c[7]]),p([c[1],c[0],c[4],c[5]]),p([c[0],c[3],c[7],c[4]]),p([c[2],c[1],c[5],c[6]])];return{id:u,facets:h,outlineColor:bs,material:Ms(),layer:0}},x1=(f={x:0,y:0,z:0},t=2e3)=>{const i=t/2,{x:s,y:r,z:l}=f,c=Se(s-i,r,l-i),u=Se(s+i,r,l-i),p=Se(s+i,r,l+i),h=Se(s-i,r,l+i),y=ot();return{id:y,facets:[{id:ot(),points:[c,u,p,h],cubeId:y,normal:Yt([c,u,p,h])}],outlineColor:bs,material:Ms(),layer:0}},b1=(f={x:0,y:0,z:0},t=800,i=12)=>{const s=ot(),r=[],l=[];for(let c=0;c<=i;c++){const u=c*Math.PI/i,p=Math.sin(u),h=Math.cos(u),y=[];for(let g=0;g<=i;g++){const x=g*2*Math.PI/i,b=Math.sin(x),S=Math.cos(x),T=f.x+t*S*p,w=f.y+t*h,z=f.z+t*b*p;y.push(Se(T,w,z))}r.push(y)}for(let c=0;c<i;c++)for(let u=0;u<i;u++){const p=r[c][u],h=r[c][u+1],y=r[c+1][u+1],g=r[c+1][u];if(c===0){const x=[p,y,g];l.push({id:ot(),points:x,cubeId:s,normal:Yt(x)})}else if(c===i-1){const x=[p,h,g];l.push({id:ot(),points:x,cubeId:s,normal:Yt(x)})}else{const x=[p,h,y,g];l.push({id:ot(),points:x,cubeId:s,normal:Yt(x)})}}return{id:s,facets:l,outlineColor:bs,material:Ms(),layer:0}},M1=(f={x:0,y:0,z:0},t=600,i=1200,s=12)=>{const r=ot(),l=[],c=[],u=i/2;for(let h=0;h<s;h++){const y=h*2*Math.PI/s,g=f.x+t*Math.cos(y),x=f.z+t*Math.sin(y);l.push(Se(g,f.y-u,x)),c.push(Se(g,f.y+u,x))}const p=[];p.push({id:ot(),points:[...l].reverse(),cubeId:r,normal:void 0}),p.push({id:ot(),points:c,cubeId:r,normal:void 0});for(let h=0;h<s;h++){const y=(h+1)%s,g=l[h],x=l[y],b=c[y],S=c[h],T=[g,x,b,S];p.push({id:ot(),points:T,cubeId:r,normal:Yt(T)})}return{id:r,facets:p,outlineColor:bs,material:Ms(),layer:0}},S1=(f={x:0,y:0,z:0},t=600,i=200,s=12,r=8)=>{const l=ot(),c=[];for(let p=0;p<=s;p++){const h=p*2*Math.PI/s,y=[];for(let g=0;g<=r;g++){const x=g*2*Math.PI/r,b=f.x+(t+i*Math.cos(h))*Math.cos(x),S=f.z+(t+i*Math.cos(h))*Math.sin(x),T=f.y+i*Math.sin(h);y.push(Se(b,T,S))}c.push(y)}const u=[];for(let p=0;p<s;p++)for(let h=0;h<r;h++){const y=c[p][h],g=c[p+1][h],x=c[p+1][h+1],b=c[p][h+1],S=[y,g,x,b];u.push({id:ot(),points:S,cubeId:l,normal:Yt(S)})}return{id:l,facets:u,outlineColor:bs,material:Ms(),layer:0}},v1=(f={x:0,y:0,z:0},t=600,i=1200,s=12)=>{const r=ot(),l=[],c=i/2,u=Se(f.x,f.y-c,f.z);for(let h=0;h<s;h++){const y=h*2*Math.PI/s,g=f.x+t*Math.cos(y),x=f.z+t*Math.sin(y);l.push(Se(g,f.y+c,x))}const p=[];p.push({id:ot(),points:l,cubeId:r,normal:void 0});for(let h=0;h<s;h++){const y=(h+1)%s,g=l[h],x=l[y],b=[u,x,g];p.push({id:ot(),points:b,cubeId:r,normal:Yt(b)})}return{id:r,facets:p,outlineColor:bs,material:Ms(),layer:0}},T1=(f={x:0,y:0,z:0},t=800,i=12)=>{const s=ot(),r=[],l=Se(f.x,f.y,f.z);for(let u=0;u<i;u++){const p=u*2*Math.PI/i,h=f.x+t*Math.cos(p),y=f.z+t*Math.sin(p);r.push(Se(h,f.y,y))}const c=[];for(let u=0;u<i;u++){const p=(u+1)%i,h=[l,r[u],r[p]];c.push({id:ot(),points:h,cubeId:s,normal:Yt(h)})}return{id:s,facets:c,outlineColor:bs,material:Ms(),layer:0}},w1=(f={x:0,y:0,z:0},t=400,i=800,s=12)=>{const r=ot(),l=[],c=[];for(let p=0;p<s;p++){const h=p*2*Math.PI/s,y=Math.sin(h),g=Math.cos(h);l.push(Se(f.x+t*g,f.y,f.z+t*y)),c.push(Se(f.x+i*g,f.y,f.z+i*y))}const u=[];for(let p=0;p<s;p++){const h=(p+1)%s,y=c[p],g=c[h],x=l[h],b=l[p],S=[y,g,x,b];u.push({id:ot(),points:S,cubeId:r,normal:Yt(S)})}return{id:r,facets:u,outlineColor:bs,material:Ms(),layer:0}},zn=(f,t)=>!f.id||!t.id?"":f.id<t.id?`${f.id}|${t.id}`:`${t.id}|${f.id}`,_1=(f,t)=>{const i=new Map;f.facets.forEach(b=>b.points.forEach(S=>{S.id&&i.set(S.id,S)}));const s=[],r=new Set;if(t.forEach(b=>{i.has(b)&&!r.has(b)&&(s.push(i.get(b)),r.add(b))}),s.length<3)return f;const l=ve(s),c=s[0],u=qs(ln(c,l)),p=ln(s[1],s[0]),h=ln(s[2],s[0]);let y=qs(yf(p,h));y.x===0&&y.y===0&&y.z===0&&(y={x:0,y:1,z:0});const g=yf(y,u);s.sort((b,S)=>{const T=ln(b,l),w=ln(S,l),z=T.x*u.x+T.y*u.y+T.z*u.z,L=T.x*g.x+T.y*g.y+T.z*g.z,X=Math.atan2(L,z),D=w.x*u.x+w.y*u.y+w.z*u.z,I=w.x*g.x+w.y*g.y+w.z*g.z,$=Math.atan2(I,D);return X-$});const x={id:ot(),points:s,cubeId:f.id,normal:Yt(s),selected:!0};return{...f,facets:[...f.facets,x]}},E1=f=>{const t=[],i=new Map;f.facets.forEach(y=>{i.set(y.id,{...ve(y.points),id:ot()})});const s=new Map,r=new Map;f.facets.forEach(y=>{const g=y.points;for(let x=0;x<g.length;x++){const b=g[x],S=g[(x+1)%g.length],T=zn(b,S);s.has(T)||(s.set(T,[]),r.set(T,[b,S])),s.get(T).push(y.id)}});const l=new Map;for(const[y,g]of s.entries()){const x=r.get(y),b=ve(x),S=ve(g.map(T=>i.get(T)));l.set(y,{...ve([b,S]),id:ot()})}const c=new Map,u=new Map,p=new Map;f.facets.forEach(y=>{y.points.forEach((g,x)=>{if(!g.id)return;c.set(g.id,g),u.has(g.id)||u.set(g.id,[]),u.get(g.id).push(y.id);const b=y.points[(x-1+y.points.length)%y.points.length],S=y.points[(x+1)%y.points.length],T=zn(b,g),w=zn(g,S);p.has(g.id)||p.set(g.id,[]);const z=p.get(g.id);z.includes(T)||z.push(T),z.includes(w)||z.push(w)})});const h=new Map;for(const[y,g]of c.entries()){const x=u.get(y)||[],b=p.get(y)||[],S=x.length,T=ve(x.map(Z=>i.get(Z))),w=b.map(Z=>{const et=r.get(Z);return ve(et)}),z=ve(w),L=T,X=In(z,2),D=In(g,S-3),I=me(me(L,X),D),$=In(I,1/S);h.set(y,{...$,id:ot()})}return f.facets.forEach(y=>{const g=i.get(y.id),x=y.points;for(let b=0;b<x.length;b++){const S=x[b],T=x[(b-1+x.length)%x.length],w=x[(b+1)%x.length];if(!S.id)continue;const z=h.get(S.id),L=l.get(zn(T,S)),X=l.get(zn(S,w)),D=[z,X,g,L];t.push({id:ot(),points:D,cubeId:f.id,normal:Yt(D)})}}),{...f,facets:t}},A1=f=>{const t=[],i=new Map;f.facets.forEach(c=>{i.set(c.id,{...ve(c.points),id:ot()})});const s=new Map;f.facets.forEach(c=>{const u=c.points;for(let p=0;p<u.length;p++){const h=u[p],y=u[(p+1)%u.length],g=zn(h,y);s.has(g)||s.set(g,[h,y])}});const r=new Map;for(const[c,u]of s.entries())r.set(c,{...ve(u),id:ot()});const l=new Map;return f.facets.forEach(c=>{c.points.forEach(u=>{u.id&&!l.has(u.id)&&l.set(u.id,{...u})})}),f.facets.forEach(c=>{const u=i.get(c.id),p=c.points;for(let h=0;h<p.length;h++){const y=p[h],g=p[(h-1+p.length)%p.length],x=p[(h+1)%p.length];if(!y.id)continue;const b=r.get(zn(g,y)),S=r.get(zn(y,x)),T=[y,S,u,b];t.push({id:ot(),points:T,cubeId:f.id,normal:Yt(T)})}}),{...f,facets:t}},Q0=f=>{const t=new Map,i=f.facets.map(r=>{const l=r.points.map(c=>{if(c.id&&t.has(c.id))return t.get(c.id);const u={...c,id:ot()};return c.id&&t.set(c.id,u),u});return{...r,id:ot(),points:l,cubeId:"",normal:Yt(l)}}),s=ot();return i.forEach(r=>r.cubeId=s),{...f,id:s,facets:i,selected:!0}},z1=(f,t)=>({...f,facets:f.facets.filter(i=>!t.includes(i.id))}),rg=(f,t,i=200)=>{const s=f.facets.find(g=>g.id===t);if(!s)return f;const r=s.normal?qs(ln(s.normal.end,s.normal.start)):{x:0,y:1,z:0},l=In(r,i),c=s.points,u=c.map(g=>({...me(g,l),id:ot()})),p=[];for(let g=0;g<c.length;g++){const x=c[g],b=c[(g+1)%c.length],S=u[g],T=u[(g+1)%u.length],w=[b,x,S,T];p.push({id:ot(),points:w,cubeId:f.id,normal:Yt(w)})}const h={id:ot(),points:u,cubeId:f.id,normal:Yt(u),selected:!0},y=f.facets.filter(g=>g.id!==t);return{...f,facets:[...y,...p,h]}},og=(f,t,i=.2)=>{const s=f.facets.find(p=>p.id===t);if(!s)return f;const r=ve(s.points),l=s.points.map(p=>Pa(p,r,i));l.forEach(p=>p.id=ot());const c={id:ot(),points:l,cubeId:f.id,normal:Yt(l),selected:!0},u=[];for(let p=0;p<s.points.length;p++){const h=s.points[p],y=s.points[(p+1)%s.points.length],g=l[p],x=l[(p+1)%l.length],b=[h,y,x,g];u.push({id:ot(),points:b,cubeId:f.id,normal:Yt(b)})}return{...f,facets:[...f.facets.filter(p=>p.id!==t),c,...u]}},C1=(f,t)=>{const i=f.facets.find(l=>l.id===t);if(!i)return f;const s=ve(i.points);s.id=ot();const r=[];for(let l=0;l<i.points.length;l++){const c=i.points[l],u=i.points[(l+1)%i.points.length],p=[c,u,s];r.push({id:ot(),points:p,cubeId:f.id,normal:Yt(p)})}return{...f,facets:[...f.facets.filter(l=>l.id!==t),...r]}},R1=(f,t)=>{const i=f.facets.find(l=>l.id===t);if(!i||i.points.length<=3)return f;const s=[],r=i.points[0];for(let l=1;l<i.points.length-1;l++){const c=i.points[l],u=i.points[l+1],p=[r,c,u];s.push({id:ot(),points:p,cubeId:f.id,normal:Yt(p)})}return{...f,facets:[...f.facets.filter(l=>l.id!==t),...s]}},N1=(f,t)=>{const i=f.facets.find(l=>l.id===t);if(!i)return f;const s=[...i.points].reverse(),r={...i,points:s,normal:Yt(s)};return{...f,facets:f.facets.map(l=>l.id===t?r:l)}},O1=f=>{const t=ve(f.facets.flatMap(p=>p.points));let i=0,s=0;const r=new Map;f.facets.forEach(p=>p.points.forEach(h=>{if(h.id&&!r.has(h.id)){r.set(h.id,h);const y=Math.sqrt((h.x-t.x)**2+(h.y-t.y)**2+(h.z-t.z)**2);i+=y,s++}}));const l=s>0?i/s:1e3,c=new Map;r.forEach((p,h)=>{const y=ln(p,t),g=qs(y),x=me(t,In(g,l));c.set(h,{...x,id:h})});const u=f.facets.map(p=>({...p,points:p.points.map(h=>h.id&&c.has(h.id)?c.get(h.id):h),normal:void 0}));return u.forEach(p=>p.normal=Yt(p.points)),{...f,facets:u}},D1=(f,t,i)=>{const s=f.facets.find(h=>h.id===t),r=f.facets.find(h=>h.id===i);if(!s||!r||s.points.length!==r.points.length)return f;let l=0,c=1/0;for(let h=0;h<s.points.length;h++){let y=0;for(let g=0;g<s.points.length;g++){const x=s.points[g],b=r.points[(g+h)%r.points.length];y+=(x.x-b.x)**2+(x.y-b.y)**2+(x.z-b.z)**2}y<c&&(c=y,l=h)}const u=[],p=s.points.length;for(let h=0;h<p;h++){const y=s.points[h],g=s.points[(h+1)%p],x=r.points[(h+1+l)%p],b=r.points[(h+l)%p],S=[y,g,x,b];u.push({id:ot(),points:S,cubeId:f.id,normal:Yt(S)})}return{...f,facets:[...f.facets.filter(h=>h.id!==t&&h.id!==i),...u]}},lg=(f,t,i,s)=>{let r=og(f,t,i);const l=r.facets.find(c=>c.selected);return l&&(r=rg(r,l.id,s)),r},J0=(f,t,i=.1)=>{if(t.length<2)return f;const s=f.facets.flatMap(c=>c.points).filter(c=>c.id&&t.includes(c.id));if(s.length===0)return f;const r=ve(s);r.id=t[0];const l=f.facets.map(c=>{const u=c.points.map(y=>y.id&&t.includes(y.id)?r:y);if(new Set(u.map(y=>y.id)).size<3)return null;const h=[];for(let y=0;y<u.length;y++){const g=u[y],x=h.length>0?h[h.length-1]:null;(!x||x.id!==g.id)&&h.push(g)}return h.length>1&&h[0].id===h[h.length-1].id&&h.pop(),h.length<3?null:{...c,points:h,normal:Yt(h)}}).filter(c=>c!==null);return{...f,facets:l}},B1=(f,t,i=.5)=>{const s=new Map,r=new Map;f.facets.forEach(u=>{u.points.forEach((p,h)=>{if(!p.id)return;r.set(p.id,p),s.has(p.id)||s.set(p.id,new Set);const y=u.points[(h-1+u.points.length)%u.points.length],g=u.points[(h+1)%u.points.length];y.id&&s.get(p.id).add(y.id),g.id&&s.get(p.id).add(g.id)})});const l=new Map;t.forEach(u=>{const p=s.get(u);if(p&&p.size>0){const h=r.get(u),y=Array.from(p).map(b=>r.get(b)),g=ve(y),x=Pa(h,g,i);l.set(u,x)}});const c=f.facets.map(u=>({...u,points:u.points.map(p=>p.id&&l.has(p.id)?{...l.get(p.id),id:p.id}:p)}));return c.forEach(u=>u.normal=Yt(u.points)),{...f,facets:c}},L1=(f,t,i)=>{const s=f.facets.map(r=>({...r,points:r.points.map(l=>l.id&&t.includes(l.id)?{...l,x:l.x+(Math.random()-.5)*i,y:l.y+(Math.random()-.5)*i,z:l.z+(Math.random()-.5)*i}:l)}));return s.forEach(r=>r.normal=Yt(r.points)),{...f,facets:s}},U1=(f,t,i)=>{const s=[];return f.facets.forEach(r=>{const l=r.points.findIndex(u=>u.id===t),c=r.points.findIndex(u=>u.id===i);if(l!==-1&&c!==-1){if(Math.abs(l-c)===1||Math.abs(l-c)===r.points.length-1){s.push(r);return}const u=[];let p=l;for(;p!==c;)u.push(r.points[p]),p=(p+1)%r.points.length;u.push(r.points[c]);const h=[];for(p=c;p!==l;)h.push(r.points[p]),p=(p+1)%r.points.length;h.push(r.points[l]),s.push({id:ot(),points:u,cubeId:f.id,normal:Yt(u)}),s.push({id:ot(),points:h,cubeId:f.id,normal:Yt(h)})}else s.push(r)}),{...f,facets:s}},j1=(f,t,i)=>lg(f,t[0],i*100,0),P0=(f,t)=>{const i=[],s=new Set,r=zn(t[0],t[1]),l=[t];for(s.add(r);l.length>0;){const c=l.pop();i.push(c);const u=f.facets.filter(p=>{const h=p.points.some(g=>g.id===c[0].id),y=p.points.some(g=>g.id===c[1].id);return h&&y});for(const p of u)if(p.points.length===4)for(let h=0;h<4;h++){const y=p.points[h],g=p.points[(h+1)%4];if(y.id!==c[0].id&&y.id!==c[1].id&&g.id!==c[0].id&&g.id!==c[1].id){const x=zn(y,g);s.has(x)||(s.add(x),l.push([y,g]))}}}return i},k1=(f,t,i)=>{const s=new Map;t.forEach(l=>{const c=zn(l[0],l[1]),u=Pa(l[0],l[1],i);u.id=ot(),s.set(c,u)});const r=[];return f.facets.forEach(l=>{const c=[];for(let u=0;u<l.points.length;u++){const p=l.points[u],h=l.points[(u+1)%l.points.length],y=zn(p,h);s.has(y)&&c.push({idx:u,pt:s.get(y)})}if(c.length===2){c.sort((x,b)=>x.idx-b.idx);const u=c[0],p=c[1],h=[u.pt];let y=(u.idx+1)%l.points.length;for(;y!==(p.idx+1)%l.points.length;)h.push(l.points[y]),y=(y+1)%l.points.length;h.push(p.pt);const g=[p.pt];for(y=(p.idx+1)%l.points.length;y!==(u.idx+1)%l.points.length;)g.push(l.points[y]),y=(y+1)%l.points.length;g.push(u.pt),r.push({id:ot(),points:h,cubeId:f.id,normal:Yt(h)}),r.push({id:ot(),points:g,cubeId:f.id,normal:Yt(g)})}else r.push(l)}),{...f,facets:r}},F1=(f,t,i)=>{let s;if(t.type==="vertex"){const l=f.facets.flatMap(c=>c.points).find(c=>c.id===t.id);if(!l)return f;s=l}else s=Pa(t.p1,t.p2,t.ratio),s.id=ot();let r;if(i.type==="vertex"){const l=f.facets.flatMap(c=>c.points).find(c=>c.id===i.id);if(!l)return f;r=l}else r=Pa(i.p1,i.p2,i.ratio),r.id=ot();return f},H1=(f,t,i)=>{const s=[],r=[],l=new Map,c=u=>{if(u.id&&l.has(u.id))return l.get(u.id);const p={...u,id:ot()};return u.id&&l.set(u.id,p),p};return t.forEach(u=>{const p=u.split("|"),h=f.facets.flatMap(g=>g.points).find(g=>g.id===p[0]),y=f.facets.flatMap(g=>g.points).find(g=>g.id===p[1]);if(h&&y){const g=c(h),x=c(y),b=[h,y,x,g];s.push({id:ot(),points:b,cubeId:f.id,normal:Yt(b),selected:!0}),g.id&&x.id&&r.push(zn(g,x))}}),{cube:{...f,facets:[...f.facets,...s]},newEdgeKeys:r}},V1=(f,t,i)=>{const s=[],r=[];return t.forEach(l=>{const c=f.facets.flatMap(p=>p.points).find(p=>p.id===l);if(!c)return;const u={...c,id:ot()};r.push(u.id),s.push({id:ot(),points:[c,u],cubeId:f.id,normal:void 0,selected:!0})}),{cube:{...f,facets:[...f.facets,...s]},newVertexIds:r}},I1=(f,t,i)=>f,G1=(f,t)=>{const i=f.facets.filter(y=>!t.includes(y.id)),s=f.facets.filter(y=>t.includes(y.id));if(s.length===0)return null;const r=ot(),l=new Map,c=y=>{if(y.id&&l.has(y.id))return l.get(y.id);const g={...y,id:ot()};return y.id&&l.set(y.id,g),g},u=s.map(y=>{const g=y.points.map(x=>c(x));return{...y,cubeId:r,id:ot(),points:g,normal:Yt(g)}}),p={...f,id:r,facets:u,selected:!0};return{original:{...f,facets:i,selected:!1},newCube:p}},Dh=(f,t)=>{const i=f.facets.map(s=>{const r=[...s.points].reverse().map(l=>{const c={...l,id:ot()};return c[t]=-c[t],c});return{id:ot(),points:r,cubeId:f.id,normal:Yt(r)}});return{...f,facets:[...f.facets,...i]}},Y1=(f,t,i)=>{const{width:s,height:r}=i;f.clearRect(0,0,s,r),i.showGrid&&X1(f,t,i),i.showAxisPlanes&&q1(f,t,i);const l=[];t.cubes.forEach(c=>{t.visibleLayers&&t.visibleLayers[c.layer]===!1||c.facets.forEach(u=>{const p=ve(u.points),h=mo(p,t.camera.rotX,t.camera.rotY,t.camera.rotZ);u.zIndex=h.z,l.push(u)})}),l.sort((c,u)=>(c.zIndex||0)-(u.zIndex||0)),l.forEach(c=>{K1(f,c,t,i)}),(t.selection.edges.length>0||i.tool===lt.Edge)&&l.forEach(c=>J1(f,c,t,i)),(t.selection.vertices.length>0||i.tool===lt.Vertex)&&l.forEach(c=>Q1(f,c,t,i)),i.tool===lt.LoopCut&&i.loopCutPreview&&tM(f,i.loopCutPreview.edges,i.loopCutPreview.ratio,t,i),i.tool===lt.Knife&&i.knifeState&&eM(f,i.knifeState,t,i),i.selectionCenter&&(i.gizmoMode===Ye.Translate&&P1(f,i.selectionCenter,t,i),i.gizmoMode===Ye.Rotate&&$1(f,i.selectionCenter,t,i),i.gizmoMode===Ye.Scale&&W1(f,i.selectionCenter,t,i))},X1=(f,t,i)=>{f.strokeStyle="#4b5563",f.lineWidth=1,f.beginPath();const s=6e3,r=1e3;for(let l=-s;l<=s;l+=r){const c=ye({x:l,y:-s,z:0},i.width,i.height,t.camera.zoom,t.camera.rotX,t.camera.rotY,t.camera.rotZ,t.camera.panX,t.camera.panY),u=ye({x:l,y:s,z:0},i.width,i.height,t.camera.zoom,t.camera.rotX,t.camera.rotY,t.camera.rotZ,t.camera.panX,t.camera.panY);f.moveTo(c.x,c.y),f.lineTo(u.x,u.y)}for(let l=-s;l<=s;l+=r){const c=ye({x:-s,y:l,z:0},i.width,i.height,t.camera.zoom,t.camera.rotX,t.camera.rotY,t.camera.rotZ,t.camera.panX,t.camera.panY),u=ye({x:s,y:l,z:0},i.width,i.height,t.camera.zoom,t.camera.rotX,t.camera.rotY,t.camera.rotZ,t.camera.panX,t.camera.panY);f.moveTo(c.x,c.y),f.lineTo(u.x,u.y)}f.stroke()},q1=(f,t,i)=>{const{width:r,height:l}=i,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=t.camera,x=(b,S,T,w,z,L)=>{const X=ye(b,r,l,c,u,p,h,y,g),D=ye(S,r,l,c,u,p,h,y,g),I=ye(T,r,l,c,u,p,h,y,g),$=ye(w,r,l,c,u,p,h,y,g);f.fillStyle=z,f.strokeStyle=L,f.lineWidth=1,f.beginPath(),f.moveTo(X.x,X.y),f.lineTo(D.x,D.y),f.lineTo(I.x,I.y),f.lineTo($.x,$.y),f.closePath(),f.fill(),f.stroke()};x({x:0,y:-3e3,z:-3e3},{x:0,y:3e3,z:-3e3},{x:0,y:3e3,z:3e3},{x:0,y:-3e3,z:3e3},"rgba(239, 68, 68, 0.1)","rgba(239, 68, 68, 0.3)"),x({x:-3e3,y:0,z:-3e3},{x:3e3,y:0,z:-3e3},{x:3e3,y:0,z:3e3},{x:-3e3,y:0,z:3e3},"rgba(34, 197, 94, 0.1)","rgba(34, 197, 94, 0.3)"),x({x:-3e3,y:-3e3,z:0},{x:3e3,y:-3e3,z:0},{x:3e3,y:3e3,z:0},{x:-3e3,y:3e3,z:0},"rgba(59, 130, 246, 0.1)","rgba(59, 130, 246, 0.3)")},Z1=(f,t,i,s)=>{const r=qs({x:.5,y:-.5,z:1}),l=i.x*r.x+i.y*r.y+i.z*r.z,c=Math.max(0,Math.min(1,.5+l*.5)),u=Math.pow(Math.max(0,l),20);switch(f){case Ee.Image:{if(s){const p=i.x*.5+.5,h=-i.y*.5+.5,y=Math.floor(p*(s.width-1)),x=(Math.floor(h*(s.height-1))*s.width+y)*4;if(x>=0&&x<s.data.length){const b=s.data[x],S=s.data[x+1],T=s.data[x+2];return{fill:`rgb(${b},${S},${T})`,shade:"transparent",outline:"rgba(255,255,255,0.2)"}}}return{fill:t||"#3b82f6",shade:`rgba(0,0,0,${1-c})`,outline:"rgba(255,255,255,0.5)"}}case Ee.Normal:{const p=Math.floor((i.x+1)*127.5),h=Math.floor((i.y+1)*127.5),y=Math.floor((i.z+1)*127.5);return{fill:`rgb(${p},${h},${y})`,shade:"rgba(0,0,0,0.1)",outline:"rgba(255,255,255,0.2)"}}case Ee.Clay:return{fill:`hsl(15, 40%, ${40+c*20}%)`,shade:"rgba(0,0,0,0.1)",outline:"rgba(255,255,255,0.1)"};case Ee.Gold:return{fill:`hsl(45, 80%, ${30+c*40+u*30}%)`,shade:"rgba(0,0,0,0)",outline:"rgba(255,215,0,0.3)"};case Ee.Matrix:return{fill:"#000000",shade:`rgba(0, 255, 0, ${.1+c*.2})`,outline:"#00ff00"};case Ee.Standard:default:return{fill:t||"#3b82f6",shade:`rgba(0,0,0,${1-c})`,outline:"rgba(255,255,255,0.5)"}}},K1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera,x=i.cubes.find(I=>I.id===t.cubeId);if(!x)return;const b=t.points.map(I=>ye(I,r,l,c,u,p,h,y,g));if(b.length===2){const I=b[0],$=b[1],Z=i.selection.facets.includes(t.id)||i.selection.cubes.includes(t.cubeId);f.beginPath(),f.moveTo(I.x,I.y),f.lineTo($.x,$.y),f.lineWidth=2,f.strokeStyle=Z?"#facc15":"#ffffff",f.stroke();return}if(b.length<3)return;const S=t.normal?mo(t.normal.start,u,p,h):{x:0,y:0,z:0},T=t.normal?mo(t.normal.end,u,p,h):{x:0,y:1,z:0},w=qs(ln(T,S)),z=i.selection.facets.includes(t.id)||i.selection.cubes.includes(t.cubeId),{fill:L,shade:X,outline:D}=Z1(x.material.mode,x.material.color,w,x.material.texture);f.beginPath(),f.moveTo(b[0].x,b[0].y);for(let I=1;I<b.length;I++)f.lineTo(b[I].x,b[I].y);if(f.closePath(),s.showSolid&&(z&&x.material.mode===Ee.Standard?f.fillStyle="#facc15":f.fillStyle=L,f.fill(),X&&X!=="transparent"&&(!z||x.material.mode!==Ee.Standard)&&(f.fillStyle=X,f.fill()),z&&x.material.mode!==Ee.Standard&&(f.fillStyle="rgba(250, 204, 21, 0.4)",f.fill())),(s.showOutlines||z)&&s.tool!==lt.Edge&&(f.strokeStyle=z?"#ffffff":D,f.lineWidth=z?2:1,f.stroke()),s.showNormals&&t.normal){const I=ye(t.normal.start,r,l,c,u,p,h,y,g),$=ye(t.normal.end,r,l,c,u,p,h,y,g);f.strokeStyle="#ec4899",f.lineWidth=1,f.beginPath(),f.moveTo(I.x,I.y),f.lineTo($.x,$.y),f.stroke()}},Q1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera;t.points.forEach(x=>{if(!x.id)return;const b=ye(x,r,l,c,u,p,h,y,g),S=i.selection.vertices.includes(x.id);f.fillStyle=S?"#ef4444":"#ffffff",f.strokeStyle="#000000",f.lineWidth=1,f.beginPath(),f.rect(b.x-3,b.y-3,6,6),f.fill(),f.stroke()})},J1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera;for(let x=0;x<t.points.length;x++){const b=t.points[x],S=t.points[(x+1)%t.points.length];if(!b.id||!S.id)continue;const T=b.id<S.id?b.id:S.id,w=b.id<S.id?S.id:b.id,z=`${T}|${w}`,L=i.selection.edges.includes(z),X=ye(b,r,l,c,u,p,h,y,g),D=ye(S,r,l,c,u,p,h,y,g);(L||s.tool===lt.Edge)&&(f.beginPath(),f.moveTo(X.x,X.y),f.lineTo(D.x,D.y),f.lineWidth=L?3:1,f.strokeStyle=L?"#10b981":"rgba(255,255,255,0.5)",f.stroke())}},P1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera,x=500,b=D=>ye(D,r,l,c,u,p,h,y,g),S=b(t),T=b(me(t,{x,y:0,z:0})),w=b(me(t,{x:0,y:x,z:0})),z=b(me(t,{x:0,y:0,z:x})),L=s.gizmoActiveAxis,X=(D,I,$)=>{f.beginPath(),f.moveTo(S.x,S.y),f.lineTo(D.x,D.y),f.strokeStyle=I,f.lineWidth=$?4:2,f.stroke(),f.fillStyle=I,f.beginPath(),f.arc(D.x,D.y,$?6:4,0,Math.PI*2),f.fill()};X(z,L==="z"?"#ffffff":"#3b82f6",L==="z"),X(w,L==="y"?"#ffffff":"#22c55e",L==="y"),X(T,L==="x"?"#ffffff":"#ef4444",L==="x")},W1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera,x=500,b=D=>ye(D,r,l,c,u,p,h,y,g),S=b(t),T=b(me(t,{x,y:0,z:0})),w=b(me(t,{x:0,y:x,z:0})),z=b(me(t,{x:0,y:0,z:x})),L=s.gizmoActiveAxis,X=(D,I,$)=>{f.beginPath(),f.moveTo(S.x,S.y),f.lineTo(D.x,D.y),f.strokeStyle=I,f.lineWidth=$?4:2,f.stroke();const Z=$?8:6;f.fillStyle=I,f.fillRect(D.x-Z/2,D.y-Z/2,Z,Z)};X(z,L==="z"?"#ffffff":"#3b82f6",L==="z"),X(w,L==="y"?"#ffffff":"#22c55e",L==="y"),X(T,L==="x"?"#ffffff":"#ef4444",L==="x")},$1=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera,x=500,b=w=>ye(w,r,l,c,u,p,h,y,g),S=s.gizmoActiveAxis,T=(w,z)=>{const L=S===w;f.strokeStyle=L?"#ffffff":z,f.lineWidth=L?3:1.5,f.beginPath();const X=32;for(let D=0;D<=X;D++){const I=D/X*Math.PI*2;let $={x:0,y:0,z:0};w==="x"&&($={x:0,y:Math.cos(I)*x,z:Math.sin(I)*x}),w==="y"&&($={x:Math.cos(I)*x,y:0,z:Math.sin(I)*x}),w==="z"&&($={x:Math.cos(I)*x,y:Math.sin(I)*x,z:0});const Z=me(t,$),et=b(Z);D===0?f.moveTo(et.x,et.y):f.lineTo(et.x,et.y)}f.stroke()};T("z","#3b82f6"),T("y","#22c55e"),T("x","#ef4444")},tM=(f,t,i,s,r)=>{const{width:l,height:c}=r,{zoom:u,rotX:p,rotY:h,rotZ:y,panX:g,panY:x}=s.camera;f.strokeStyle="#d946ef",f.lineWidth=3,f.beginPath();let b=null;t.forEach((S,T)=>{const w=Pa(S[0],S[1],i),z=ye(w,l,c,u,p,h,y,g,x);T===0?(f.moveTo(z.x,z.y),b=z):f.lineTo(z.x,z.y)}),b&&f.lineTo(b.x,b.y),f.stroke()},eM=(f,t,i,s)=>{const{width:r,height:l}=s,{zoom:c,rotX:u,rotY:p,rotZ:h,panX:y,panY:g}=i.camera,x=ye(t.start,r,l,c,u,p,h,y,g);let b=t.current?ye(t.current,r,l,c,u,p,h,y,g):s.mousePos;b&&(f.strokeStyle="#0ea5e9",f.lineWidth=2,f.setLineDash([5,5]),f.beginPath(),f.moveTo(x.x,x.y),f.lineTo(b.x,b.y),f.stroke(),f.setLineDash([]),f.fillStyle="#0ea5e9",f.beginPath(),f.arc(x.x,x.y,4,0,Math.PI*2),f.fill(),t.current&&(f.fillStyle="#f43f5e",f.beginPath(),f.arc(b.x,b.y,5,0,Math.PI*2),f.fill(),f.strokeStyle="#fff",f.stroke()))};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zf="182",nc=0,nM=1,cg=2,W0=1,$0=100,ty=204,ey=205,ny=3,iM=0,iy="attached",sM="detached",ug=300,Wa=1e3,Za=1001,ic=1002,yo=1003,hg=1004,fg=1005,go=1006,dg=1007,lc=1008,pg=1009,Cf=1015,Rf=1023,aM=1028,$a=2300,tr=2301,Bh=2302,sy=2400,ay=2401,ry=2402,rM=2500,oM=0,mg=1,gf=2,lM=0,Nf="",We="srgb",ti="srgb-linear",oy="linear",Lh="srgb",Da=7680,ly=519,xf=35044,Ys=2e3,bf=2001;function cM(f){for(let t=f.length-1;t>=0;--t)if(f[t]>=65535)return!0;return!1}function uM(f){return ArrayBuffer.isView(f)&&!(f instanceof DataView)}function Mf(f){return document.createElementNS("http://www.w3.org/1999/xhtml",f)}const cy={};function uy(...f){const t="THREE."+f.shift();console.log(t,...f)}function ce(...f){const t="THREE."+f.shift();console.warn(t,...f)}function xe(...f){const t="THREE."+f.shift();console.error(t,...f)}function hy(...f){const t=f.join(" ");t in cy||(cy[t]=!0,ce(...f))}class cc{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const s=this._listeners;s[t]===void 0&&(s[t]=[]),s[t].indexOf(i)===-1&&s[t].push(i)}hasEventListener(t,i){const s=this._listeners;return s===void 0?!1:s[t]!==void 0&&s[t].indexOf(i)!==-1}removeEventListener(t,i){const s=this._listeners;if(s===void 0)return;const r=s[t];if(r!==void 0){const l=r.indexOf(i);l!==-1&&r.splice(l,1)}}dispatchEvent(t){const i=this._listeners;if(i===void 0)return;const s=i[t.type];if(s!==void 0){t.target=this;const r=s.slice(0);for(let l=0,c=r.length;l<c;l++)r[l].call(this,t);t.target=null}}}const nn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let fy=1234567;const ho=Math.PI/180,xo=180/Math.PI;function $n(){const f=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,s=Math.random()*4294967295|0;return(nn[f&255]+nn[f>>8&255]+nn[f>>16&255]+nn[f>>24&255]+"-"+nn[t&255]+nn[t>>8&255]+"-"+nn[t>>16&15|64]+nn[t>>24&255]+"-"+nn[i&63|128]+nn[i>>8&255]+"-"+nn[i>>16&255]+nn[i>>24&255]+nn[s&255]+nn[s>>8&255]+nn[s>>16&255]+nn[s>>24&255]).toLowerCase()}function Ft(f,t,i){return Math.max(t,Math.min(i,f))}function Of(f,t){return(f%t+t)%t}function hM(f,t,i,s,r){return s+(f-t)*(r-s)/(i-t)}function fM(f,t,i){return f!==t?(i-f)/(t-f):0}function fo(f,t,i){return(1-i)*f+i*t}function dM(f,t,i,s){return fo(f,t,1-Math.exp(-i*s))}function pM(f,t=1){return t-Math.abs(Of(f,t*2)-t)}function mM(f,t,i){return f<=t?0:f>=i?1:(f=(f-t)/(i-t),f*f*(3-2*f))}function yM(f,t,i){return f<=t?0:f>=i?1:(f=(f-t)/(i-t),f*f*f*(f*(f*6-15)+10))}function gM(f,t){return f+Math.floor(Math.random()*(t-f+1))}function xM(f,t){return f+Math.random()*(t-f)}function bM(f){return f*(.5-Math.random())}function MM(f){f!==void 0&&(fy=f);let t=fy+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function SM(f){return f*ho}function vM(f){return f*xo}function TM(f){return(f&f-1)===0&&f!==0}function wM(f){return Math.pow(2,Math.ceil(Math.log(f)/Math.LN2))}function _M(f){return Math.pow(2,Math.floor(Math.log(f)/Math.LN2))}function EM(f,t,i,s,r){const l=Math.cos,c=Math.sin,u=l(i/2),p=c(i/2),h=l((t+s)/2),y=c((t+s)/2),g=l((t-s)/2),x=c((t-s)/2),b=l((s-t)/2),S=c((s-t)/2);switch(r){case"XYX":f.set(u*y,p*g,p*x,u*h);break;case"YZY":f.set(p*x,u*y,p*g,u*h);break;case"ZXZ":f.set(p*g,p*x,u*y,u*h);break;case"XZX":f.set(u*y,p*S,p*b,u*h);break;case"YXY":f.set(p*b,u*y,p*S,u*h);break;case"ZYZ":f.set(p*S,p*b,u*y,u*h);break;default:ce("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Pn(f,t){switch(t.constructor){case Float32Array:return f;case Uint32Array:return f/4294967295;case Uint16Array:return f/65535;case Uint8Array:return f/255;case Int32Array:return Math.max(f/2147483647,-1);case Int16Array:return Math.max(f/32767,-1);case Int8Array:return Math.max(f/127,-1);default:throw new Error("Invalid component type.")}}function se(f,t){switch(t.constructor){case Float32Array:return f;case Uint32Array:return Math.round(f*4294967295);case Uint16Array:return Math.round(f*65535);case Uint8Array:return Math.round(f*255);case Int32Array:return Math.round(f*2147483647);case Int16Array:return Math.round(f*32767);case Int8Array:return Math.round(f*127);default:throw new Error("Invalid component type.")}}const sc={DEG2RAD:ho,RAD2DEG:xo,generateUUID:$n,clamp:Ft,euclideanModulo:Of,mapLinear:hM,inverseLerp:fM,lerp:fo,damp:dM,pingpong:pM,smoothstep:mM,smootherstep:yM,randInt:gM,randFloat:xM,randFloatSpread:bM,seededRandom:MM,degToRad:SM,radToDeg:vM,isPowerOfTwo:TM,ceilPowerOfTwo:wM,floorPowerOfTwo:_M,setQuaternionFromProperEuler:EM,normalize:se,denormalize:Pn};class Be{constructor(t=0,i=0){Be.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,s=this.y,r=t.elements;return this.x=r[0]*i+r[3]*s+r[6],this.y=r[1]*i+r[4]*s+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Ft(this.x,t.x,i.x),this.y=Ft(this.y,t.y,i.y),this}clampScalar(t,i){return this.x=Ft(this.x,t,i),this.y=Ft(this.y,t,i),this}clampLength(t,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ft(s,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const s=this.dot(t)/i;return Math.acos(Ft(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,s=this.y-t.y;return i*i+s*s}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,s){return this.x=t.x+(i.x-t.x)*s,this.y=t.y+(i.y-t.y)*s,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const s=Math.cos(i),r=Math.sin(i),l=this.x-t.x,c=this.y-t.y;return this.x=l*s-c*r+t.x,this.y=l*r+c*s+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ui{constructor(t=0,i=0,s=0,r=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=s,this._w=r}static slerpFlat(t,i,s,r,l,c,u){let p=s[r+0],h=s[r+1],y=s[r+2],g=s[r+3],x=l[c+0],b=l[c+1],S=l[c+2],T=l[c+3];if(u<=0){t[i+0]=p,t[i+1]=h,t[i+2]=y,t[i+3]=g;return}if(u>=1){t[i+0]=x,t[i+1]=b,t[i+2]=S,t[i+3]=T;return}if(g!==T||p!==x||h!==b||y!==S){let w=p*x+h*b+y*S+g*T;w<0&&(x=-x,b=-b,S=-S,T=-T,w=-w);let z=1-u;if(w<.9995){const L=Math.acos(w),X=Math.sin(L);z=Math.sin(z*L)/X,u=Math.sin(u*L)/X,p=p*z+x*u,h=h*z+b*u,y=y*z+S*u,g=g*z+T*u}else{p=p*z+x*u,h=h*z+b*u,y=y*z+S*u,g=g*z+T*u;const L=1/Math.sqrt(p*p+h*h+y*y+g*g);p*=L,h*=L,y*=L,g*=L}}t[i]=p,t[i+1]=h,t[i+2]=y,t[i+3]=g}static multiplyQuaternionsFlat(t,i,s,r,l,c){const u=s[r],p=s[r+1],h=s[r+2],y=s[r+3],g=l[c],x=l[c+1],b=l[c+2],S=l[c+3];return t[i]=u*S+y*g+p*b-h*x,t[i+1]=p*S+y*x+h*g-u*b,t[i+2]=h*S+y*b+u*x-p*g,t[i+3]=y*S-u*g-p*x-h*b,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,s,r){return this._x=t,this._y=i,this._z=s,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i=!0){const s=t._x,r=t._y,l=t._z,c=t._order,u=Math.cos,p=Math.sin,h=u(s/2),y=u(r/2),g=u(l/2),x=p(s/2),b=p(r/2),S=p(l/2);switch(c){case"XYZ":this._x=x*y*g+h*b*S,this._y=h*b*g-x*y*S,this._z=h*y*S+x*b*g,this._w=h*y*g-x*b*S;break;case"YXZ":this._x=x*y*g+h*b*S,this._y=h*b*g-x*y*S,this._z=h*y*S-x*b*g,this._w=h*y*g+x*b*S;break;case"ZXY":this._x=x*y*g-h*b*S,this._y=h*b*g+x*y*S,this._z=h*y*S+x*b*g,this._w=h*y*g-x*b*S;break;case"ZYX":this._x=x*y*g-h*b*S,this._y=h*b*g+x*y*S,this._z=h*y*S-x*b*g,this._w=h*y*g+x*b*S;break;case"YZX":this._x=x*y*g+h*b*S,this._y=h*b*g+x*y*S,this._z=h*y*S-x*b*g,this._w=h*y*g-x*b*S;break;case"XZY":this._x=x*y*g-h*b*S,this._y=h*b*g-x*y*S,this._z=h*y*S+x*b*g,this._w=h*y*g+x*b*S;break;default:ce("Quaternion: .setFromEuler() encountered an unknown order: "+c)}return i===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const s=i/2,r=Math.sin(s);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(s),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,s=i[0],r=i[4],l=i[8],c=i[1],u=i[5],p=i[9],h=i[2],y=i[6],g=i[10],x=s+u+g;if(x>0){const b=.5/Math.sqrt(x+1);this._w=.25/b,this._x=(y-p)*b,this._y=(l-h)*b,this._z=(c-r)*b}else if(s>u&&s>g){const b=2*Math.sqrt(1+s-u-g);this._w=(y-p)/b,this._x=.25*b,this._y=(r+c)/b,this._z=(l+h)/b}else if(u>g){const b=2*Math.sqrt(1+u-s-g);this._w=(l-h)/b,this._x=(r+c)/b,this._y=.25*b,this._z=(p+y)/b}else{const b=2*Math.sqrt(1+g-s-u);this._w=(c-r)/b,this._x=(l+h)/b,this._y=(p+y)/b,this._z=.25*b}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let s=t.dot(i)+1;return s<1e-8?(s=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=s):(this._x=0,this._y=-t.z,this._z=t.y,this._w=s)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=s),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ft(this.dot(t),-1,1)))}rotateTowards(t,i){const s=this.angleTo(t);if(s===0)return this;const r=Math.min(1,i/s);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const s=t._x,r=t._y,l=t._z,c=t._w,u=i._x,p=i._y,h=i._z,y=i._w;return this._x=s*y+c*u+r*h-l*p,this._y=r*y+c*p+l*u-s*h,this._z=l*y+c*h+s*p-r*u,this._w=c*y-s*u-r*p-l*h,this._onChangeCallback(),this}slerp(t,i){if(i<=0)return this;if(i>=1)return this.copy(t);let s=t._x,r=t._y,l=t._z,c=t._w,u=this.dot(t);u<0&&(s=-s,r=-r,l=-l,c=-c,u=-u);let p=1-i;if(u<.9995){const h=Math.acos(u),y=Math.sin(h);p=Math.sin(p*h)/y,i=Math.sin(i*h)/y,this._x=this._x*p+s*i,this._y=this._y*p+r*i,this._z=this._z*p+l*i,this._w=this._w*p+c*i,this._onChangeCallback()}else this._x=this._x*p+s*i,this._y=this._y*p+r*i,this._z=this._z*p+l*i,this._w=this._w*p+c*i,this.normalize();return this}slerpQuaternions(t,i,s){return this.copy(t).slerp(i,s)}random(){const t=2*Math.PI*Math.random(),i=2*Math.PI*Math.random(),s=Math.random(),r=Math.sqrt(1-s),l=Math.sqrt(s);return this.set(r*Math.sin(t),r*Math.cos(t),l*Math.sin(i),l*Math.cos(i))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class q{constructor(t=0,i=0,s=0){q.prototype.isVector3=!0,this.x=t,this.y=i,this.z=s}set(t,i,s){return s===void 0&&(s=this.z),this.x=t,this.y=i,this.z=s,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return this.applyQuaternion(dy.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(dy.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,s=this.y,r=this.z,l=t.elements;return this.x=l[0]*i+l[3]*s+l[6]*r,this.y=l[1]*i+l[4]*s+l[7]*r,this.z=l[2]*i+l[5]*s+l[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,s=this.y,r=this.z,l=t.elements,c=1/(l[3]*i+l[7]*s+l[11]*r+l[15]);return this.x=(l[0]*i+l[4]*s+l[8]*r+l[12])*c,this.y=(l[1]*i+l[5]*s+l[9]*r+l[13])*c,this.z=(l[2]*i+l[6]*s+l[10]*r+l[14])*c,this}applyQuaternion(t){const i=this.x,s=this.y,r=this.z,l=t.x,c=t.y,u=t.z,p=t.w,h=2*(c*r-u*s),y=2*(u*i-l*r),g=2*(l*s-c*i);return this.x=i+p*h+c*g-u*y,this.y=s+p*y+u*h-l*g,this.z=r+p*g+l*y-c*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,s=this.y,r=this.z,l=t.elements;return this.x=l[0]*i+l[4]*s+l[8]*r,this.y=l[1]*i+l[5]*s+l[9]*r,this.z=l[2]*i+l[6]*s+l[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Ft(this.x,t.x,i.x),this.y=Ft(this.y,t.y,i.y),this.z=Ft(this.z,t.z,i.z),this}clampScalar(t,i){return this.x=Ft(this.x,t,i),this.y=Ft(this.y,t,i),this.z=Ft(this.z,t,i),this}clampLength(t,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ft(s,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,s){return this.x=t.x+(i.x-t.x)*s,this.y=t.y+(i.y-t.y)*s,this.z=t.z+(i.z-t.z)*s,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,i){const s=t.x,r=t.y,l=t.z,c=i.x,u=i.y,p=i.z;return this.x=r*p-l*u,this.y=l*c-s*p,this.z=s*u-r*c,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const s=t.dot(this)/i;return this.copy(t).multiplyScalar(s)}projectOnPlane(t){return Uh.copy(this).projectOnVector(t),this.sub(Uh)}reflect(t){return this.sub(Uh.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const s=this.dot(t)/i;return Math.acos(Ft(s,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,s=this.y-t.y,r=this.z-t.z;return i*i+s*s+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,s){const r=Math.sin(i)*t;return this.x=r*Math.sin(s),this.y=Math.cos(i)*t,this.z=r*Math.cos(s),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,s){return this.x=t*Math.sin(i),this.y=s,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),s=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=s,this.z=r,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,i=Math.random()*2-1,s=Math.sqrt(1-i*i);return this.x=s*Math.cos(t),this.y=i,this.z=s*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Uh=new q,dy=new Ui;class ji{constructor(t,i,s,r,l,c,u,p,h){ji.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,i,s,r,l,c,u,p,h)}set(t,i,s,r,l,c,u,p,h){const y=this.elements;return y[0]=t,y[1]=r,y[2]=u,y[3]=i,y[4]=l,y[5]=p,y[6]=s,y[7]=c,y[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,s=t.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],this}extractBasis(t,i,s){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),s.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const s=t.elements,r=i.elements,l=this.elements,c=s[0],u=s[3],p=s[6],h=s[1],y=s[4],g=s[7],x=s[2],b=s[5],S=s[8],T=r[0],w=r[3],z=r[6],L=r[1],X=r[4],D=r[7],I=r[2],$=r[5],Z=r[8];return l[0]=c*T+u*L+p*I,l[3]=c*w+u*X+p*$,l[6]=c*z+u*D+p*Z,l[1]=h*T+y*L+g*I,l[4]=h*w+y*X+g*$,l[7]=h*z+y*D+g*Z,l[2]=x*T+b*L+S*I,l[5]=x*w+b*X+S*$,l[8]=x*z+b*D+S*Z,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],s=t[1],r=t[2],l=t[3],c=t[4],u=t[5],p=t[6],h=t[7],y=t[8];return i*c*y-i*u*h-s*l*y+s*u*p+r*l*h-r*c*p}invert(){const t=this.elements,i=t[0],s=t[1],r=t[2],l=t[3],c=t[4],u=t[5],p=t[6],h=t[7],y=t[8],g=y*c-u*h,x=u*p-y*l,b=h*l-c*p,S=i*g+s*x+r*b;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/S;return t[0]=g*T,t[1]=(r*h-y*s)*T,t[2]=(u*s-r*c)*T,t[3]=x*T,t[4]=(y*i-r*p)*T,t[5]=(r*l-u*i)*T,t[6]=b*T,t[7]=(s*p-h*i)*T,t[8]=(c*i-s*l)*T,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,s,r,l,c,u){const p=Math.cos(l),h=Math.sin(l);return this.set(s*p,s*h,-s*(p*c+h*u)+c+t,-r*h,r*p,-r*(-h*c+p*u)+u+i,0,0,1),this}scale(t,i){return this.premultiply(jh.makeScale(t,i)),this}rotate(t){return this.premultiply(jh.makeRotation(-t)),this}translate(t,i){return this.premultiply(jh.makeTranslation(t,i)),this}makeTranslation(t,i){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,i,0,0,1),this}makeRotation(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,-s,0,s,i,0,0,0,1),this}makeScale(t,i){return this.set(t,0,0,0,i,0,0,0,1),this}equals(t){const i=this.elements,s=t.elements;for(let r=0;r<9;r++)if(i[r]!==s[r])return!1;return!0}fromArray(t,i=0){for(let s=0;s<9;s++)this.elements[s]=t[s+i];return this}toArray(t=[],i=0){const s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t}clone(){return new this.constructor().fromArray(this.elements)}}const jh=new ji,py=new ji().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),my=new ji().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function AM(){const f={enabled:!0,workingColorSpace:ti,spaces:{},convert:function(r,l,c){return this.enabled===!1||l===c||!l||!c||(this.spaces[l].transfer===Lh&&(r.r=Li(r.r),r.g=Li(r.g),r.b=Li(r.b)),this.spaces[l].primaries!==this.spaces[c].primaries&&(r.applyMatrix3(this.spaces[l].toXYZ),r.applyMatrix3(this.spaces[c].fromXYZ)),this.spaces[c].transfer===Lh&&(r.r=Qa(r.r),r.g=Qa(r.g),r.b=Qa(r.b))),r},workingToColorSpace:function(r,l){return this.convert(r,this.workingColorSpace,l)},colorSpaceToWorking:function(r,l){return this.convert(r,l,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Nf?oy:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,l=this.workingColorSpace){return r.fromArray(this.spaces[l].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,l,c){return r.copy(this.spaces[l].toXYZ).multiply(this.spaces[c].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,l){return hy("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),f.workingToColorSpace(r,l)},toWorkingColorSpace:function(r,l){return hy("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),f.colorSpaceToWorking(r,l)}},t=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],s=[.3127,.329];return f.define({[ti]:{primaries:t,whitePoint:s,transfer:oy,toXYZ:py,fromXYZ:my,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:We},outputColorSpaceConfig:{drawingBufferColorSpace:We}},[We]:{primaries:t,whitePoint:s,transfer:Lh,toXYZ:py,fromXYZ:my,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:We}}}),f}const An=AM();function Li(f){return f<.04045?f*.0773993808:Math.pow(f*.9478672986+.0521327014,2.4)}function Qa(f){return f<.0031308?f*12.92:1.055*Math.pow(f,.41666)-.055}let Ba;class yg{static getDataURL(t,i="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let s;if(t instanceof HTMLCanvasElement)s=t;else{Ba===void 0&&(Ba=Mf("canvas")),Ba.width=t.width,Ba.height=t.height;const r=Ba.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),s=Ba}return s.toDataURL(i)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){const i=Mf("canvas");i.width=t.width,i.height=t.height;const s=i.getContext("2d");s.drawImage(t,0,0,t.width,t.height);const r=s.getImageData(0,0,t.width,t.height),l=r.data;for(let c=0;c<l.length;c++)l[c]=Li(l[c]/255)*255;return s.putImageData(r,0,0),i}else if(t.data){const i=t.data.slice(0);for(let s=0;s<i.length;s++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[s]=Math.floor(Li(i[s]/255)*255):i[s]=Li(i[s]);return{data:i,width:t.width,height:t.height}}else return ce("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let zM=0;class gg{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:zM++}),this.uuid=$n(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){const i=this.data;return typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement?t.set(i.videoWidth,i.videoHeight,0):typeof VideoFrame<"u"&&i instanceof VideoFrame?t.set(i.displayHeight,i.displayWidth,0):i!==null?t.set(i.width,i.height,i.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const s={uuid:this.uuid,url:""},r=this.data;if(r!==null){let l;if(Array.isArray(r)){l=[];for(let c=0,u=r.length;c<u;c++)r[c].isDataTexture?l.push(kh(r[c].image)):l.push(kh(r[c]))}else l=kh(r);s.url=l}return i||(t.images[this.uuid]=s),s}}function kh(f){return typeof HTMLImageElement<"u"&&f instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&f instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&f instanceof ImageBitmap?yg.getDataURL(f):f.data?{data:Array.from(f.data),width:f.width,height:f.height,type:f.data.constructor.name}:(ce("Texture: Unable to serialize Texture."),{})}let CM=0;const Fh=new q;class Gn extends cc{constructor(t=Gn.DEFAULT_IMAGE,i=Gn.DEFAULT_MAPPING,s=Za,r=Za,l=go,c=lc,u=Rf,p=pg,h=Gn.DEFAULT_ANISOTROPY,y=Nf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CM++}),this.uuid=$n(),this.name="",this.source=new gg(t),this.mipmaps=[],this.mapping=i,this.channel=0,this.wrapS=s,this.wrapT=r,this.magFilter=l,this.minFilter=c,this.anisotropy=h,this.format=u,this.internalFormat=null,this.type=p,this.offset=new Be(0,0),this.repeat=new Be(1,1),this.center=new Be(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ji,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=y,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Fh).x}get height(){return this.source.getSize(Fh).y}get depth(){return this.source.getSize(Fh).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const i in t){const s=t[i];if(s===void 0){ce(`Texture.setValues(): parameter '${i}' has value of undefined.`);continue}const r=this[i];if(r===void 0){ce(`Texture.setValues(): property '${i}' does not exist.`);continue}r&&s&&r.isVector2&&s.isVector2||r&&s&&r.isVector3&&s.isVector3||r&&s&&r.isMatrix3&&s.isMatrix3?r.copy(s):this[i]=s}}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const s={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(s.userData=this.userData),i||(t.textures[this.uuid]=s),s}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==ug)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Wa:t.x=t.x-Math.floor(t.x);break;case Za:t.x=t.x<0?0:1;break;case ic:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case Wa:t.y=t.y-Math.floor(t.y);break;case Za:t.y=t.y<0?0:1;break;case ic:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}Gn.DEFAULT_IMAGE=null;Gn.DEFAULT_MAPPING=ug;Gn.DEFAULT_ANISOTROPY=1;class ki{constructor(t=0,i=0,s=0,r=1){ki.prototype.isVector4=!0,this.x=t,this.y=i,this.z=s,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,s,r){return this.x=t,this.y=i,this.z=s,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,s=this.y,r=this.z,l=this.w,c=t.elements;return this.x=c[0]*i+c[4]*s+c[8]*r+c[12]*l,this.y=c[1]*i+c[5]*s+c[9]*r+c[13]*l,this.z=c[2]*i+c[6]*s+c[10]*r+c[14]*l,this.w=c[3]*i+c[7]*s+c[11]*r+c[15]*l,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,s,r,l;const p=t.elements,h=p[0],y=p[4],g=p[8],x=p[1],b=p[5],S=p[9],T=p[2],w=p[6],z=p[10];if(Math.abs(y-x)<.01&&Math.abs(g-T)<.01&&Math.abs(S-w)<.01){if(Math.abs(y+x)<.1&&Math.abs(g+T)<.1&&Math.abs(S+w)<.1&&Math.abs(h+b+z-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const X=(h+1)/2,D=(b+1)/2,I=(z+1)/2,$=(y+x)/4,Z=(g+T)/4,et=(S+w)/4;return X>D&&X>I?X<.01?(s=0,r=.707106781,l=.707106781):(s=Math.sqrt(X),r=$/s,l=Z/s):D>I?D<.01?(s=.707106781,r=0,l=.707106781):(r=Math.sqrt(D),s=$/r,l=et/r):I<.01?(s=.707106781,r=.707106781,l=0):(l=Math.sqrt(I),s=Z/l,r=et/l),this.set(s,r,l,i),this}let L=Math.sqrt((w-S)*(w-S)+(g-T)*(g-T)+(x-y)*(x-y));return Math.abs(L)<.001&&(L=1),this.x=(w-S)/L,this.y=(g-T)/L,this.z=(x-y)/L,this.w=Math.acos((h+b+z-1)/2),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this.w=i[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Ft(this.x,t.x,i.x),this.y=Ft(this.y,t.y,i.y),this.z=Ft(this.z,t.z,i.z),this.w=Ft(this.w,t.w,i.w),this}clampScalar(t,i){return this.x=Ft(this.x,t,i),this.y=Ft(this.y,t,i),this.z=Ft(this.z,t,i),this.w=Ft(this.w,t,i),this}clampLength(t,i){const s=this.length();return this.divideScalar(s||1).multiplyScalar(Ft(s,t,i))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,s){return this.x=t.x+(i.x-t.x)*s,this.y=t.y+(i.y-t.y)*s,this.z=t.z+(i.z-t.z)*s,this.w=t.w+(i.w-t.w)*s,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i){return this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Fi{constructor(t=new q(1/0,1/0,1/0),i=new q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){this.makeEmpty();for(let i=0,s=t.length;i<s;i+=3)this.expandByPoint(Kn.fromArray(t,i));return this}setFromBufferAttribute(t){this.makeEmpty();for(let i=0,s=t.count;i<s;i++)this.expandByPoint(Kn.fromBufferAttribute(t,i));return this}setFromPoints(t){this.makeEmpty();for(let i=0,s=t.length;i<s;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const s=Kn.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(s),this.max.copy(t).add(s),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const s=t.geometry;if(s!==void 0){const l=s.getAttribute("position");if(i===!0&&l!==void 0&&t.isInstancedMesh!==!0)for(let c=0,u=l.count;c<u;c++)t.isMesh===!0?t.getVertexPosition(c,Kn):Kn.fromBufferAttribute(l,c),Kn.applyMatrix4(t.matrixWorld),this.expandByPoint(Kn);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),Ol.copy(t.boundingBox)):(s.boundingBox===null&&s.computeBoundingBox(),Ol.copy(s.boundingBox)),Ol.applyMatrix4(t.matrixWorld),this.union(Ol)}const r=t.children;for(let l=0,c=r.length;l<c;l++)this.expandByObject(r[l],i);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Kn),Kn.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,s;return t.normal.x>0?(i=t.normal.x*this.min.x,s=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,s=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,s+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,s+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,s+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,s+=t.normal.z*this.min.z),i<=-t.constant&&s>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(no),Dl.subVectors(this.max,no),La.subVectors(t.a,no),Ua.subVectors(t.b,no),ja.subVectors(t.c,no),hs.subVectors(Ua,La),fs.subVectors(ja,Ua),Fs.subVectors(La,ja);let i=[0,-hs.z,hs.y,0,-fs.z,fs.y,0,-Fs.z,Fs.y,hs.z,0,-hs.x,fs.z,0,-fs.x,Fs.z,0,-Fs.x,-hs.y,hs.x,0,-fs.y,fs.x,0,-Fs.y,Fs.x,0];return!Hh(i,La,Ua,ja,Dl)||(i=[1,0,0,0,1,0,0,0,1],!Hh(i,La,Ua,ja,Dl))?!1:(Bl.crossVectors(hs,fs),i=[Bl.x,Bl.y,Bl.z],Hh(i,La,Ua,ja,Dl))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Kn).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Kn).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(zi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),zi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),zi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),zi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),zi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),zi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),zi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),zi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(zi),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}}const zi=[new q,new q,new q,new q,new q,new q,new q,new q],Kn=new q,Ol=new Fi,La=new q,Ua=new q,ja=new q,hs=new q,fs=new q,Fs=new q,no=new q,Dl=new q,Bl=new q,Hs=new q;function Hh(f,t,i,s,r){for(let l=0,c=f.length-3;l<=c;l+=3){Hs.fromArray(f,l);const u=r.x*Math.abs(Hs.x)+r.y*Math.abs(Hs.y)+r.z*Math.abs(Hs.z),p=t.dot(Hs),h=i.dot(Hs),y=s.dot(Hs);if(Math.max(-Math.max(p,h,y),Math.min(p,h,y))>u)return!1}return!0}const RM=new Fi,io=new q,Vh=new q;class li{constructor(t=new q,i=-1){this.isSphere=!0,this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const s=this.center;i!==void 0?s.copy(i):RM.setFromPoints(t).getCenter(s);let r=0;for(let l=0,c=t.length;l<c;l++)r=Math.max(r,s.distanceToSquared(t[l]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const s=this.center.distanceToSquared(t);return i.copy(t),s>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;io.subVectors(t,this.center);const i=io.lengthSq();if(i>this.radius*this.radius){const s=Math.sqrt(i),r=(s-this.radius)*.5;this.center.addScaledVector(io,r/s),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(Vh.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(io.copy(t.center).add(Vh)),this.expandByPoint(io.copy(t.center).sub(Vh))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}}const Ci=new q,Ih=new q,Ll=new q,ds=new q,Gh=new q,Ul=new q,Yh=new q;class uc{constructor(t=new q,i=new q(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ci)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const s=i.dot(this.direction);return s<0?i.copy(this.origin):i.copy(this.origin).addScaledVector(this.direction,s)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Ci.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Ci.copy(this.origin).addScaledVector(this.direction,i),Ci.distanceToSquared(t))}distanceSqToSegment(t,i,s,r){Ih.copy(t).add(i).multiplyScalar(.5),Ll.copy(i).sub(t).normalize(),ds.copy(this.origin).sub(Ih);const l=t.distanceTo(i)*.5,c=-this.direction.dot(Ll),u=ds.dot(this.direction),p=-ds.dot(Ll),h=ds.lengthSq(),y=Math.abs(1-c*c);let g,x,b,S;if(y>0)if(g=c*p-u,x=c*u-p,S=l*y,g>=0)if(x>=-S)if(x<=S){const T=1/y;g*=T,x*=T,b=g*(g+c*x+2*u)+x*(c*g+x+2*p)+h}else x=l,g=Math.max(0,-(c*x+u)),b=-g*g+x*(x+2*p)+h;else x=-l,g=Math.max(0,-(c*x+u)),b=-g*g+x*(x+2*p)+h;else x<=-S?(g=Math.max(0,-(-c*l+u)),x=g>0?-l:Math.min(Math.max(-l,-p),l),b=-g*g+x*(x+2*p)+h):x<=S?(g=0,x=Math.min(Math.max(-l,-p),l),b=x*(x+2*p)+h):(g=Math.max(0,-(c*l+u)),x=g>0?l:Math.min(Math.max(-l,-p),l),b=-g*g+x*(x+2*p)+h);else x=c>0?-l:l,g=Math.max(0,-(c*x+u)),b=-g*g+x*(x+2*p)+h;return s&&s.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(Ih).addScaledVector(Ll,x),b}intersectSphere(t,i){Ci.subVectors(t.center,this.origin);const s=Ci.dot(this.direction),r=Ci.dot(Ci)-s*s,l=t.radius*t.radius;if(r>l)return null;const c=Math.sqrt(l-r),u=s-c,p=s+c;return p<0?null:u<0?this.at(p,i):this.at(u,i)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const s=-(this.origin.dot(t.normal)+t.constant)/i;return s>=0?s:null}intersectPlane(t,i){const s=this.distanceToPlane(t);return s===null?null:this.at(s,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let s,r,l,c,u,p;const h=1/this.direction.x,y=1/this.direction.y,g=1/this.direction.z,x=this.origin;return h>=0?(s=(t.min.x-x.x)*h,r=(t.max.x-x.x)*h):(s=(t.max.x-x.x)*h,r=(t.min.x-x.x)*h),y>=0?(l=(t.min.y-x.y)*y,c=(t.max.y-x.y)*y):(l=(t.max.y-x.y)*y,c=(t.min.y-x.y)*y),s>c||l>r||((l>s||isNaN(s))&&(s=l),(c<r||isNaN(r))&&(r=c),g>=0?(u=(t.min.z-x.z)*g,p=(t.max.z-x.z)*g):(u=(t.max.z-x.z)*g,p=(t.min.z-x.z)*g),s>p||u>r)||((u>s||s!==s)&&(s=u),(p<r||r!==r)&&(r=p),r<0)?null:this.at(s>=0?s:r,i)}intersectsBox(t){return this.intersectBox(t,Ci)!==null}intersectTriangle(t,i,s,r,l){Gh.subVectors(i,t),Ul.subVectors(s,t),Yh.crossVectors(Gh,Ul);let c=this.direction.dot(Yh),u;if(c>0){if(r)return null;u=1}else if(c<0)u=-1,c=-c;else return null;ds.subVectors(this.origin,t);const p=u*this.direction.dot(Ul.crossVectors(ds,Ul));if(p<0)return null;const h=u*this.direction.dot(Gh.cross(ds));if(h<0||p+h>c)return null;const y=-u*ds.dot(Yh);return y<0?null:this.at(y/c,l)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Xt{constructor(t,i,s,r,l,c,u,p,h,y,g,x,b,S,T,w){Xt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,i,s,r,l,c,u,p,h,y,g,x,b,S,T,w)}set(t,i,s,r,l,c,u,p,h,y,g,x,b,S,T,w){const z=this.elements;return z[0]=t,z[4]=i,z[8]=s,z[12]=r,z[1]=l,z[5]=c,z[9]=u,z[13]=p,z[2]=h,z[6]=y,z[10]=g,z[14]=x,z[3]=b,z[7]=S,z[11]=T,z[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Xt().fromArray(this.elements)}copy(t){const i=this.elements,s=t.elements;return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],this}copyPosition(t){const i=this.elements,s=t.elements;return i[12]=s[12],i[13]=s[13],i[14]=s[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,s){return this.determinant()===0?(t.set(1,0,0),i.set(0,1,0),s.set(0,0,1),this):(t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),s.setFromMatrixColumn(this,2),this)}makeBasis(t,i,s){return this.set(t.x,i.x,s.x,0,t.y,i.y,s.y,0,t.z,i.z,s.z,0,0,0,0,1),this}extractRotation(t){if(t.determinant()===0)return this.identity();const i=this.elements,s=t.elements,r=1/ka.setFromMatrixColumn(t,0).length(),l=1/ka.setFromMatrixColumn(t,1).length(),c=1/ka.setFromMatrixColumn(t,2).length();return i[0]=s[0]*r,i[1]=s[1]*r,i[2]=s[2]*r,i[3]=0,i[4]=s[4]*l,i[5]=s[5]*l,i[6]=s[6]*l,i[7]=0,i[8]=s[8]*c,i[9]=s[9]*c,i[10]=s[10]*c,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){const i=this.elements,s=t.x,r=t.y,l=t.z,c=Math.cos(s),u=Math.sin(s),p=Math.cos(r),h=Math.sin(r),y=Math.cos(l),g=Math.sin(l);if(t.order==="XYZ"){const x=c*y,b=c*g,S=u*y,T=u*g;i[0]=p*y,i[4]=-p*g,i[8]=h,i[1]=b+S*h,i[5]=x-T*h,i[9]=-u*p,i[2]=T-x*h,i[6]=S+b*h,i[10]=c*p}else if(t.order==="YXZ"){const x=p*y,b=p*g,S=h*y,T=h*g;i[0]=x+T*u,i[4]=S*u-b,i[8]=c*h,i[1]=c*g,i[5]=c*y,i[9]=-u,i[2]=b*u-S,i[6]=T+x*u,i[10]=c*p}else if(t.order==="ZXY"){const x=p*y,b=p*g,S=h*y,T=h*g;i[0]=x-T*u,i[4]=-c*g,i[8]=S+b*u,i[1]=b+S*u,i[5]=c*y,i[9]=T-x*u,i[2]=-c*h,i[6]=u,i[10]=c*p}else if(t.order==="ZYX"){const x=c*y,b=c*g,S=u*y,T=u*g;i[0]=p*y,i[4]=S*h-b,i[8]=x*h+T,i[1]=p*g,i[5]=T*h+x,i[9]=b*h-S,i[2]=-h,i[6]=u*p,i[10]=c*p}else if(t.order==="YZX"){const x=c*p,b=c*h,S=u*p,T=u*h;i[0]=p*y,i[4]=T-x*g,i[8]=S*g+b,i[1]=g,i[5]=c*y,i[9]=-u*y,i[2]=-h*y,i[6]=b*g+S,i[10]=x-T*g}else if(t.order==="XZY"){const x=c*p,b=c*h,S=u*p,T=u*h;i[0]=p*y,i[4]=-g,i[8]=h*y,i[1]=x*g+T,i[5]=c*y,i[9]=b*g-S,i[2]=S*g-b,i[6]=u*y,i[10]=T*g+x}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(NM,t,OM)}lookAt(t,i,s){const r=this.elements;return _n.subVectors(t,i),_n.lengthSq()===0&&(_n.z=1),_n.normalize(),ps.crossVectors(s,_n),ps.lengthSq()===0&&(Math.abs(s.z)===1?_n.x+=1e-4:_n.z+=1e-4,_n.normalize(),ps.crossVectors(s,_n)),ps.normalize(),jl.crossVectors(_n,ps),r[0]=ps.x,r[4]=jl.x,r[8]=_n.x,r[1]=ps.y,r[5]=jl.y,r[9]=_n.y,r[2]=ps.z,r[6]=jl.z,r[10]=_n.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const s=t.elements,r=i.elements,l=this.elements,c=s[0],u=s[4],p=s[8],h=s[12],y=s[1],g=s[5],x=s[9],b=s[13],S=s[2],T=s[6],w=s[10],z=s[14],L=s[3],X=s[7],D=s[11],I=s[15],$=r[0],Z=r[4],et=r[8],Et=r[12],Mt=r[1],vt=r[5],dt=r[9],Vt=r[13],ee=r[2],Ot=r[6],H=r[10],tt=r[14],ut=r[3],Bt=r[7],Ct=r[11],C=r[15];return l[0]=c*$+u*Mt+p*ee+h*ut,l[4]=c*Z+u*vt+p*Ot+h*Bt,l[8]=c*et+u*dt+p*H+h*Ct,l[12]=c*Et+u*Vt+p*tt+h*C,l[1]=y*$+g*Mt+x*ee+b*ut,l[5]=y*Z+g*vt+x*Ot+b*Bt,l[9]=y*et+g*dt+x*H+b*Ct,l[13]=y*Et+g*Vt+x*tt+b*C,l[2]=S*$+T*Mt+w*ee+z*ut,l[6]=S*Z+T*vt+w*Ot+z*Bt,l[10]=S*et+T*dt+w*H+z*Ct,l[14]=S*Et+T*Vt+w*tt+z*C,l[3]=L*$+X*Mt+D*ee+I*ut,l[7]=L*Z+X*vt+D*Ot+I*Bt,l[11]=L*et+X*dt+D*H+I*Ct,l[15]=L*Et+X*Vt+D*tt+I*C,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],s=t[4],r=t[8],l=t[12],c=t[1],u=t[5],p=t[9],h=t[13],y=t[2],g=t[6],x=t[10],b=t[14],S=t[3],T=t[7],w=t[11],z=t[15],L=p*b-h*x,X=u*b-h*g,D=u*x-p*g,I=c*b-h*y,$=c*x-p*y,Z=c*g-u*y;return i*(T*L-w*X+z*D)-s*(S*L-w*I+z*$)+r*(S*X-T*I+z*Z)-l*(S*D-T*$+w*Z)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,s){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=i,r[14]=s),this}invert(){const t=this.elements,i=t[0],s=t[1],r=t[2],l=t[3],c=t[4],u=t[5],p=t[6],h=t[7],y=t[8],g=t[9],x=t[10],b=t[11],S=t[12],T=t[13],w=t[14],z=t[15],L=g*w*h-T*x*h+T*p*b-u*w*b-g*p*z+u*x*z,X=S*x*h-y*w*h-S*p*b+c*w*b+y*p*z-c*x*z,D=y*T*h-S*g*h+S*u*b-c*T*b-y*u*z+c*g*z,I=S*g*p-y*T*p-S*u*x+c*T*x+y*u*w-c*g*w,$=i*L+s*X+r*D+l*I;if($===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const Z=1/$;return t[0]=L*Z,t[1]=(T*x*l-g*w*l-T*r*b+s*w*b+g*r*z-s*x*z)*Z,t[2]=(u*w*l-T*p*l+T*r*h-s*w*h-u*r*z+s*p*z)*Z,t[3]=(g*p*l-u*x*l-g*r*h+s*x*h+u*r*b-s*p*b)*Z,t[4]=X*Z,t[5]=(y*w*l-S*x*l+S*r*b-i*w*b-y*r*z+i*x*z)*Z,t[6]=(S*p*l-c*w*l-S*r*h+i*w*h+c*r*z-i*p*z)*Z,t[7]=(c*x*l-y*p*l+y*r*h-i*x*h-c*r*b+i*p*b)*Z,t[8]=D*Z,t[9]=(S*g*l-y*T*l-S*s*b+i*T*b+y*s*z-i*g*z)*Z,t[10]=(c*T*l-S*u*l+S*s*h-i*T*h-c*s*z+i*u*z)*Z,t[11]=(y*u*l-c*g*l-y*s*h+i*g*h+c*s*b-i*u*b)*Z,t[12]=I*Z,t[13]=(y*T*r-S*g*r+S*s*x-i*T*x-y*s*w+i*g*w)*Z,t[14]=(S*u*r-c*T*r-S*s*p+i*T*p+c*s*w-i*u*w)*Z,t[15]=(c*g*r-y*u*r+y*s*p-i*g*p-c*s*x+i*u*x)*Z,this}scale(t){const i=this.elements,s=t.x,r=t.y,l=t.z;return i[0]*=s,i[4]*=r,i[8]*=l,i[1]*=s,i[5]*=r,i[9]*=l,i[2]*=s,i[6]*=r,i[10]*=l,i[3]*=s,i[7]*=r,i[11]*=l,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],s=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,s,r))}makeTranslation(t,i,s){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,i,0,0,1,s,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,i,-s,0,0,s,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,0,s,0,0,1,0,0,-s,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),s=Math.sin(t);return this.set(i,-s,0,0,s,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const s=Math.cos(i),r=Math.sin(i),l=1-s,c=t.x,u=t.y,p=t.z,h=l*c,y=l*u;return this.set(h*c+s,h*u-r*p,h*p+r*u,0,h*u+r*p,y*u+s,y*p-r*c,0,h*p-r*u,y*p+r*c,l*p*p+s,0,0,0,0,1),this}makeScale(t,i,s){return this.set(t,0,0,0,0,i,0,0,0,0,s,0,0,0,0,1),this}makeShear(t,i,s,r,l,c){return this.set(1,s,l,0,t,1,c,0,i,r,1,0,0,0,0,1),this}compose(t,i,s){const r=this.elements,l=i._x,c=i._y,u=i._z,p=i._w,h=l+l,y=c+c,g=u+u,x=l*h,b=l*y,S=l*g,T=c*y,w=c*g,z=u*g,L=p*h,X=p*y,D=p*g,I=s.x,$=s.y,Z=s.z;return r[0]=(1-(T+z))*I,r[1]=(b+D)*I,r[2]=(S-X)*I,r[3]=0,r[4]=(b-D)*$,r[5]=(1-(x+z))*$,r[6]=(w+L)*$,r[7]=0,r[8]=(S+X)*Z,r[9]=(w-L)*Z,r[10]=(1-(x+T))*Z,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,i,s){const r=this.elements;if(t.x=r[12],t.y=r[13],t.z=r[14],this.determinant()===0)return s.set(1,1,1),i.identity(),this;let l=ka.set(r[0],r[1],r[2]).length();const c=ka.set(r[4],r[5],r[6]).length(),u=ka.set(r[8],r[9],r[10]).length();this.determinant()<0&&(l=-l),Qn.copy(this);const h=1/l,y=1/c,g=1/u;return Qn.elements[0]*=h,Qn.elements[1]*=h,Qn.elements[2]*=h,Qn.elements[4]*=y,Qn.elements[5]*=y,Qn.elements[6]*=y,Qn.elements[8]*=g,Qn.elements[9]*=g,Qn.elements[10]*=g,i.setFromRotationMatrix(Qn),s.x=l,s.y=c,s.z=u,this}makePerspective(t,i,s,r,l,c,u=Ys,p=!1){const h=this.elements,y=2*l/(i-t),g=2*l/(s-r),x=(i+t)/(i-t),b=(s+r)/(s-r);let S,T;if(p)S=l/(c-l),T=c*l/(c-l);else if(u===Ys)S=-(c+l)/(c-l),T=-2*c*l/(c-l);else if(u===bf)S=-c/(c-l),T=-c*l/(c-l);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+u);return h[0]=y,h[4]=0,h[8]=x,h[12]=0,h[1]=0,h[5]=g,h[9]=b,h[13]=0,h[2]=0,h[6]=0,h[10]=S,h[14]=T,h[3]=0,h[7]=0,h[11]=-1,h[15]=0,this}makeOrthographic(t,i,s,r,l,c,u=Ys,p=!1){const h=this.elements,y=2/(i-t),g=2/(s-r),x=-(i+t)/(i-t),b=-(s+r)/(s-r);let S,T;if(p)S=1/(c-l),T=c/(c-l);else if(u===Ys)S=-2/(c-l),T=-(c+l)/(c-l);else if(u===bf)S=-1/(c-l),T=-l/(c-l);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+u);return h[0]=y,h[4]=0,h[8]=0,h[12]=x,h[1]=0,h[5]=g,h[9]=0,h[13]=b,h[2]=0,h[6]=0,h[10]=S,h[14]=T,h[3]=0,h[7]=0,h[11]=0,h[15]=1,this}equals(t){const i=this.elements,s=t.elements;for(let r=0;r<16;r++)if(i[r]!==s[r])return!1;return!0}fromArray(t,i=0){for(let s=0;s<16;s++)this.elements[s]=t[s+i];return this}toArray(t=[],i=0){const s=this.elements;return t[i]=s[0],t[i+1]=s[1],t[i+2]=s[2],t[i+3]=s[3],t[i+4]=s[4],t[i+5]=s[5],t[i+6]=s[6],t[i+7]=s[7],t[i+8]=s[8],t[i+9]=s[9],t[i+10]=s[10],t[i+11]=s[11],t[i+12]=s[12],t[i+13]=s[13],t[i+14]=s[14],t[i+15]=s[15],t}}const ka=new q,Qn=new Xt,NM=new q(0,0,0),OM=new q(1,1,1),ps=new q,jl=new q,_n=new q,yy=new Xt,gy=new Ui;class xs{constructor(t=0,i=0,s=0,r=xs.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=i,this._z=s,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,s,r=this._order){return this._x=t,this._y=i,this._z=s,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,s=!0){const r=t.elements,l=r[0],c=r[4],u=r[8],p=r[1],h=r[5],y=r[9],g=r[2],x=r[6],b=r[10];switch(i){case"XYZ":this._y=Math.asin(Ft(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-y,b),this._z=Math.atan2(-c,l)):(this._x=Math.atan2(x,h),this._z=0);break;case"YXZ":this._x=Math.asin(-Ft(y,-1,1)),Math.abs(y)<.9999999?(this._y=Math.atan2(u,b),this._z=Math.atan2(p,h)):(this._y=Math.atan2(-g,l),this._z=0);break;case"ZXY":this._x=Math.asin(Ft(x,-1,1)),Math.abs(x)<.9999999?(this._y=Math.atan2(-g,b),this._z=Math.atan2(-c,h)):(this._y=0,this._z=Math.atan2(p,l));break;case"ZYX":this._y=Math.asin(-Ft(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(x,b),this._z=Math.atan2(p,l)):(this._x=0,this._z=Math.atan2(-c,h));break;case"YZX":this._z=Math.asin(Ft(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(-y,h),this._y=Math.atan2(-g,l)):(this._x=0,this._y=Math.atan2(u,b));break;case"XZY":this._z=Math.asin(-Ft(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(x,h),this._y=Math.atan2(u,l)):(this._x=Math.atan2(-y,b),this._y=0);break;default:ce("Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,s===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,s){return yy.makeRotationFromQuaternion(t),this.setFromRotationMatrix(yy,i,s)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return gy.setFromEuler(this),this.setFromQuaternion(gy,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}xs.DEFAULT_ORDER="XYZ";class DM{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let BM=0;const xy=new q,Fa=new Ui,Ri=new Xt,kl=new q,so=new q,LM=new q,UM=new Ui,by=new q(1,0,0),My=new q(0,1,0),Sy=new q(0,0,1),vy={type:"added"},jM={type:"removed"},Ha={type:"childadded",child:null},Xh={type:"childremoved",child:null};class Te extends cc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:BM++}),this.uuid=$n(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Te.DEFAULT_UP.clone();const t=new q,i=new xs,s=new Ui,r=new q(1,1,1);function l(){s.setFromEuler(i,!1)}function c(){i.setFromQuaternion(s,void 0,!1)}i._onChange(l),s._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:s},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Xt},normalMatrix:{value:new ji}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=Te.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Te.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new DM,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return Fa.setFromAxisAngle(t,i),this.quaternion.multiply(Fa),this}rotateOnWorldAxis(t,i){return Fa.setFromAxisAngle(t,i),this.quaternion.premultiply(Fa),this}rotateX(t){return this.rotateOnAxis(by,t)}rotateY(t){return this.rotateOnAxis(My,t)}rotateZ(t){return this.rotateOnAxis(Sy,t)}translateOnAxis(t,i){return xy.copy(t).applyQuaternion(this.quaternion),this.position.add(xy.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(by,t)}translateY(t){return this.translateOnAxis(My,t)}translateZ(t){return this.translateOnAxis(Sy,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(Ri.copy(this.matrixWorld).invert())}lookAt(t,i,s){t.isVector3?kl.copy(t):kl.set(t,i,s);const r=this.parent;this.updateWorldMatrix(!0,!1),so.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Ri.lookAt(so,kl,this.up):Ri.lookAt(kl,so,this.up),this.quaternion.setFromRotationMatrix(Ri),r&&(Ri.extractRotation(r.matrixWorld),Fa.setFromRotationMatrix(Ri),this.quaternion.premultiply(Fa.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(xe("Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(vy),Ha.child=t,this.dispatchEvent(Ha),Ha.child=null):xe("Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let s=0;s<arguments.length;s++)this.remove(arguments[s]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(jM),Xh.child=t,this.dispatchEvent(Xh),Xh.child=null),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),Ri.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Ri.multiply(t.parent.matrixWorld)),t.applyMatrix4(Ri),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(vy),Ha.child=t,this.dispatchEvent(Ha),Ha.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let s=0,r=this.children.length;s<r;s++){const c=this.children[s].getObjectByProperty(t,i);if(c!==void 0)return c}}getObjectsByProperty(t,i,s=[]){this[t]===i&&s.push(this);const r=this.children;for(let l=0,c=r.length;l<c;l++)r[l].getObjectsByProperty(t,i,s);return s}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(so,t,LM),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(so,UM,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let s=0,r=i.length;s<r;s++)i[s].updateMatrixWorld(t)}updateWorldMatrix(t,i){const s=this.parent;if(t===!0&&s!==null&&s.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),i===!0){const r=this.children;for(let l=0,c=r.length;l<c;l++)r[l].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",s={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},s.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(u=>({...u,boundingBox:u.boundingBox?u.boundingBox.toJSON():void 0,boundingSphere:u.boundingSphere?u.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(u=>({...u})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(t),r.indirectTexture=this._indirectTexture.toJSON(t),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(t)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function l(u,p){return u[p.uuid]===void 0&&(u[p.uuid]=p.toJSON(t)),p.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=l(t.geometries,this.geometry);const u=this.geometry.parameters;if(u!==void 0&&u.shapes!==void 0){const p=u.shapes;if(Array.isArray(p))for(let h=0,y=p.length;h<y;h++){const g=p[h];l(t.shapes,g)}else l(t.shapes,p)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(l(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const u=[];for(let p=0,h=this.material.length;p<h;p++)u.push(l(t.materials,this.material[p]));r.material=u}else r.material=l(t.materials,this.material);if(this.children.length>0){r.children=[];for(let u=0;u<this.children.length;u++)r.children.push(this.children[u].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let u=0;u<this.animations.length;u++){const p=this.animations[u];r.animations.push(l(t.animations,p))}}if(i){const u=c(t.geometries),p=c(t.materials),h=c(t.textures),y=c(t.images),g=c(t.shapes),x=c(t.skeletons),b=c(t.animations),S=c(t.nodes);u.length>0&&(s.geometries=u),p.length>0&&(s.materials=p),h.length>0&&(s.textures=h),y.length>0&&(s.images=y),g.length>0&&(s.shapes=g),x.length>0&&(s.skeletons=x),b.length>0&&(s.animations=b),S.length>0&&(s.nodes=S)}return s.object=r,s;function c(u){const p=[];for(const h in u){const y=u[h];delete y.metadata,p.push(y)}return p}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let s=0;s<t.children.length;s++){const r=t.children[s];this.add(r.clone())}return this}}Te.DEFAULT_UP=new q(0,1,0);Te.DEFAULT_MATRIX_AUTO_UPDATE=!0;Te.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Jn=new q,Ni=new q,qh=new q,Oi=new q,Va=new q,Ia=new q,Ty=new q,Zh=new q,Kh=new q,Qh=new q,Jh=new ki,Ph=new ki,Wh=new ki;class Wn{constructor(t=new q,i=new q,s=new q){this.a=t,this.b=i,this.c=s}static getNormal(t,i,s,r){r.subVectors(s,i),Jn.subVectors(t,i),r.cross(Jn);const l=r.lengthSq();return l>0?r.multiplyScalar(1/Math.sqrt(l)):r.set(0,0,0)}static getBarycoord(t,i,s,r,l){Jn.subVectors(r,i),Ni.subVectors(s,i),qh.subVectors(t,i);const c=Jn.dot(Jn),u=Jn.dot(Ni),p=Jn.dot(qh),h=Ni.dot(Ni),y=Ni.dot(qh),g=c*h-u*u;if(g===0)return l.set(0,0,0),null;const x=1/g,b=(h*p-u*y)*x,S=(c*y-u*p)*x;return l.set(1-b-S,S,b)}static containsPoint(t,i,s,r){return this.getBarycoord(t,i,s,r,Oi)===null?!1:Oi.x>=0&&Oi.y>=0&&Oi.x+Oi.y<=1}static getInterpolation(t,i,s,r,l,c,u,p){return this.getBarycoord(t,i,s,r,Oi)===null?(p.x=0,p.y=0,"z"in p&&(p.z=0),"w"in p&&(p.w=0),null):(p.setScalar(0),p.addScaledVector(l,Oi.x),p.addScaledVector(c,Oi.y),p.addScaledVector(u,Oi.z),p)}static getInterpolatedAttribute(t,i,s,r,l,c){return Jh.setScalar(0),Ph.setScalar(0),Wh.setScalar(0),Jh.fromBufferAttribute(t,i),Ph.fromBufferAttribute(t,s),Wh.fromBufferAttribute(t,r),c.setScalar(0),c.addScaledVector(Jh,l.x),c.addScaledVector(Ph,l.y),c.addScaledVector(Wh,l.z),c}static isFrontFacing(t,i,s,r){return Jn.subVectors(s,i),Ni.subVectors(t,i),Jn.cross(Ni).dot(r)<0}set(t,i,s){return this.a.copy(t),this.b.copy(i),this.c.copy(s),this}setFromPointsAndIndices(t,i,s,r){return this.a.copy(t[i]),this.b.copy(t[s]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,i,s,r){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,s),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Jn.subVectors(this.c,this.b),Ni.subVectors(this.a,this.b),Jn.cross(Ni).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Wn.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Wn.getBarycoord(t,this.a,this.b,this.c,i)}getInterpolation(t,i,s,r,l){return Wn.getInterpolation(t,this.a,this.b,this.c,i,s,r,l)}containsPoint(t){return Wn.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Wn.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const s=this.a,r=this.b,l=this.c;let c,u;Va.subVectors(r,s),Ia.subVectors(l,s),Zh.subVectors(t,s);const p=Va.dot(Zh),h=Ia.dot(Zh);if(p<=0&&h<=0)return i.copy(s);Kh.subVectors(t,r);const y=Va.dot(Kh),g=Ia.dot(Kh);if(y>=0&&g<=y)return i.copy(r);const x=p*g-y*h;if(x<=0&&p>=0&&y<=0)return c=p/(p-y),i.copy(s).addScaledVector(Va,c);Qh.subVectors(t,l);const b=Va.dot(Qh),S=Ia.dot(Qh);if(S>=0&&b<=S)return i.copy(l);const T=b*h-p*S;if(T<=0&&h>=0&&S<=0)return u=h/(h-S),i.copy(s).addScaledVector(Ia,u);const w=y*S-b*g;if(w<=0&&g-y>=0&&b-S>=0)return Ty.subVectors(l,r),u=(g-y)/(g-y+(b-S)),i.copy(r).addScaledVector(Ty,u);const z=1/(w+T+x);return c=T*z,u=x*z,i.copy(s).addScaledVector(Va,c).addScaledVector(Ia,u)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const xg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ms={h:0,s:0,l:0},Fl={h:0,s:0,l:0};function $h(f,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?f+(t-f)*6*i:i<1/2?t:i<2/3?f+(t-f)*6*(2/3-i):f}class Le{constructor(t,i,s){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,i,s)}set(t,i,s){if(i===void 0&&s===void 0){const r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,i,s);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=We){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,An.colorSpaceToWorking(this,i),this}setRGB(t,i,s,r=An.workingColorSpace){return this.r=t,this.g=i,this.b=s,An.colorSpaceToWorking(this,r),this}setHSL(t,i,s,r=An.workingColorSpace){if(t=Of(t,1),i=Ft(i,0,1),s=Ft(s,0,1),i===0)this.r=this.g=this.b=s;else{const l=s<=.5?s*(1+i):s+i-s*i,c=2*s-l;this.r=$h(c,l,t+1/3),this.g=$h(c,l,t),this.b=$h(c,l,t-1/3)}return An.colorSpaceToWorking(this,r),this}setStyle(t,i=We){function s(l){l!==void 0&&parseFloat(l)<1&&ce("Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let l;const c=r[1],u=r[2];switch(c){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return s(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,i);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return s(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,i);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(u))return s(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,i);break;default:ce("Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){const l=r[1],c=l.length;if(c===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,i);if(c===6)return this.setHex(parseInt(l,16),i);ce("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,i);return this}setColorName(t,i=We){const s=xg[t.toLowerCase()];return s!==void 0?this.setHex(s,i):ce("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Li(t.r),this.g=Li(t.g),this.b=Li(t.b),this}copyLinearToSRGB(t){return this.r=Qa(t.r),this.g=Qa(t.g),this.b=Qa(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=We){return An.workingToColorSpace(sn.copy(this),t),Math.round(Ft(sn.r*255,0,255))*65536+Math.round(Ft(sn.g*255,0,255))*256+Math.round(Ft(sn.b*255,0,255))}getHexString(t=We){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=An.workingColorSpace){An.workingToColorSpace(sn.copy(this),i);const s=sn.r,r=sn.g,l=sn.b,c=Math.max(s,r,l),u=Math.min(s,r,l);let p,h;const y=(u+c)/2;if(u===c)p=0,h=0;else{const g=c-u;switch(h=y<=.5?g/(c+u):g/(2-c-u),c){case s:p=(r-l)/g+(r<l?6:0);break;case r:p=(l-s)/g+2;break;case l:p=(s-r)/g+4;break}p/=6}return t.h=p,t.s=h,t.l=y,t}getRGB(t,i=An.workingColorSpace){return An.workingToColorSpace(sn.copy(this),i),t.r=sn.r,t.g=sn.g,t.b=sn.b,t}getStyle(t=We){An.workingToColorSpace(sn.copy(this),t);const i=sn.r,s=sn.g,r=sn.b;return t!==We?`color(${t} ${i.toFixed(3)} ${s.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(i*255)},${Math.round(s*255)},${Math.round(r*255)})`}offsetHSL(t,i,s){return this.getHSL(ms),this.setHSL(ms.h+t,ms.s+i,ms.l+s)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,s){return this.r=t.r+(i.r-t.r)*s,this.g=t.g+(i.g-t.g)*s,this.b=t.b+(i.b-t.b)*s,this}lerpHSL(t,i){this.getHSL(ms),t.getHSL(Fl);const s=fo(ms.h,Fl.h,i),r=fo(ms.s,Fl.s,i),l=fo(ms.l,Fl.l,i);return this.setHSL(s,r,l),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const i=this.r,s=this.g,r=this.b,l=t.elements;return this.r=l[0]*i+l[3]*s+l[6]*r,this.g=l[1]*i+l[4]*s+l[7]*r,this.b=l[2]*i+l[5]*s+l[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const sn=new Le;Le.NAMES=xg;let kM=0;class Xs extends cc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:kM++}),this.uuid=$n(),this.name="",this.type="Material",this.blending=W0,this.side=nc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ty,this.blendDst=ey,this.blendEquation=$0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Le(0,0,0),this.blendAlpha=0,this.depthFunc=ny,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ly,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Da,this.stencilZFail=Da,this.stencilZPass=Da,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const s=t[i];if(s===void 0){ce(`Material: parameter '${i}' has value of undefined.`);continue}const r=this[i];if(r===void 0){ce(`Material: '${i}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(s):r&&r.isVector3&&s&&s.isVector3?r.copy(s):this[i]=s}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const s={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.color&&this.color.isColor&&(s.color=this.color.getHex()),this.roughness!==void 0&&(s.roughness=this.roughness),this.metalness!==void 0&&(s.metalness=this.metalness),this.sheen!==void 0&&(s.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(s.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(s.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(s.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(s.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(s.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(s.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(s.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(s.shininess=this.shininess),this.clearcoat!==void 0&&(s.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(s.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(s.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(s.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,s.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(s.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(s.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(s.dispersion=this.dispersion),this.iridescence!==void 0&&(s.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(s.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(s.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(s.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(s.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(s.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(s.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(s.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(s.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(s.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(s.lightMap=this.lightMap.toJSON(t).uuid,s.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(s.aoMap=this.aoMap.toJSON(t).uuid,s.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(s.bumpMap=this.bumpMap.toJSON(t).uuid,s.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(s.normalMap=this.normalMap.toJSON(t).uuid,s.normalMapType=this.normalMapType,s.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(s.displacementMap=this.displacementMap.toJSON(t).uuid,s.displacementScale=this.displacementScale,s.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(s.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(s.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(s.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(s.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(s.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(s.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(s.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(s.combine=this.combine)),this.envMapRotation!==void 0&&(s.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(s.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(s.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(s.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(s.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(s.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(s.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(s.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(s.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(s.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(s.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(s.size=this.size),this.shadowSide!==null&&(s.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(s.sizeAttenuation=this.sizeAttenuation),this.blending!==W0&&(s.blending=this.blending),this.side!==nc&&(s.side=this.side),this.vertexColors===!0&&(s.vertexColors=!0),this.opacity<1&&(s.opacity=this.opacity),this.transparent===!0&&(s.transparent=!0),this.blendSrc!==ty&&(s.blendSrc=this.blendSrc),this.blendDst!==ey&&(s.blendDst=this.blendDst),this.blendEquation!==$0&&(s.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(s.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(s.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(s.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(s.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(s.blendAlpha=this.blendAlpha),this.depthFunc!==ny&&(s.depthFunc=this.depthFunc),this.depthTest===!1&&(s.depthTest=this.depthTest),this.depthWrite===!1&&(s.depthWrite=this.depthWrite),this.colorWrite===!1&&(s.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(s.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ly&&(s.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(s.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(s.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Da&&(s.stencilFail=this.stencilFail),this.stencilZFail!==Da&&(s.stencilZFail=this.stencilZFail),this.stencilZPass!==Da&&(s.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(s.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(s.rotation=this.rotation),this.polygonOffset===!0&&(s.polygonOffset=!0),this.polygonOffsetFactor!==0&&(s.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(s.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(s.linewidth=this.linewidth),this.dashSize!==void 0&&(s.dashSize=this.dashSize),this.gapSize!==void 0&&(s.gapSize=this.gapSize),this.scale!==void 0&&(s.scale=this.scale),this.dithering===!0&&(s.dithering=!0),this.alphaTest>0&&(s.alphaTest=this.alphaTest),this.alphaHash===!0&&(s.alphaHash=!0),this.alphaToCoverage===!0&&(s.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(s.premultipliedAlpha=!0),this.forceSinglePass===!0&&(s.forceSinglePass=!0),this.allowOverride===!1&&(s.allowOverride=!1),this.wireframe===!0&&(s.wireframe=!0),this.wireframeLinewidth>1&&(s.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(s.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(s.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(s.flatShading=!0),this.visible===!1&&(s.visible=!1),this.toneMapped===!1&&(s.toneMapped=!1),this.fog===!1&&(s.fog=!1),Object.keys(this.userData).length>0&&(s.userData=this.userData);function r(l){const c=[];for(const u in l){const p=l[u];delete p.metadata,c.push(p)}return c}if(i){const l=r(t.textures),c=r(t.images);l.length>0&&(s.textures=l),c.length>0&&(s.images=c)}return s}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let s=null;if(i!==null){const r=i.length;s=new Array(r);for(let l=0;l!==r;++l)s[l]=i[l].clone()}return this.clippingPlanes=s,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Ka extends Xs{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Le(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xs,this.combine=iM,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const De=new q,Hl=new Be;let FM=0;class ke{constructor(t,i,s=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:FM++}),this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=s,this.usage=xf,this.updateRanges=[],this.gpuType=Cf,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,i,s){t*=this.itemSize,s*=i.itemSize;for(let r=0,l=this.itemSize;r<l;r++)this.array[t+r]=i.array[s+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,s=this.count;i<s;i++)Hl.fromBufferAttribute(this,i),Hl.applyMatrix3(t),this.setXY(i,Hl.x,Hl.y);else if(this.itemSize===3)for(let i=0,s=this.count;i<s;i++)De.fromBufferAttribute(this,i),De.applyMatrix3(t),this.setXYZ(i,De.x,De.y,De.z);return this}applyMatrix4(t){for(let i=0,s=this.count;i<s;i++)De.fromBufferAttribute(this,i),De.applyMatrix4(t),this.setXYZ(i,De.x,De.y,De.z);return this}applyNormalMatrix(t){for(let i=0,s=this.count;i<s;i++)De.fromBufferAttribute(this,i),De.applyNormalMatrix(t),this.setXYZ(i,De.x,De.y,De.z);return this}transformDirection(t){for(let i=0,s=this.count;i<s;i++)De.fromBufferAttribute(this,i),De.transformDirection(t),this.setXYZ(i,De.x,De.y,De.z);return this}set(t,i=0){return this.array.set(t,i),this}getComponent(t,i){let s=this.array[t*this.itemSize+i];return this.normalized&&(s=Pn(s,this.array)),s}setComponent(t,i,s){return this.normalized&&(s=se(s,this.array)),this.array[t*this.itemSize+i]=s,this}getX(t){let i=this.array[t*this.itemSize];return this.normalized&&(i=Pn(i,this.array)),i}setX(t,i){return this.normalized&&(i=se(i,this.array)),this.array[t*this.itemSize]=i,this}getY(t){let i=this.array[t*this.itemSize+1];return this.normalized&&(i=Pn(i,this.array)),i}setY(t,i){return this.normalized&&(i=se(i,this.array)),this.array[t*this.itemSize+1]=i,this}getZ(t){let i=this.array[t*this.itemSize+2];return this.normalized&&(i=Pn(i,this.array)),i}setZ(t,i){return this.normalized&&(i=se(i,this.array)),this.array[t*this.itemSize+2]=i,this}getW(t){let i=this.array[t*this.itemSize+3];return this.normalized&&(i=Pn(i,this.array)),i}setW(t,i){return this.normalized&&(i=se(i,this.array)),this.array[t*this.itemSize+3]=i,this}setXY(t,i,s){return t*=this.itemSize,this.normalized&&(i=se(i,this.array),s=se(s,this.array)),this.array[t+0]=i,this.array[t+1]=s,this}setXYZ(t,i,s,r){return t*=this.itemSize,this.normalized&&(i=se(i,this.array),s=se(s,this.array),r=se(r,this.array)),this.array[t+0]=i,this.array[t+1]=s,this.array[t+2]=r,this}setXYZW(t,i,s,r,l){return t*=this.itemSize,this.normalized&&(i=se(i,this.array),s=se(s,this.array),r=se(r,this.array),l=se(l,this.array)),this.array[t+0]=i,this.array[t+1]=s,this.array[t+2]=r,this.array[t+3]=l,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==xf&&(t.usage=this.usage),t}}class HM extends ke{constructor(t,i,s){super(new Uint16Array(t),i,s)}}class VM extends ke{constructor(t,i,s){super(new Uint32Array(t),i,s)}}class hc extends ke{constructor(t,i,s){super(new Float32Array(t),i,s)}}let IM=0;const Hn=new Xt,tf=new Te,Ga=new q,En=new Fi,ao=new Fi,Ge=new q;class Zs extends cc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:IM++}),this.uuid=$n(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(cM(t)?VM:HM)(t,1):this.index=t,this}setIndirect(t,i=0){return this.indirect=t,this.indirectOffset=i,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,s=0){this.groups.push({start:t,count:i,materialIndex:s})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const s=this.attributes.normal;if(s!==void 0){const l=new ji().getNormalMatrix(t);s.applyNormalMatrix(l),s.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Hn.makeRotationFromQuaternion(t),this.applyMatrix4(Hn),this}rotateX(t){return Hn.makeRotationX(t),this.applyMatrix4(Hn),this}rotateY(t){return Hn.makeRotationY(t),this.applyMatrix4(Hn),this}rotateZ(t){return Hn.makeRotationZ(t),this.applyMatrix4(Hn),this}translate(t,i,s){return Hn.makeTranslation(t,i,s),this.applyMatrix4(Hn),this}scale(t,i,s){return Hn.makeScale(t,i,s),this.applyMatrix4(Hn),this}lookAt(t){return tf.lookAt(t),tf.updateMatrix(),this.applyMatrix4(tf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ga).negate(),this.translate(Ga.x,Ga.y,Ga.z),this}setFromPoints(t){const i=this.getAttribute("position");if(i===void 0){const s=[];for(let r=0,l=t.length;r<l;r++){const c=t[r];s.push(c.x,c.y,c.z||0)}this.setAttribute("position",new hc(s,3))}else{const s=Math.min(t.length,i.count);for(let r=0;r<s;r++){const l=t[r];i.setXYZ(r,l.x,l.y,l.z||0)}t.length>i.count&&ce("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),i.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Fi);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){xe("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new q(-1/0,-1/0,-1/0),new q(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let s=0,r=i.length;s<r;s++){const l=i[s];En.setFromBufferAttribute(l),this.morphTargetsRelative?(Ge.addVectors(this.boundingBox.min,En.min),this.boundingBox.expandByPoint(Ge),Ge.addVectors(this.boundingBox.max,En.max),this.boundingBox.expandByPoint(Ge)):(this.boundingBox.expandByPoint(En.min),this.boundingBox.expandByPoint(En.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&xe('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new li);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){xe("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new q,1/0);return}if(t){const s=this.boundingSphere.center;if(En.setFromBufferAttribute(t),i)for(let l=0,c=i.length;l<c;l++){const u=i[l];ao.setFromBufferAttribute(u),this.morphTargetsRelative?(Ge.addVectors(En.min,ao.min),En.expandByPoint(Ge),Ge.addVectors(En.max,ao.max),En.expandByPoint(Ge)):(En.expandByPoint(ao.min),En.expandByPoint(ao.max))}En.getCenter(s);let r=0;for(let l=0,c=t.count;l<c;l++)Ge.fromBufferAttribute(t,l),r=Math.max(r,s.distanceToSquared(Ge));if(i)for(let l=0,c=i.length;l<c;l++){const u=i[l],p=this.morphTargetsRelative;for(let h=0,y=u.count;h<y;h++)Ge.fromBufferAttribute(u,h),p&&(Ga.fromBufferAttribute(t,h),Ge.add(Ga)),r=Math.max(r,s.distanceToSquared(Ge))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&xe('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){xe("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const s=i.position,r=i.normal,l=i.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ke(new Float32Array(4*s.count),4));const c=this.getAttribute("tangent"),u=[],p=[];for(let et=0;et<s.count;et++)u[et]=new q,p[et]=new q;const h=new q,y=new q,g=new q,x=new Be,b=new Be,S=new Be,T=new q,w=new q;function z(et,Et,Mt){h.fromBufferAttribute(s,et),y.fromBufferAttribute(s,Et),g.fromBufferAttribute(s,Mt),x.fromBufferAttribute(l,et),b.fromBufferAttribute(l,Et),S.fromBufferAttribute(l,Mt),y.sub(h),g.sub(h),b.sub(x),S.sub(x);const vt=1/(b.x*S.y-S.x*b.y);isFinite(vt)&&(T.copy(y).multiplyScalar(S.y).addScaledVector(g,-b.y).multiplyScalar(vt),w.copy(g).multiplyScalar(b.x).addScaledVector(y,-S.x).multiplyScalar(vt),u[et].add(T),u[Et].add(T),u[Mt].add(T),p[et].add(w),p[Et].add(w),p[Mt].add(w))}let L=this.groups;L.length===0&&(L=[{start:0,count:t.count}]);for(let et=0,Et=L.length;et<Et;++et){const Mt=L[et],vt=Mt.start,dt=Mt.count;for(let Vt=vt,ee=vt+dt;Vt<ee;Vt+=3)z(t.getX(Vt+0),t.getX(Vt+1),t.getX(Vt+2))}const X=new q,D=new q,I=new q,$=new q;function Z(et){I.fromBufferAttribute(r,et),$.copy(I);const Et=u[et];X.copy(Et),X.sub(I.multiplyScalar(I.dot(Et))).normalize(),D.crossVectors($,Et);const vt=D.dot(p[et])<0?-1:1;c.setXYZW(et,X.x,X.y,X.z,vt)}for(let et=0,Et=L.length;et<Et;++et){const Mt=L[et],vt=Mt.start,dt=Mt.count;for(let Vt=vt,ee=vt+dt;Vt<ee;Vt+=3)Z(t.getX(Vt+0)),Z(t.getX(Vt+1)),Z(t.getX(Vt+2))}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let s=this.getAttribute("normal");if(s===void 0)s=new ke(new Float32Array(i.count*3),3),this.setAttribute("normal",s);else for(let x=0,b=s.count;x<b;x++)s.setXYZ(x,0,0,0);const r=new q,l=new q,c=new q,u=new q,p=new q,h=new q,y=new q,g=new q;if(t)for(let x=0,b=t.count;x<b;x+=3){const S=t.getX(x+0),T=t.getX(x+1),w=t.getX(x+2);r.fromBufferAttribute(i,S),l.fromBufferAttribute(i,T),c.fromBufferAttribute(i,w),y.subVectors(c,l),g.subVectors(r,l),y.cross(g),u.fromBufferAttribute(s,S),p.fromBufferAttribute(s,T),h.fromBufferAttribute(s,w),u.add(y),p.add(y),h.add(y),s.setXYZ(S,u.x,u.y,u.z),s.setXYZ(T,p.x,p.y,p.z),s.setXYZ(w,h.x,h.y,h.z)}else for(let x=0,b=i.count;x<b;x+=3)r.fromBufferAttribute(i,x+0),l.fromBufferAttribute(i,x+1),c.fromBufferAttribute(i,x+2),y.subVectors(c,l),g.subVectors(r,l),y.cross(g),s.setXYZ(x+0,y.x,y.y,y.z),s.setXYZ(x+1,y.x,y.y,y.z),s.setXYZ(x+2,y.x,y.y,y.z);this.normalizeNormals(),s.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let i=0,s=t.count;i<s;i++)Ge.fromBufferAttribute(t,i),Ge.normalize(),t.setXYZ(i,Ge.x,Ge.y,Ge.z)}toNonIndexed(){function t(u,p){const h=u.array,y=u.itemSize,g=u.normalized,x=new h.constructor(p.length*y);let b=0,S=0;for(let T=0,w=p.length;T<w;T++){u.isInterleavedBufferAttribute?b=p[T]*u.data.stride+u.offset:b=p[T]*y;for(let z=0;z<y;z++)x[S++]=h[b++]}return new ke(x,y,g)}if(this.index===null)return ce("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new Zs,s=this.index.array,r=this.attributes;for(const u in r){const p=r[u],h=t(p,s);i.setAttribute(u,h)}const l=this.morphAttributes;for(const u in l){const p=[],h=l[u];for(let y=0,g=h.length;y<g;y++){const x=h[y],b=t(x,s);p.push(b)}i.morphAttributes[u]=p}i.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let u=0,p=c.length;u<p;u++){const h=c[u];i.addGroup(h.start,h.count,h.materialIndex)}return i}toJSON(){const t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const p=this.parameters;for(const h in p)p[h]!==void 0&&(t[h]=p[h]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const s=this.attributes;for(const p in s){const h=s[p];t.data.attributes[p]=h.toJSON(t.data)}const r={};let l=!1;for(const p in this.morphAttributes){const h=this.morphAttributes[p],y=[];for(let g=0,x=h.length;g<x;g++){const b=h[g];y.push(b.toJSON(t.data))}y.length>0&&(r[p]=y,l=!0)}l&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(t.data.groups=JSON.parse(JSON.stringify(c)));const u=this.boundingSphere;return u!==null&&(t.data.boundingSphere=u.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const s=t.index;s!==null&&this.setIndex(s.clone());const r=t.attributes;for(const h in r){const y=r[h];this.setAttribute(h,y.clone(i))}const l=t.morphAttributes;for(const h in l){const y=[],g=l[h];for(let x=0,b=g.length;x<b;x++)y.push(g[x].clone(i));this.morphAttributes[h]=y}this.morphTargetsRelative=t.morphTargetsRelative;const c=t.groups;for(let h=0,y=c.length;h<y;h++){const g=c[h];this.addGroup(g.start,g.count,g.materialIndex)}const u=t.boundingBox;u!==null&&(this.boundingBox=u.clone());const p=t.boundingSphere;return p!==null&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wy=new Xt,Vs=new uc,Vl=new li,_y=new q,Il=new q,Gl=new q,Yl=new q,ef=new q,Xl=new q,Ey=new q,ql=new q;class sr extends Te{constructor(t=new Zs,i=new Ka){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,s=Object.keys(i);if(s.length>0){const r=i[s[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=r.length;l<c;l++){const u=r[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=l}}}}getVertexPosition(t,i){const s=this.geometry,r=s.attributes.position,l=s.morphAttributes.position,c=s.morphTargetsRelative;i.fromBufferAttribute(r,t);const u=this.morphTargetInfluences;if(l&&u){Xl.set(0,0,0);for(let p=0,h=l.length;p<h;p++){const y=u[p],g=l[p];y!==0&&(ef.fromBufferAttribute(g,t),c?Xl.addScaledVector(ef,y):Xl.addScaledVector(ef.sub(i),y))}i.add(Xl)}return i}raycast(t,i){const s=this.geometry,r=this.material,l=this.matrixWorld;r!==void 0&&(s.boundingSphere===null&&s.computeBoundingSphere(),Vl.copy(s.boundingSphere),Vl.applyMatrix4(l),Vs.copy(t.ray).recast(t.near),!(Vl.containsPoint(Vs.origin)===!1&&(Vs.intersectSphere(Vl,_y)===null||Vs.origin.distanceToSquared(_y)>(t.far-t.near)**2))&&(wy.copy(l).invert(),Vs.copy(t.ray).applyMatrix4(wy),!(s.boundingBox!==null&&Vs.intersectsBox(s.boundingBox)===!1)&&this._computeIntersections(t,i,Vs)))}_computeIntersections(t,i,s){let r;const l=this.geometry,c=this.material,u=l.index,p=l.attributes.position,h=l.attributes.uv,y=l.attributes.uv1,g=l.attributes.normal,x=l.groups,b=l.drawRange;if(u!==null)if(Array.isArray(c))for(let S=0,T=x.length;S<T;S++){const w=x[S],z=c[w.materialIndex],L=Math.max(w.start,b.start),X=Math.min(u.count,Math.min(w.start+w.count,b.start+b.count));for(let D=L,I=X;D<I;D+=3){const $=u.getX(D),Z=u.getX(D+1),et=u.getX(D+2);r=Zl(this,z,t,s,h,y,g,$,Z,et),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=w.materialIndex,i.push(r))}}else{const S=Math.max(0,b.start),T=Math.min(u.count,b.start+b.count);for(let w=S,z=T;w<z;w+=3){const L=u.getX(w),X=u.getX(w+1),D=u.getX(w+2);r=Zl(this,c,t,s,h,y,g,L,X,D),r&&(r.faceIndex=Math.floor(w/3),i.push(r))}}else if(p!==void 0)if(Array.isArray(c))for(let S=0,T=x.length;S<T;S++){const w=x[S],z=c[w.materialIndex],L=Math.max(w.start,b.start),X=Math.min(p.count,Math.min(w.start+w.count,b.start+b.count));for(let D=L,I=X;D<I;D+=3){const $=D,Z=D+1,et=D+2;r=Zl(this,z,t,s,h,y,g,$,Z,et),r&&(r.faceIndex=Math.floor(D/3),r.face.materialIndex=w.materialIndex,i.push(r))}}else{const S=Math.max(0,b.start),T=Math.min(p.count,b.start+b.count);for(let w=S,z=T;w<z;w+=3){const L=w,X=w+1,D=w+2;r=Zl(this,c,t,s,h,y,g,L,X,D),r&&(r.faceIndex=Math.floor(w/3),i.push(r))}}}}function GM(f,t,i,s,r,l,c,u){let p;if(t.side===nM?p=s.intersectTriangle(c,l,r,!0,u):p=s.intersectTriangle(r,l,c,t.side===nc,u),p===null)return null;ql.copy(u),ql.applyMatrix4(f.matrixWorld);const h=i.ray.origin.distanceTo(ql);return h<i.near||h>i.far?null:{distance:h,point:ql.clone(),object:f}}function Zl(f,t,i,s,r,l,c,u,p,h){f.getVertexPosition(u,Il),f.getVertexPosition(p,Gl),f.getVertexPosition(h,Yl);const y=GM(f,t,i,s,Il,Gl,Yl,Ey);if(y){const g=new q;Wn.getBarycoord(Ey,Il,Gl,Yl,g),r&&(y.uv=Wn.getInterpolatedAttribute(r,u,p,h,g,new Be)),l&&(y.uv1=Wn.getInterpolatedAttribute(l,u,p,h,g,new Be)),c&&(y.normal=Wn.getInterpolatedAttribute(c,u,p,h,g,new q),y.normal.dot(s.direction)>0&&y.normal.multiplyScalar(-1));const x={a:u,b:p,c:h,normal:new q,materialIndex:0};Wn.getNormal(Il,Gl,Yl,x.normal),y.face=x,y.barycoord=g}return y}class bg extends Te{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt,this.projectionMatrixInverse=new Xt,this.coordinateSystem=Ys,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ys=new q,Ay=new Be,zy=new Be;class Df extends bg{constructor(t=50,i=1,s=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=s,this.far=r,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=xo*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(ho*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return xo*2*Math.atan(Math.tan(ho*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,i,s){ys.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ys.x,ys.y).multiplyScalar(-t/ys.z),ys.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),s.set(ys.x,ys.y).multiplyScalar(-t/ys.z)}getViewSize(t,i){return this.getViewBounds(t,Ay,zy),i.subVectors(zy,Ay)}setViewOffset(t,i,s,r,l,c){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=r,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(ho*.5*this.fov)/this.zoom,s=2*i,r=this.aspect*s,l=-.5*r;const c=this.view;if(this.view!==null&&this.view.enabled){const p=c.fullWidth,h=c.fullHeight;l+=c.offsetX*r/p,i-=c.offsetY*s/h,r*=c.width/p,s*=c.height/h}const u=this.filmOffset;u!==0&&(l+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(l,l+r,i,i-s,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}class nf extends Te{constructor(){super(),this.isGroup=!0,this.type="Group"}}class Sf extends Te{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new xs,this.environmentIntensity=1,this.environmentRotation=new xs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(i.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(i.object.backgroundIntensity=this.backgroundIntensity),i.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(i.object.environmentIntensity=this.environmentIntensity),i.object.environmentRotation=this.environmentRotation.toArray(),i}}class YM{constructor(t,i){this.isInterleavedBuffer=!0,this.array=t,this.stride=i,this.count=t!==void 0?t.length/i:0,this.usage=xf,this.updateRanges=[],this.version=0,this.uuid=$n()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,i){this.updateRanges.push({start:t,count:i})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,i,s){t*=this.stride,s*=i.stride;for(let r=0,l=this.stride;r<l;r++)this.array[t+r]=i.array[s+r];return this}set(t,i=0){return this.array.set(t,i),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$n()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),s=new this.constructor(i,this.stride);return s.setUsage(this.usage),s}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=$n()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const on=new q;class Bf{constructor(t,i,s,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=i,this.offset=s,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,s=this.data.count;i<s;i++)on.fromBufferAttribute(this,i),on.applyMatrix4(t),this.setXYZ(i,on.x,on.y,on.z);return this}applyNormalMatrix(t){for(let i=0,s=this.count;i<s;i++)on.fromBufferAttribute(this,i),on.applyNormalMatrix(t),this.setXYZ(i,on.x,on.y,on.z);return this}transformDirection(t){for(let i=0,s=this.count;i<s;i++)on.fromBufferAttribute(this,i),on.transformDirection(t),this.setXYZ(i,on.x,on.y,on.z);return this}getComponent(t,i){let s=this.array[t*this.data.stride+this.offset+i];return this.normalized&&(s=Pn(s,this.array)),s}setComponent(t,i,s){return this.normalized&&(s=se(s,this.array)),this.data.array[t*this.data.stride+this.offset+i]=s,this}setX(t,i){return this.normalized&&(i=se(i,this.array)),this.data.array[t*this.data.stride+this.offset]=i,this}setY(t,i){return this.normalized&&(i=se(i,this.array)),this.data.array[t*this.data.stride+this.offset+1]=i,this}setZ(t,i){return this.normalized&&(i=se(i,this.array)),this.data.array[t*this.data.stride+this.offset+2]=i,this}setW(t,i){return this.normalized&&(i=se(i,this.array)),this.data.array[t*this.data.stride+this.offset+3]=i,this}getX(t){let i=this.data.array[t*this.data.stride+this.offset];return this.normalized&&(i=Pn(i,this.array)),i}getY(t){let i=this.data.array[t*this.data.stride+this.offset+1];return this.normalized&&(i=Pn(i,this.array)),i}getZ(t){let i=this.data.array[t*this.data.stride+this.offset+2];return this.normalized&&(i=Pn(i,this.array)),i}getW(t){let i=this.data.array[t*this.data.stride+this.offset+3];return this.normalized&&(i=Pn(i,this.array)),i}setXY(t,i,s){return t=t*this.data.stride+this.offset,this.normalized&&(i=se(i,this.array),s=se(s,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=s,this}setXYZ(t,i,s,r){return t=t*this.data.stride+this.offset,this.normalized&&(i=se(i,this.array),s=se(s,this.array),r=se(r,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=s,this.data.array[t+2]=r,this}setXYZW(t,i,s,r,l){return t=t*this.data.stride+this.offset,this.normalized&&(i=se(i,this.array),s=se(s,this.array),r=se(r,this.array),l=se(l,this.array)),this.data.array[t+0]=i,this.data.array[t+1]=s,this.data.array[t+2]=r,this.data.array[t+3]=l,this}clone(t){if(t===void 0){uy("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let s=0;s<this.count;s++){const r=s*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[r+l])}return new ke(new this.array.constructor(i),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Bf(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){uy("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const i=[];for(let s=0;s<this.count;s++){const r=s*this.data.stride+this.offset;for(let l=0;l<this.itemSize;l++)i.push(this.data.array[r+l])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const Cy=new q,Ry=new ki,Ny=new ki,XM=new q,Oy=new Xt,Kl=new q,sf=new li,Dy=new Xt,af=new uc;class qM extends sr{constructor(t,i){super(t,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=iy,this.bindMatrix=new Xt,this.bindMatrixInverse=new Xt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const t=this.geometry;this.boundingBox===null&&(this.boundingBox=new Fi),this.boundingBox.makeEmpty();const i=t.getAttribute("position");for(let s=0;s<i.count;s++)this.getVertexPosition(s,Kl),this.boundingBox.expandByPoint(Kl)}computeBoundingSphere(){const t=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new li),this.boundingSphere.makeEmpty();const i=t.getAttribute("position");for(let s=0;s<i.count;s++)this.getVertexPosition(s,Kl),this.boundingSphere.expandByPoint(Kl)}copy(t,i){return super.copy(t,i),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}raycast(t,i){const s=this.material,r=this.matrixWorld;s!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),sf.copy(this.boundingSphere),sf.applyMatrix4(r),t.ray.intersectsSphere(sf)!==!1&&(Dy.copy(r).invert(),af.copy(t.ray).applyMatrix4(Dy),!(this.boundingBox!==null&&af.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(t,i,af)))}getVertexPosition(t,i){return super.getVertexPosition(t,i),this.applyBoneTransform(t,i),i}bind(t,i){this.skeleton=t,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new ki,i=this.geometry.attributes.skinWeight;for(let s=0,r=i.count;s<r;s++){t.fromBufferAttribute(i,s);const l=1/t.manhattanLength();l!==1/0?t.multiplyScalar(l):t.set(1,0,0,0),i.setXYZW(s,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode===iy?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===sM?this.bindMatrixInverse.copy(this.bindMatrix).invert():ce("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(t,i){const s=this.skeleton,r=this.geometry;Ry.fromBufferAttribute(r.attributes.skinIndex,t),Ny.fromBufferAttribute(r.attributes.skinWeight,t),Cy.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let l=0;l<4;l++){const c=Ny.getComponent(l);if(c!==0){const u=Ry.getComponent(l);Oy.multiplyMatrices(s.bones[u].matrixWorld,s.boneInverses[u]),i.addScaledVector(XM.copy(Cy).applyMatrix4(Oy),c)}}return i.applyMatrix4(this.bindMatrixInverse)}}class Mg extends Te{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Sg extends Gn{constructor(t=null,i=1,s=1,r,l,c,u,p,h=yo,y=yo,g,x){super(null,c,u,p,h,y,r,l,g,x),this.isDataTexture=!0,this.image={data:t,width:i,height:s},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const By=new Xt,ZM=new Xt;class Lf{constructor(t=[],i=[]){this.uuid=$n(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.previousBoneMatrices=null,this.boneTexture=null,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),i.length===0)this.calculateInverses();else if(t.length!==i.length){ce("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let s=0,r=this.bones.length;s<r;s++)this.boneInverses.push(new Xt)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const s=new Xt;this.bones[t]&&s.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(s)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];s&&s.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];s&&(s.parent&&s.parent.isBone?(s.matrix.copy(s.parent.matrixWorld).invert(),s.matrix.multiply(s.matrixWorld)):s.matrix.copy(s.matrixWorld),s.matrix.decompose(s.position,s.quaternion,s.scale))}}update(){const t=this.bones,i=this.boneInverses,s=this.boneMatrices,r=this.boneTexture;for(let l=0,c=t.length;l<c;l++){const u=t[l]?t[l].matrixWorld:ZM;By.multiplyMatrices(u,i[l]),By.toArray(s,l*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Lf(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=Math.ceil(t/4)*4,t=Math.max(t,4);const i=new Float32Array(t*t*4);i.set(this.boneMatrices);const s=new Sg(i,t,t,Rf,Cf);return s.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=s,this}getBoneByName(t){for(let i=0,s=this.bones.length;i<s;i++){const r=this.bones[i];if(r.name===t)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let s=0,r=t.bones.length;s<r;s++){const l=t.bones[s];let c=i[l];c===void 0&&(ce("Skeleton: No bone found with UUID:",l),c=new Mg),this.bones.push(c),this.boneInverses.push(new Xt().fromArray(t.boneInverses[s]))}return this.init(),this}toJSON(){const t={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,s=this.boneInverses;for(let r=0,l=i.length;r<l;r++){const c=i[r];t.bones.push(c.uuid);const u=s[r];t.boneInverses.push(u.toArray())}return t}}class vf extends ke{constructor(t,i,s,r=1){super(t,i,s),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(t){return super.copy(t),this.meshPerAttribute=t.meshPerAttribute,this}toJSON(){const t=super.toJSON();return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}const Ya=new Xt,Ly=new Xt,Ql=[],Uy=new Fi,KM=new Xt,ro=new sr,oo=new li;class QM extends sr{constructor(t,i,s){super(t,i),this.isInstancedMesh=!0,this.instanceMatrix=new vf(new Float32Array(s*16),16),this.instanceColor=null,this.morphTexture=null,this.count=s,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<s;r++)this.setMatrixAt(r,KM)}computeBoundingBox(){const t=this.geometry,i=this.count;this.boundingBox===null&&(this.boundingBox=new Fi),t.boundingBox===null&&t.computeBoundingBox(),this.boundingBox.makeEmpty();for(let s=0;s<i;s++)this.getMatrixAt(s,Ya),Uy.copy(t.boundingBox).applyMatrix4(Ya),this.boundingBox.union(Uy)}computeBoundingSphere(){const t=this.geometry,i=this.count;this.boundingSphere===null&&(this.boundingSphere=new li),t.boundingSphere===null&&t.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let s=0;s<i;s++)this.getMatrixAt(s,Ya),oo.copy(t.boundingSphere).applyMatrix4(Ya),this.boundingSphere.union(oo)}copy(t,i){return super.copy(t,i),this.instanceMatrix.copy(t.instanceMatrix),t.morphTexture!==null&&(this.morphTexture=t.morphTexture.clone()),t.instanceColor!==null&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,t.boundingBox!==null&&(this.boundingBox=t.boundingBox.clone()),t.boundingSphere!==null&&(this.boundingSphere=t.boundingSphere.clone()),this}getColorAt(t,i){i.fromArray(this.instanceColor.array,t*3)}getMatrixAt(t,i){i.fromArray(this.instanceMatrix.array,t*16)}getMorphAt(t,i){const s=i.morphTargetInfluences,r=this.morphTexture.source.data.data,l=s.length+1,c=t*l+1;for(let u=0;u<s.length;u++)s[u]=r[c+u]}raycast(t,i){const s=this.matrixWorld,r=this.count;if(ro.geometry=this.geometry,ro.material=this.material,ro.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),oo.copy(this.boundingSphere),oo.applyMatrix4(s),t.ray.intersectsSphere(oo)!==!1))for(let l=0;l<r;l++){this.getMatrixAt(l,Ya),Ly.multiplyMatrices(s,Ya),ro.matrixWorld=Ly,ro.raycast(t,Ql);for(let c=0,u=Ql.length;c<u;c++){const p=Ql[c];p.instanceId=l,p.object=this,i.push(p)}Ql.length=0}}setColorAt(t,i){this.instanceColor===null&&(this.instanceColor=new vf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),i.toArray(this.instanceColor.array,t*3)}setMatrixAt(t,i){i.toArray(this.instanceMatrix.array,t*16)}setMorphAt(t,i){const s=i.morphTargetInfluences,r=s.length+1;this.morphTexture===null&&(this.morphTexture=new Sg(new Float32Array(r*this.count),r,this.count,aM,Cf));const l=this.morphTexture.source.data.data;let c=0;for(let h=0;h<s.length;h++)c+=s[h];const u=this.geometry.morphTargetsRelative?1:1-c,p=r*t;l[p]=u,l.set(s,p+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const rf=new q,JM=new q,PM=new ji;class Xa{constructor(t=new q(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,s,r){return this.normal.set(t,i,s),this.constant=r,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,s){const r=rf.subVectors(s,i).cross(JM.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,i){const s=t.delta(rf),r=this.normal.dot(s);if(r===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const l=-(t.start.dot(this.normal)+this.constant)/r;return l<0||l>1?null:i.copy(t.start).addScaledVector(s,l)}intersectsLine(t){const i=this.distanceToPoint(t.start),s=this.distanceToPoint(t.end);return i<0&&s>0||s<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const s=i||PM.getNormalMatrix(t),r=this.coplanarPoint(rf).applyMatrix4(t),l=this.normal.applyMatrix3(s).normalize();return this.constant=-r.dot(l),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Is=new li,WM=new Be(.5,.5),Jl=new q;class $M{constructor(t=new Xa,i=new Xa,s=new Xa,r=new Xa,l=new Xa,c=new Xa){this.planes=[t,i,s,r,l,c]}set(t,i,s,r,l,c){const u=this.planes;return u[0].copy(t),u[1].copy(i),u[2].copy(s),u[3].copy(r),u[4].copy(l),u[5].copy(c),this}copy(t){const i=this.planes;for(let s=0;s<6;s++)i[s].copy(t.planes[s]);return this}setFromProjectionMatrix(t,i=Ys,s=!1){const r=this.planes,l=t.elements,c=l[0],u=l[1],p=l[2],h=l[3],y=l[4],g=l[5],x=l[6],b=l[7],S=l[8],T=l[9],w=l[10],z=l[11],L=l[12],X=l[13],D=l[14],I=l[15];if(r[0].setComponents(h-c,b-y,z-S,I-L).normalize(),r[1].setComponents(h+c,b+y,z+S,I+L).normalize(),r[2].setComponents(h+u,b+g,z+T,I+X).normalize(),r[3].setComponents(h-u,b-g,z-T,I-X).normalize(),s)r[4].setComponents(p,x,w,D).normalize(),r[5].setComponents(h-p,b-x,z-w,I-D).normalize();else if(r[4].setComponents(h-p,b-x,z-w,I-D).normalize(),i===Ys)r[5].setComponents(h+p,b+x,z+w,I+D).normalize();else if(i===bf)r[5].setComponents(p,x,w,D).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+i);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),Is.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const i=t.geometry;i.boundingSphere===null&&i.computeBoundingSphere(),Is.copy(i.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Is)}intersectsSprite(t){Is.center.set(0,0,0);const i=WM.distanceTo(t.center);return Is.radius=.7071067811865476+i,Is.applyMatrix4(t.matrixWorld),this.intersectsSphere(Is)}intersectsSphere(t){const i=this.planes,s=t.center,r=-t.radius;for(let l=0;l<6;l++)if(i[l].distanceToPoint(s)<r)return!1;return!0}intersectsBox(t){const i=this.planes;for(let s=0;s<6;s++){const r=i[s];if(Jl.x=r.normal.x>0?t.max.x:t.min.x,Jl.y=r.normal.y>0?t.max.y:t.min.y,Jl.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Jl)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let s=0;s<6;s++)if(i[s].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class vg extends Xs{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Le(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ac=new q,rc=new q,jy=new Xt,lo=new uc,Pl=new li,of=new q,ky=new q;class Uf extends Te{constructor(t=new Zs,i=new vg){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=i,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,s=[0];for(let r=1,l=i.count;r<l;r++)ac.fromBufferAttribute(i,r-1),rc.fromBufferAttribute(i,r),s[r]=s[r-1],s[r]+=ac.distanceTo(rc);t.setAttribute("lineDistance",new hc(s,1))}else ce("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,i){const s=this.geometry,r=this.matrixWorld,l=t.params.Line.threshold,c=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),Pl.copy(s.boundingSphere),Pl.applyMatrix4(r),Pl.radius+=l,t.ray.intersectsSphere(Pl)===!1)return;jy.copy(r).invert(),lo.copy(t.ray).applyMatrix4(jy);const u=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=u*u,h=this.isLineSegments?2:1,y=s.index,x=s.attributes.position;if(y!==null){const b=Math.max(0,c.start),S=Math.min(y.count,c.start+c.count);for(let T=b,w=S-1;T<w;T+=h){const z=y.getX(T),L=y.getX(T+1),X=Wl(this,t,lo,p,z,L,T);X&&i.push(X)}if(this.isLineLoop){const T=y.getX(S-1),w=y.getX(b),z=Wl(this,t,lo,p,T,w,S-1);z&&i.push(z)}}else{const b=Math.max(0,c.start),S=Math.min(x.count,c.start+c.count);for(let T=b,w=S-1;T<w;T+=h){const z=Wl(this,t,lo,p,T,T+1,T);z&&i.push(z)}if(this.isLineLoop){const T=Wl(this,t,lo,p,S-1,b,S-1);T&&i.push(T)}}}updateMorphTargets(){const i=this.geometry.morphAttributes,s=Object.keys(i);if(s.length>0){const r=i[s[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=r.length;l<c;l++){const u=r[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=l}}}}}function Wl(f,t,i,s,r,l,c){const u=f.geometry.attributes.position;if(ac.fromBufferAttribute(u,r),rc.fromBufferAttribute(u,l),i.distanceSqToSegment(ac,rc,of,ky)>s)return;of.applyMatrix4(f.matrixWorld);const h=t.ray.origin.distanceTo(of);if(!(h<t.near||h>t.far))return{distance:h,point:ky.clone().applyMatrix4(f.matrixWorld),index:c,face:null,faceIndex:null,barycoord:null,object:f}}const Fy=new q,Hy=new q;class tS extends Uf{constructor(t,i){super(t,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,s=[];for(let r=0,l=i.count;r<l;r+=2)Fy.fromBufferAttribute(i,r),Hy.fromBufferAttribute(i,r+1),s[r]=r===0?0:s[r-1],s[r+1]=s[r]+Fy.distanceTo(Hy);t.setAttribute("lineDistance",new hc(s,1))}else ce("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class eS extends Uf{constructor(t,i){super(t,i),this.isLineLoop=!0,this.type="LineLoop"}}class Tg extends Xs{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Le(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const Vy=new Xt,Tf=new uc,$l=new li,tc=new q;class nS extends Te{constructor(t=new Zs,i=new Tg){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=i,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}raycast(t,i){const s=this.geometry,r=this.matrixWorld,l=t.params.Points.threshold,c=s.drawRange;if(s.boundingSphere===null&&s.computeBoundingSphere(),$l.copy(s.boundingSphere),$l.applyMatrix4(r),$l.radius+=l,t.ray.intersectsSphere($l)===!1)return;Vy.copy(r).invert(),Tf.copy(t.ray).applyMatrix4(Vy);const u=l/((this.scale.x+this.scale.y+this.scale.z)/3),p=u*u,h=s.index,g=s.attributes.position;if(h!==null){const x=Math.max(0,c.start),b=Math.min(h.count,c.start+c.count);for(let S=x,T=b;S<T;S++){const w=h.getX(S);tc.fromBufferAttribute(g,w),Iy(tc,w,p,r,t,i,this)}}else{const x=Math.max(0,c.start),b=Math.min(g.count,c.start+c.count);for(let S=x,T=b;S<T;S++)tc.fromBufferAttribute(g,S),Iy(tc,S,p,r,t,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,s=Object.keys(i);if(s.length>0){const r=i[s[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let l=0,c=r.length;l<c;l++){const u=r[l].name||String(l);this.morphTargetInfluences.push(0),this.morphTargetDictionary[u]=l}}}}}function Iy(f,t,i,s,r,l,c){const u=Tf.distanceSqToPoint(f);if(u<i){const p=new q;Tf.closestPointToPoint(f,p),p.applyMatrix4(s);const h=r.ray.origin.distanceTo(p);if(h<r.near||h>r.far)return;l.push({distance:h,distanceToRay:Math.sqrt(u),point:p,index:t,face:null,faceIndex:null,barycoord:null,object:c})}}class lf extends Gn{constructor(t,i,s,r,l,c,u,p,h,y,g,x){super(null,c,u,p,h,y,r,l,g,x),this.isCompressedTexture=!0,this.image={width:i,height:s},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}}class fc extends Xs{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Le(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Le(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=lM,this.normalScale=new Be(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new xs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class ci extends fc{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Be(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ft(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Le(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Le(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Le(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(t)}get anisotropy(){return this._anisotropy}set anisotropy(t){this._anisotropy>0!=t>0&&this.version++,this._anisotropy=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get dispersion(){return this._dispersion}set dispersion(t){this._dispersion>0!=t>0&&this.version++,this._dispersion=t}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=t.anisotropy,this.anisotropyRotation=t.anisotropyRotation,this.anisotropyMap=t.anisotropyMap,this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.dispersion=t.dispersion,this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}function ec(f,t){return!f||f.constructor===t?f:typeof t.BYTES_PER_ELEMENT=="number"?new t(f):Array.prototype.slice.call(f)}function iS(f){function t(r,l){return f[r]-f[l]}const i=f.length,s=new Array(i);for(let r=0;r!==i;++r)s[r]=r;return s.sort(t),s}function Gy(f,t,i){const s=f.length,r=new f.constructor(s);for(let l=0,c=0;c!==s;++l){const u=i[l]*t;for(let p=0;p!==t;++p)r[c++]=f[u+p]}return r}function wg(f,t,i,s){let r=1,l=f[0];for(;l!==void 0&&l[s]===void 0;)l=f[r++];if(l===void 0)return;let c=l[s];if(c!==void 0)if(Array.isArray(c))do c=l[s],c!==void 0&&(t.push(l.time),i.push(...c)),l=f[r++];while(l!==void 0);else if(c.toArray!==void 0)do c=l[s],c!==void 0&&(t.push(l.time),c.toArray(i,i.length)),l=f[r++];while(l!==void 0);else do c=l[s],c!==void 0&&(t.push(l.time),i.push(c)),l=f[r++];while(l!==void 0)}class bo{constructor(t,i,s,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new i.constructor(s),this.sampleValues=i,this.valueSize=s,this.settings=null,this.DefaultSettings_={}}evaluate(t){const i=this.parameterPositions;let s=this._cachedIndex,r=i[s],l=i[s-1];t:{e:{let c;n:{i:if(!(t<r)){for(let u=s+2;;){if(r===void 0){if(t<l)break i;return s=i.length,this._cachedIndex=s,this.copySampleValue_(s-1)}if(s===u)break;if(l=r,r=i[++s],t<r)break e}c=i.length;break n}if(!(t>=l)){const u=i[1];t<u&&(s=2,l=u);for(let p=s-2;;){if(l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===p)break;if(r=l,l=i[--s-1],t>=l)break e}c=s,s=0;break n}break t}for(;s<c;){const u=s+c>>>1;t<i[u]?c=u:s=u+1}if(r=i[s],l=i[s-1],l===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return s=i.length,this._cachedIndex=s,this.copySampleValue_(s-1)}this._cachedIndex=s,this.intervalChanged_(s,l,r)}return this.interpolate_(s,l,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const i=this.resultBuffer,s=this.sampleValues,r=this.valueSize,l=t*r;for(let c=0;c!==r;++c)i[c]=s[l+c];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class sS extends bo{constructor(t,i,s,r){super(t,i,s,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:sy,endingEnd:sy}}intervalChanged_(t,i,s){const r=this.parameterPositions;let l=t-2,c=t+1,u=r[l],p=r[c];if(u===void 0)switch(this.getSettings_().endingStart){case ay:l=t,u=2*i-s;break;case ry:l=r.length-2,u=i+r[l]-r[l+1];break;default:l=t,u=s}if(p===void 0)switch(this.getSettings_().endingEnd){case ay:c=t,p=2*s-i;break;case ry:c=1,p=s+r[1]-r[0];break;default:c=t-1,p=i}const h=(s-i)*.5,y=this.valueSize;this._weightPrev=h/(i-u),this._weightNext=h/(p-s),this._offsetPrev=l*y,this._offsetNext=c*y}interpolate_(t,i,s,r){const l=this.resultBuffer,c=this.sampleValues,u=this.valueSize,p=t*u,h=p-u,y=this._offsetPrev,g=this._offsetNext,x=this._weightPrev,b=this._weightNext,S=(s-i)/(r-i),T=S*S,w=T*S,z=-x*w+2*x*T-x*S,L=(1+x)*w+(-1.5-2*x)*T+(-.5+x)*S+1,X=(-1-b)*w+(1.5+b)*T+.5*S,D=b*w-b*T;for(let I=0;I!==u;++I)l[I]=z*c[y+I]+L*c[h+I]+X*c[p+I]+D*c[g+I];return l}}class aS extends bo{constructor(t,i,s,r){super(t,i,s,r)}interpolate_(t,i,s,r){const l=this.resultBuffer,c=this.sampleValues,u=this.valueSize,p=t*u,h=p-u,y=(s-i)/(r-i),g=1-y;for(let x=0;x!==u;++x)l[x]=c[h+x]*g+c[p+x]*y;return l}}class rS extends bo{constructor(t,i,s,r){super(t,i,s,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class ei{constructor(t,i,s,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ec(i,this.TimeBufferType),this.values=ec(s,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let s;if(i.toJSON!==this.toJSON)s=i.toJSON(t);else{s={name:t.name,times:ec(t.times,Array),values:ec(t.values,Array)};const r=t.getInterpolation();r!==t.DefaultInterpolation&&(s.interpolation=r)}return s.type=t.ValueTypeName,s}InterpolantFactoryMethodDiscrete(t){return new rS(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new aS(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new sS(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case $a:i=this.InterpolantFactoryMethodDiscrete;break;case tr:i=this.InterpolantFactoryMethodLinear;break;case Bh:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const s="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(s);return ce("KeyframeTrack:",s),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return $a;case this.InterpolantFactoryMethodLinear:return tr;case this.InterpolantFactoryMethodSmooth:return Bh}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const i=this.times;for(let s=0,r=i.length;s!==r;++s)i[s]+=t}return this}scale(t){if(t!==1){const i=this.times;for(let s=0,r=i.length;s!==r;++s)i[s]*=t}return this}trim(t,i){const s=this.times,r=s.length;let l=0,c=r-1;for(;l!==r&&s[l]<t;)++l;for(;c!==-1&&s[c]>i;)--c;if(++c,l!==0||c!==r){l>=c&&(c=Math.max(c,1),l=c-1);const u=this.getValueSize();this.times=s.slice(l,c),this.values=this.values.slice(l*u,c*u)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(xe("KeyframeTrack: Invalid value size in track.",this),t=!1);const s=this.times,r=this.values,l=s.length;l===0&&(xe("KeyframeTrack: Track is empty.",this),t=!1);let c=null;for(let u=0;u!==l;u++){const p=s[u];if(typeof p=="number"&&isNaN(p)){xe("KeyframeTrack: Time is not a valid number.",this,u,p),t=!1;break}if(c!==null&&c>p){xe("KeyframeTrack: Out of order keys.",this,u,p,c),t=!1;break}c=p}if(r!==void 0&&uM(r))for(let u=0,p=r.length;u!==p;++u){const h=r[u];if(isNaN(h)){xe("KeyframeTrack: Value is not a valid number.",this,u,h),t=!1;break}}return t}optimize(){const t=this.times.slice(),i=this.values.slice(),s=this.getValueSize(),r=this.getInterpolation()===Bh,l=t.length-1;let c=1;for(let u=1;u<l;++u){let p=!1;const h=t[u],y=t[u+1];if(h!==y&&(u!==1||h!==t[0]))if(r)p=!0;else{const g=u*s,x=g-s,b=g+s;for(let S=0;S!==s;++S){const T=i[g+S];if(T!==i[x+S]||T!==i[b+S]){p=!0;break}}}if(p){if(u!==c){t[c]=t[u];const g=u*s,x=c*s;for(let b=0;b!==s;++b)i[x+b]=i[g+b]}++c}}if(l>0){t[c]=t[l];for(let u=l*s,p=c*s,h=0;h!==s;++h)i[p+h]=i[u+h];++c}return c!==t.length?(this.times=t.slice(0,c),this.values=i.slice(0,c*s)):(this.times=t,this.values=i),this}clone(){const t=this.times.slice(),i=this.values.slice(),s=this.constructor,r=new s(this.name,t,i);return r.createInterpolant=this.createInterpolant,r}}ei.prototype.ValueTypeName="";ei.prototype.TimeBufferType=Float32Array;ei.prototype.ValueBufferType=Float32Array;ei.prototype.DefaultInterpolation=tr;class ar extends ei{constructor(t,i,s){super(t,i,s)}}ar.prototype.ValueTypeName="bool";ar.prototype.ValueBufferType=Array;ar.prototype.DefaultInterpolation=$a;ar.prototype.InterpolantFactoryMethodLinear=void 0;ar.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends ei{constructor(t,i,s,r){super(t,i,s,r)}}_g.prototype.ValueTypeName="color";class er extends ei{constructor(t,i,s,r){super(t,i,s,r)}}er.prototype.ValueTypeName="number";class oS extends bo{constructor(t,i,s,r){super(t,i,s,r)}interpolate_(t,i,s,r){const l=this.resultBuffer,c=this.sampleValues,u=this.valueSize,p=(s-i)/(r-i);let h=t*u;for(let y=h+u;h!==y;h+=4)Ui.slerpFlat(l,0,c,h-u,c,h,p);return l}}class nr extends ei{constructor(t,i,s,r){super(t,i,s,r)}InterpolantFactoryMethodLinear(t){return new oS(this.times,this.values,this.getValueSize(),t)}}nr.prototype.ValueTypeName="quaternion";nr.prototype.InterpolantFactoryMethodSmooth=void 0;class rr extends ei{constructor(t,i,s){super(t,i,s)}}rr.prototype.ValueTypeName="string";rr.prototype.ValueBufferType=Array;rr.prototype.DefaultInterpolation=$a;rr.prototype.InterpolantFactoryMethodLinear=void 0;rr.prototype.InterpolantFactoryMethodSmooth=void 0;class ir extends ei{constructor(t,i,s,r){super(t,i,s,r)}}ir.prototype.ValueTypeName="vector";class lS{constructor(t="",i=-1,s=[],r=rM){this.name=t,this.tracks=s,this.duration=i,this.blendMode=r,this.uuid=$n(),this.userData={},this.duration<0&&this.resetDuration()}static parse(t){const i=[],s=t.tracks,r=1/(t.fps||1);for(let c=0,u=s.length;c!==u;++c)i.push(uS(s[c]).scale(r));const l=new this(t.name,t.duration,i,t.blendMode);return l.uuid=t.uuid,l.userData=JSON.parse(t.userData||"{}"),l}static toJSON(t){const i=[],s=t.tracks,r={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode,userData:JSON.stringify(t.userData)};for(let l=0,c=s.length;l!==c;++l)i.push(ei.toJSON(s[l]));return r}static CreateFromMorphTargetSequence(t,i,s,r){const l=i.length,c=[];for(let u=0;u<l;u++){let p=[],h=[];p.push((u+l-1)%l,u,(u+1)%l),h.push(0,1,0);const y=iS(p);p=Gy(p,1,y),h=Gy(h,1,y),!r&&p[0]===0&&(p.push(l),h.push(h[0])),c.push(new er(".morphTargetInfluences["+i[u].name+"]",p,h).scale(1/s))}return new this(t,-1,c)}static findByName(t,i){let s=t;if(!Array.isArray(t)){const r=t;s=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<s.length;r++)if(s[r].name===i)return s[r];return null}static CreateClipsFromMorphTargetSequences(t,i,s){const r={},l=/^([\w-]*?)([\d]+)$/;for(let u=0,p=t.length;u<p;u++){const h=t[u],y=h.name.match(l);if(y&&y.length>1){const g=y[1];let x=r[g];x||(r[g]=x=[]),x.push(h)}}const c=[];for(const u in r)c.push(this.CreateFromMorphTargetSequence(u,r[u],i,s));return c}static parseAnimation(t,i){if(ce("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!t)return xe("AnimationClip: No animation in JSONLoader data."),null;const s=function(g,x,b,S,T){if(b.length!==0){const w=[],z=[];wg(b,w,z,S),w.length!==0&&T.push(new g(x,w,z))}},r=[],l=t.name||"default",c=t.fps||30,u=t.blendMode;let p=t.length||-1;const h=t.hierarchy||[];for(let g=0;g<h.length;g++){const x=h[g].keys;if(!(!x||x.length===0))if(x[0].morphTargets){const b={};let S;for(S=0;S<x.length;S++)if(x[S].morphTargets)for(let T=0;T<x[S].morphTargets.length;T++)b[x[S].morphTargets[T]]=-1;for(const T in b){const w=[],z=[];for(let L=0;L!==x[S].morphTargets.length;++L){const X=x[S];w.push(X.time),z.push(X.morphTarget===T?1:0)}r.push(new er(".morphTargetInfluence["+T+"]",w,z))}p=b.length*c}else{const b=".bones["+i[g].name+"]";s(ir,b+".position",x,"pos",r),s(nr,b+".quaternion",x,"rot",r),s(ir,b+".scale",x,"scl",r)}}return r.length===0?null:new this(l,p,r,u)}resetDuration(){const t=this.tracks;let i=0;for(let s=0,r=t.length;s!==r;++s){const l=this.tracks[s];i=Math.max(i,l.times[l.times.length-1])}return this.duration=i,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let s=0;s<this.tracks.length;s++)t.push(this.tracks[s].clone());const i=new this.constructor(this.name,this.duration,t,this.blendMode);return i.userData=JSON.parse(JSON.stringify(this.userData)),i}toJSON(){return this.constructor.toJSON(this)}}function cS(f){switch(f.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return er;case"vector":case"vector2":case"vector3":case"vector4":return ir;case"color":return _g;case"quaternion":return nr;case"bool":case"boolean":return ar;case"string":return rr}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+f)}function uS(f){if(f.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=cS(f.type);if(f.times===void 0){const i=[],s=[];wg(f.keys,i,s,"value"),f.times=i,f.values=s}return t.parse!==void 0?t.parse(f):new t(f.name,f.times,f.values,f.interpolation)}const Bi={enabled:!1,files:{},add:function(f,t){this.enabled!==!1&&(this.files[f]=t)},get:function(f){if(this.enabled!==!1)return this.files[f]},remove:function(f){delete this.files[f]},clear:function(){this.files={}}};class hS{constructor(t,i,s){const r=this;let l=!1,c=0,u=0,p;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=s,this._abortController=null,this.itemStart=function(y){u++,l===!1&&r.onStart!==void 0&&r.onStart(y,c,u),l=!0},this.itemEnd=function(y){c++,r.onProgress!==void 0&&r.onProgress(y,c,u),c===u&&(l=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(y){r.onError!==void 0&&r.onError(y)},this.resolveURL=function(y){return p?p(y):y},this.setURLModifier=function(y){return p=y,this},this.addHandler=function(y,g){return h.push(y,g),this},this.removeHandler=function(y){const g=h.indexOf(y);return g!==-1&&h.splice(g,2),this},this.getHandler=function(y){for(let g=0,x=h.length;g<x;g+=2){const b=h[g],S=h[g+1];if(b.global&&(b.lastIndex=0),b.test(y))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const fS=new hS;class or{constructor(t){this.manager=t!==void 0?t:fS,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const s=this;return new Promise(function(r,l){s.load(t,r,i,l)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}abort(){return this}}or.DEFAULT_MATERIAL_NAME="__DEFAULT";const Di={};class dS extends Error{constructor(t,i){super(t),this.response=i}}class Eg extends or{constructor(t){super(t),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(t,i,s,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const l=Bi.get(`file:${t}`);if(l!==void 0)return this.manager.itemStart(t),setTimeout(()=>{i&&i(l),this.manager.itemEnd(t)},0),l;if(Di[t]!==void 0){Di[t].push({onLoad:i,onProgress:s,onError:r});return}Di[t]=[],Di[t].push({onLoad:i,onProgress:s,onError:r});const c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),u=this.mimeType,p=this.responseType;fetch(c).then(h=>{if(h.status===200||h.status===0){if(h.status===0&&ce("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||h.body===void 0||h.body.getReader===void 0)return h;const y=Di[t],g=h.body.getReader(),x=h.headers.get("X-File-Size")||h.headers.get("Content-Length"),b=x?parseInt(x):0,S=b!==0;let T=0;const w=new ReadableStream({start(z){L();function L(){g.read().then(({done:X,value:D})=>{if(X)z.close();else{T+=D.byteLength;const I=new ProgressEvent("progress",{lengthComputable:S,loaded:T,total:b});for(let $=0,Z=y.length;$<Z;$++){const et=y[$];et.onProgress&&et.onProgress(I)}z.enqueue(D),L()}},X=>{z.error(X)})}}});return new Response(w)}else throw new dS(`fetch for "${h.url}" responded with ${h.status}: ${h.statusText}`,h)}).then(h=>{switch(p){case"arraybuffer":return h.arrayBuffer();case"blob":return h.blob();case"document":return h.text().then(y=>new DOMParser().parseFromString(y,u));case"json":return h.json();default:if(u==="")return h.text();{const g=/charset="?([^;"\s]*)"?/i.exec(u),x=g&&g[1]?g[1].toLowerCase():void 0,b=new TextDecoder(x);return h.arrayBuffer().then(S=>b.decode(S))}}}).then(h=>{Bi.add(`file:${t}`,h);const y=Di[t];delete Di[t];for(let g=0,x=y.length;g<x;g++){const b=y[g];b.onLoad&&b.onLoad(h)}}).catch(h=>{const y=Di[t];if(y===void 0)throw this.manager.itemError(t),h;delete Di[t];for(let g=0,x=y.length;g<x;g++){const b=y[g];b.onError&&b.onError(h)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const qa=new WeakMap;class pS extends or{constructor(t){super(t)}load(t,i,s,r){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const l=this,c=Bi.get(`image:${t}`);if(c!==void 0){if(c.complete===!0)l.manager.itemStart(t),setTimeout(function(){i&&i(c),l.manager.itemEnd(t)},0);else{let g=qa.get(c);g===void 0&&(g=[],qa.set(c,g)),g.push({onLoad:i,onError:r})}return c}const u=Mf("img");function p(){y(),i&&i(this);const g=qa.get(this)||[];for(let x=0;x<g.length;x++){const b=g[x];b.onLoad&&b.onLoad(this)}qa.delete(this),l.manager.itemEnd(t)}function h(g){y(),r&&r(g),Bi.remove(`image:${t}`);const x=qa.get(this)||[];for(let b=0;b<x.length;b++){const S=x[b];S.onError&&S.onError(g)}qa.delete(this),l.manager.itemError(t),l.manager.itemEnd(t)}function y(){u.removeEventListener("load",p,!1),u.removeEventListener("error",h,!1)}return u.addEventListener("load",p,!1),u.addEventListener("error",h,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(u.crossOrigin=this.crossOrigin),Bi.add(`image:${t}`,u),l.manager.itemStart(t),u.src=t,u}}class mS extends or{constructor(t){super(t)}load(t,i,s,r){const l=new Gn,c=new pS(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(t,function(u){l.image=u,l.needsUpdate=!0,i!==void 0&&i(l)},s,r),l}}class jf extends Te{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new Le(t),this.intensity=i}dispose(){this.dispatchEvent({type:"dispose"})}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,i}}const cf=new Xt,Yy=new q,Xy=new q;class kf{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Be(512,512),this.mapType=pg,this.map=null,this.mapPass=null,this.matrix=new Xt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new $M,this._frameExtents=new Be(1,1),this._viewportCount=1,this._viewports=[new ki(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,s=this.matrix;Yy.setFromMatrixPosition(t.matrixWorld),i.position.copy(Yy),Xy.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(Xy),i.updateMatrixWorld(),cf.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cf,i.coordinateSystem,i.reversedDepth),i.reversedDepth?s.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):s.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),s.multiply(cf)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class yS extends kf{constructor(){super(new Df(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(t){const i=this.camera,s=xo*2*t.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,l=t.distance||i.far;(s!==i.fov||r!==i.aspect||l!==i.far)&&(i.fov=s,i.aspect=r,i.far=l,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class gS extends jf{constructor(t,i,s=0,r=Math.PI/3,l=0,c=2){super(t,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Te.DEFAULT_UP),this.updateMatrix(),this.target=new Te,this.distance=s,this.angle=r,this.penumbra=l,this.decay=c,this.map=null,this.shadow=new yS}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){super.dispose(),this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.map=t.map,this.shadow=t.shadow.clone(),this}toJSON(t){const i=super.toJSON(t);return i.object.distance=this.distance,i.object.angle=this.angle,i.object.decay=this.decay,i.object.penumbra=this.penumbra,i.object.target=this.target.uuid,this.map&&this.map.isTexture&&(i.object.map=this.map.toJSON(t).uuid),i.object.shadow=this.shadow.toJSON(),i}}class xS extends kf{constructor(){super(new Df(90,1,.5,500)),this.isPointLightShadow=!0}}class bS extends jf{constructor(t,i,s=0,r=2){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=s,this.decay=r,this.shadow=new xS}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){super.dispose(),this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}toJSON(t){const i=super.toJSON(t);return i.object.distance=this.distance,i.object.decay=this.decay,i.object.shadow=this.shadow.toJSON(),i}}class Ag extends bg{constructor(t=-1,i=1,s=1,r=-1,l=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=s,this.bottom=r,this.near=l,this.far=c,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,s,r,l,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=s,this.view.offsetY=r,this.view.width=l,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),s=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let l=s-t,c=s+t,u=r+i,p=r-i;if(this.view!==null&&this.view.enabled){const h=(this.right-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l+=h*this.view.offsetX,c=l+h*this.view.width,u-=y*this.view.offsetY,p=u-y*this.view.height}this.projectionMatrix.makeOrthographic(l,c,u,p,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}class MS extends kf{constructor(){super(new Ag(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class SS extends jf{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Te.DEFAULT_UP),this.updateMatrix(),this.target=new Te,this.shadow=new MS}dispose(){super.dispose(),this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}toJSON(t){const i=super.toJSON(t);return i.object.shadow=this.shadow.toJSON(),i.object.target=this.target.uuid,i}}class po{static extractUrlBase(t){const i=t.lastIndexOf("/");return i===-1?"./":t.slice(0,i+1)}static resolveURL(t,i){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(t)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:i+t)}}const uf=new WeakMap;class vS extends or{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ce("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ce("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(t){return this.options=t,this}load(t,i,s,r){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const l=this,c=Bi.get(`image-bitmap:${t}`);if(c!==void 0){if(l.manager.itemStart(t),c.then){c.then(h=>{if(uf.has(c)===!0)r&&r(uf.get(c)),l.manager.itemError(t),l.manager.itemEnd(t);else return i&&i(h),l.manager.itemEnd(t),h});return}return setTimeout(function(){i&&i(c),l.manager.itemEnd(t)},0),c}const u={};u.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",u.headers=this.requestHeader,u.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const p=fetch(t,u).then(function(h){return h.blob()}).then(function(h){return createImageBitmap(h,Object.assign(l.options,{colorSpaceConversion:"none"}))}).then(function(h){return Bi.add(`image-bitmap:${t}`,h),i&&i(h),l.manager.itemEnd(t),h}).catch(function(h){r&&r(h),uf.set(p,h),Bi.remove(`image-bitmap:${t}`),l.manager.itemError(t),l.manager.itemEnd(t)});Bi.add(`image-bitmap:${t}`,p),l.manager.itemStart(t)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const Ff="\\[\\]\\.:\\/",TS=new RegExp("["+Ff+"]","g"),Hf="[^"+Ff+"]",wS="[^"+Ff.replace("\\.","")+"]",_S=/((?:WC+[\/:])*)/.source.replace("WC",Hf),ES=/(WCOD+)?/.source.replace("WCOD",wS),AS=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hf),zS=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hf),CS=new RegExp("^"+_S+ES+AS+zS+"$"),RS=["material","materials","bones","map"];class NS{constructor(t,i,s){const r=s||Qt.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,r)}getValue(t,i){this.bind();const s=this._targetGroup.nCachedObjects_,r=this._bindings[s];r!==void 0&&r.getValue(t,i)}setValue(t,i){const s=this._bindings;for(let r=this._targetGroup.nCachedObjects_,l=s.length;r!==l;++r)s[r].setValue(t,i)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=t.length;i!==s;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=t.length;i!==s;++i)t[i].unbind()}}class Qt{constructor(t,i,s){this.path=i,this.parsedPath=s||Qt.parseTrackName(i),this.node=Qt.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,s){return t&&t.isAnimationObjectGroup?new Qt.Composite(t,i,s):new Qt(t,i,s)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(TS,"")}static parseTrackName(t){const i=CS.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const s={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},r=s.nodeName&&s.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const l=s.nodeName.substring(r+1);RS.indexOf(l)!==-1&&(s.nodeName=s.nodeName.substring(0,r),s.objectName=l)}if(s.propertyName===null||s.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return s}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){const s=t.skeleton.getBoneByName(i);if(s!==void 0)return s}if(t.children){const s=function(l){for(let c=0;c<l.length;c++){const u=l[c];if(u.name===i||u.uuid===i)return u;const p=s(u.children);if(p)return p}return null},r=s(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const s=this.resolvedProperty;for(let r=0,l=s.length;r!==l;++r)t[i++]=s[r]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const s=this.resolvedProperty;for(let r=0,l=s.length;r!==l;++r)s[r]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,l=s.length;r!==l;++r)s[r]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const s=this.resolvedProperty;for(let r=0,l=s.length;r!==l;++r)s[r]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,s=i.objectName,r=i.propertyName;let l=i.propertyIndex;if(t||(t=Qt.findNode(this.rootNode,i.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){ce("PropertyBinding: No target node found for track: "+this.path+".");return}if(s){let h=i.objectIndex;switch(s){case"materials":if(!t.material){xe("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){xe("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){xe("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let y=0;y<t.length;y++)if(t[y].name===h){h=y;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material){xe("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.map){xe("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}t=t.material.map;break;default:if(t[s]===void 0){xe("PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[s]}if(h!==void 0){if(t[h]===void 0){xe("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[h]}}const c=t[r];if(c===void 0){const h=i.nodeName;xe("PropertyBinding: Trying to update property for track: "+h+"."+r+" but it wasn't found.",t);return}let u=this.Versioning.None;this.targetObject=t,t.isMaterial===!0?u=this.Versioning.NeedsUpdate:t.isObject3D===!0&&(u=this.Versioning.MatrixWorldNeedsUpdate);let p=this.BindingType.Direct;if(l!==void 0){if(r==="morphTargetInfluences"){if(!t.geometry){xe("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){xe("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[l]!==void 0&&(l=t.morphTargetDictionary[l])}p=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=l}else c.fromArray!==void 0&&c.toArray!==void 0?(p=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(p=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[p],this.setValue=this.SetterByBindingTypeAndVersioning[p][u]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Qt.Composite=NS;Qt.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Qt.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Qt.prototype.GetterByBindingType=[Qt.prototype._getValue_direct,Qt.prototype._getValue_array,Qt.prototype._getValue_arrayElement,Qt.prototype._getValue_toArray];Qt.prototype.SetterByBindingTypeAndVersioning=[[Qt.prototype._setValue_direct,Qt.prototype._setValue_direct_setNeedsUpdate,Qt.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_array,Qt.prototype._setValue_array_setNeedsUpdate,Qt.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_arrayElement,Qt.prototype._setValue_arrayElement_setNeedsUpdate,Qt.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Qt.prototype._setValue_fromArray,Qt.prototype._setValue_fromArray_setNeedsUpdate,Qt.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zf}}));typeof window<"u"&&(window.__THREE__?ce("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zf);function qy(f,t){if(t===oM)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),f;if(t===gf||t===mg){let i=f.getIndex();if(i===null){const c=[],u=f.getAttribute("position");if(u!==void 0){for(let p=0;p<u.count;p++)c.push(p);f.setIndex(c),i=f.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),f}const s=i.count-2,r=[];if(t===gf)for(let c=1;c<=s;c++)r.push(i.getX(0)),r.push(i.getX(c)),r.push(i.getX(c+1));else for(let c=0;c<s;c++)c%2===0?(r.push(i.getX(c)),r.push(i.getX(c+1)),r.push(i.getX(c+2))):(r.push(i.getX(c+2)),r.push(i.getX(c+1)),r.push(i.getX(c)));r.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const l=f.clone();return l.setIndex(r),l.clearGroups(),l}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),f}class OS extends or{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new jS(i)}),this.register(function(i){return new kS(i)}),this.register(function(i){return new ZS(i)}),this.register(function(i){return new KS(i)}),this.register(function(i){return new QS(i)}),this.register(function(i){return new HS(i)}),this.register(function(i){return new VS(i)}),this.register(function(i){return new IS(i)}),this.register(function(i){return new GS(i)}),this.register(function(i){return new US(i)}),this.register(function(i){return new YS(i)}),this.register(function(i){return new FS(i)}),this.register(function(i){return new qS(i)}),this.register(function(i){return new XS(i)}),this.register(function(i){return new BS(i)}),this.register(function(i){return new JS(i)}),this.register(function(i){return new PS(i)})}load(t,i,s,r){const l=this;let c;if(this.resourcePath!=="")c=this.resourcePath;else if(this.path!==""){const h=po.extractUrlBase(t);c=po.resolveURL(h,this.path)}else c=po.extractUrlBase(t);this.manager.itemStart(t);const u=function(h){r?r(h):console.error(h),l.manager.itemError(t),l.manager.itemEnd(t)},p=new Eg(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,function(h){try{l.parse(h,c,function(y){i(y),l.manager.itemEnd(t)},u)}catch(y){u(y)}},s,u)}setDRACOLoader(t){return this.dracoLoader=t,this}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,i,s,r){let l;const c={},u={},p=new TextDecoder;if(typeof t=="string")l=JSON.parse(t);else if(t instanceof ArrayBuffer)if(p.decode(new Uint8Array(t,0,4))===zg){try{c[Ht.KHR_BINARY_GLTF]=new WS(t)}catch(g){r&&r(g);return}l=JSON.parse(c[Ht.KHR_BINARY_GLTF].content)}else l=JSON.parse(p.decode(t));else l=t;if(l.asset===void 0||l.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const h=new hv(l,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});h.fileLoader.setRequestHeader(this.requestHeader);for(let y=0;y<this.pluginCallbacks.length;y++){const g=this.pluginCallbacks[y](h);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),u[g.name]=g,c[g.name]=!0}if(l.extensionsUsed)for(let y=0;y<l.extensionsUsed.length;++y){const g=l.extensionsUsed[y],x=l.extensionsRequired||[];switch(g){case Ht.KHR_MATERIALS_UNLIT:c[g]=new LS;break;case Ht.KHR_DRACO_MESH_COMPRESSION:c[g]=new $S(l,this.dracoLoader);break;case Ht.KHR_TEXTURE_TRANSFORM:c[g]=new tv;break;case Ht.KHR_MESH_QUANTIZATION:c[g]=new ev;break;default:x.indexOf(g)>=0&&u[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}h.setExtensions(c),h.setPlugins(u),h.parse(s,r)}parseAsync(t,i){const s=this;return new Promise(function(r,l){s.parse(t,i,r,l)})}}function DS(){let f={};return{get:function(t){return f[t]},add:function(t,i){f[t]=i},remove:function(t){delete f[t]},removeAll:function(){f={}}}}const Ht={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class BS{constructor(t){this.parser=t,this.name=Ht.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,i=this.parser.json.nodes||[];for(let s=0,r=i.length;s<r;s++){const l=i[s];l.extensions&&l.extensions[this.name]&&l.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,l.extensions[this.name].light)}}_loadLight(t){const i=this.parser,s="light:"+t;let r=i.cache.get(s);if(r)return r;const l=i.json,p=((l.extensions&&l.extensions[this.name]||{}).lights||[])[t];let h;const y=new Le(16777215);p.color!==void 0&&y.setRGB(p.color[0],p.color[1],p.color[2],ti);const g=p.range!==void 0?p.range:0;switch(p.type){case"directional":h=new SS(y),h.target.position.set(0,0,-1),h.add(h.target);break;case"point":h=new bS(y),h.distance=g;break;case"spot":h=new gS(y),h.distance=g,p.spot=p.spot||{},p.spot.innerConeAngle=p.spot.innerConeAngle!==void 0?p.spot.innerConeAngle:0,p.spot.outerConeAngle=p.spot.outerConeAngle!==void 0?p.spot.outerConeAngle:Math.PI/4,h.angle=p.spot.outerConeAngle,h.penumbra=1-p.spot.innerConeAngle/p.spot.outerConeAngle,h.target.position.set(0,0,-1),h.add(h.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+p.type)}return h.position.set(0,0,0),oi(h,p),p.intensity!==void 0&&(h.intensity=p.intensity),h.name=i.createUniqueName(p.name||"light_"+t),r=Promise.resolve(h),i.cache.add(s,r),r}getDependency(t,i){if(t==="light")return this._loadLight(i)}createNodeAttachment(t){const i=this,s=this.parser,l=s.json.nodes[t],u=(l.extensions&&l.extensions[this.name]||{}).light;return u===void 0?null:this._loadLight(u).then(function(p){return s._getNodeRef(i.cache,u,p)})}}let LS=class{constructor(){this.name=Ht.KHR_MATERIALS_UNLIT}getMaterialType(){return Ka}extendParams(t,i,s){const r=[];t.color=new Le(1,1,1),t.opacity=1;const l=i.pbrMetallicRoughness;if(l){if(Array.isArray(l.baseColorFactor)){const c=l.baseColorFactor;t.color.setRGB(c[0],c[1],c[2],ti),t.opacity=c[3]}l.baseColorTexture!==void 0&&r.push(s.assignTexture(t,"map",l.baseColorTexture,We))}return Promise.all(r)}},US=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=r.extensions[this.name].emissiveStrength;return l!==void 0&&(i.emissiveIntensity=l),Promise.resolve()}},jS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];if(c.clearcoatFactor!==void 0&&(i.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&l.push(s.assignTexture(i,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&l.push(s.assignTexture(i,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(l.push(s.assignTexture(i,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const u=c.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new Be(u,u)}return Promise.all(l)}},kS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_DISPERSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=r.extensions[this.name];return i.dispersion=l.dispersion!==void 0?l.dispersion:0,Promise.resolve()}},FS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];return c.iridescenceFactor!==void 0&&(i.iridescence=c.iridescenceFactor),c.iridescenceTexture!==void 0&&l.push(s.assignTexture(i,"iridescenceMap",c.iridescenceTexture)),c.iridescenceIor!==void 0&&(i.iridescenceIOR=c.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),c.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=c.iridescenceThicknessMinimum),c.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=c.iridescenceThicknessMaximum),c.iridescenceThicknessTexture!==void 0&&l.push(s.assignTexture(i,"iridescenceThicknessMap",c.iridescenceThicknessTexture)),Promise.all(l)}},HS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_SHEEN}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[];i.sheenColor=new Le(0,0,0),i.sheenRoughness=0,i.sheen=1;const c=r.extensions[this.name];if(c.sheenColorFactor!==void 0){const u=c.sheenColorFactor;i.sheenColor.setRGB(u[0],u[1],u[2],ti)}return c.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&l.push(s.assignTexture(i,"sheenColorMap",c.sheenColorTexture,We)),c.sheenRoughnessTexture!==void 0&&l.push(s.assignTexture(i,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(l)}},VS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];return c.transmissionFactor!==void 0&&(i.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&l.push(s.assignTexture(i,"transmissionMap",c.transmissionTexture)),Promise.all(l)}},IS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_VOLUME}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];i.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&l.push(s.assignTexture(i,"thicknessMap",c.thicknessTexture)),i.attenuationDistance=c.attenuationDistance||1/0;const u=c.attenuationColor||[1,1,1];return i.attenuationColor=new Le().setRGB(u[0],u[1],u[2],ti),Promise.all(l)}},GS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_IOR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const r=this.parser.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=r.extensions[this.name];return i.ior=l.ior!==void 0?l.ior:1.5,Promise.resolve()}},YS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_SPECULAR}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];i.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&l.push(s.assignTexture(i,"specularIntensityMap",c.specularTexture));const u=c.specularColorFactor||[1,1,1];return i.specularColor=new Le().setRGB(u[0],u[1],u[2],ti),c.specularColorTexture!==void 0&&l.push(s.assignTexture(i,"specularColorMap",c.specularColorTexture,We)),Promise.all(l)}},XS=class{constructor(t){this.parser=t,this.name=Ht.EXT_MATERIALS_BUMP}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];return i.bumpScale=c.bumpFactor!==void 0?c.bumpFactor:1,c.bumpTexture!==void 0&&l.push(s.assignTexture(i,"bumpMap",c.bumpTexture)),Promise.all(l)}},qS=class{constructor(t){this.parser=t,this.name=Ht.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const s=this.parser.json.materials[t];return!s.extensions||!s.extensions[this.name]?null:ci}extendMaterialParams(t,i){const s=this.parser,r=s.json.materials[t];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const l=[],c=r.extensions[this.name];return c.anisotropyStrength!==void 0&&(i.anisotropy=c.anisotropyStrength),c.anisotropyRotation!==void 0&&(i.anisotropyRotation=c.anisotropyRotation),c.anisotropyTexture!==void 0&&l.push(s.assignTexture(i,"anisotropyMap",c.anisotropyTexture)),Promise.all(l)}};class ZS{constructor(t){this.parser=t,this.name=Ht.KHR_TEXTURE_BASISU}loadTexture(t){const i=this.parser,s=i.json,r=s.textures[t];if(!r.extensions||!r.extensions[this.name])return null;const l=r.extensions[this.name],c=i.options.ktx2Loader;if(!c){if(s.extensionsRequired&&s.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(t,l.source,c)}}class KS{constructor(t){this.parser=t,this.name=Ht.EXT_TEXTURE_WEBP}loadTexture(t){const i=this.name,s=this.parser,r=s.json,l=r.textures[t];if(!l.extensions||!l.extensions[i])return null;const c=l.extensions[i],u=r.images[c.source];let p=s.textureLoader;if(u.uri){const h=s.options.manager.getHandler(u.uri);h!==null&&(p=h)}return s.loadTextureImage(t,c.source,p)}}class QS{constructor(t){this.parser=t,this.name=Ht.EXT_TEXTURE_AVIF}loadTexture(t){const i=this.name,s=this.parser,r=s.json,l=r.textures[t];if(!l.extensions||!l.extensions[i])return null;const c=l.extensions[i],u=r.images[c.source];let p=s.textureLoader;if(u.uri){const h=s.options.manager.getHandler(u.uri);h!==null&&(p=h)}return s.loadTextureImage(t,c.source,p)}}class JS{constructor(t){this.name=Ht.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const i=this.parser.json,s=i.bufferViews[t];if(s.extensions&&s.extensions[this.name]){const r=s.extensions[this.name],l=this.parser.getDependency("buffer",r.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return l.then(function(u){const p=r.byteOffset||0,h=r.byteLength||0,y=r.count,g=r.byteStride,x=new Uint8Array(u,p,h);return c.decodeGltfBufferAsync?c.decodeGltfBufferAsync(y,g,x,r.mode,r.filter).then(function(b){return b.buffer}):c.ready.then(function(){const b=new ArrayBuffer(y*g);return c.decodeGltfBuffer(new Uint8Array(b),y,g,x,r.mode,r.filter),b})})}else return null}}let PS=class{constructor(t){this.name=Ht.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const i=this.parser.json,s=i.nodes[t];if(!s.extensions||!s.extensions[this.name]||s.mesh===void 0)return null;const r=i.meshes[s.mesh];for(const h of r.primitives)if(h.mode!==Vn.TRIANGLES&&h.mode!==Vn.TRIANGLE_STRIP&&h.mode!==Vn.TRIANGLE_FAN&&h.mode!==void 0)return null;const c=s.extensions[this.name].attributes,u=[],p={};for(const h in c)u.push(this.parser.getDependency("accessor",c[h]).then(y=>(p[h]=y,p[h])));return u.length<1?null:(u.push(this.parser.createNodeMesh(t)),Promise.all(u).then(h=>{const y=h.pop(),g=y.isGroup?y.children:[y],x=h[0].count,b=[];for(const S of g){const T=new Xt,w=new q,z=new Ui,L=new q(1,1,1),X=new QM(S.geometry,S.material,x);for(let D=0;D<x;D++)p.TRANSLATION&&w.fromBufferAttribute(p.TRANSLATION,D),p.ROTATION&&z.fromBufferAttribute(p.ROTATION,D),p.SCALE&&L.fromBufferAttribute(p.SCALE,D),X.setMatrixAt(D,T.compose(w,z,L));for(const D in p)if(D==="_COLOR_0"){const I=p[D];X.instanceColor=new vf(I.array,I.itemSize,I.normalized)}else D!=="TRANSLATION"&&D!=="ROTATION"&&D!=="SCALE"&&S.geometry.setAttribute(D,p[D]);Te.prototype.copy.call(X,S),this.parser.assignFinalMaterial(X),b.push(X)}return y.isGroup?(y.clear(),y.add(...b),y):b[0]}))}};const zg="glTF",co=12,Zy={JSON:1313821514,BIN:5130562};class WS{constructor(t){this.name=Ht.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(t,0,co),s=new TextDecoder;if(this.header={magic:s.decode(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==zg)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-co,l=new DataView(t,co);let c=0;for(;c<r;){const u=l.getUint32(c,!0);c+=4;const p=l.getUint32(c,!0);if(c+=4,p===Zy.JSON){const h=new Uint8Array(t,co+c,u);this.content=s.decode(h)}else if(p===Zy.BIN){const h=co+c;this.body=t.slice(h,h+u)}c+=u}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class $S{constructor(t,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=Ht.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(t,i){const s=this.json,r=this.dracoLoader,l=t.extensions[this.name].bufferView,c=t.extensions[this.name].attributes,u={},p={},h={};for(const y in c){const g=wf[y]||y.toLowerCase();u[g]=c[y]}for(const y in t.attributes){const g=wf[y]||y.toLowerCase();if(c[y]!==void 0){const x=s.accessors[t.attributes[y]],b=Ja[x.componentType];h[g]=b.name,p[g]=x.normalized===!0}}return i.getDependency("bufferView",l).then(function(y){return new Promise(function(g,x){r.decodeDracoFile(y,function(b){for(const S in b.attributes){const T=b.attributes[S],w=p[S];w!==void 0&&(T.normalized=w)}g(b)},u,h,ti,x)})})}}class tv{constructor(){this.name=Ht.KHR_TEXTURE_TRANSFORM}extendTexture(t,i){return(i.texCoord===void 0||i.texCoord===t.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(t=t.clone(),i.texCoord!==void 0&&(t.channel=i.texCoord),i.offset!==void 0&&t.offset.fromArray(i.offset),i.rotation!==void 0&&(t.rotation=i.rotation),i.scale!==void 0&&t.repeat.fromArray(i.scale),t.needsUpdate=!0),t}}class ev{constructor(){this.name=Ht.KHR_MESH_QUANTIZATION}}class Cg extends bo{constructor(t,i,s,r){super(t,i,s,r)}copySampleValue_(t){const i=this.resultBuffer,s=this.sampleValues,r=this.valueSize,l=t*r*3+r;for(let c=0;c!==r;c++)i[c]=s[l+c];return i}interpolate_(t,i,s,r){const l=this.resultBuffer,c=this.sampleValues,u=this.valueSize,p=u*2,h=u*3,y=r-i,g=(s-i)/y,x=g*g,b=x*g,S=t*h,T=S-h,w=-2*b+3*x,z=b-x,L=1-w,X=z-x+g;for(let D=0;D!==u;D++){const I=c[T+D+u],$=c[T+D+p]*y,Z=c[S+D+u],et=c[S+D]*y;l[D]=L*I+X*$+w*Z+z*et}return l}}const nv=new Ui;class iv extends Cg{interpolate_(t,i,s,r){const l=super.interpolate_(t,i,s,r);return nv.fromArray(l).normalize().toArray(l),l}}const Vn={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ja={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Ky={9728:yo,9729:go,9984:hg,9985:dg,9986:fg,9987:lc},Qy={33071:Za,33648:ic,10497:Wa},hf={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wf={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},gs={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},sv={CUBICSPLINE:void 0,LINEAR:tr,STEP:$a},ff={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function av(f){return f.DefaultMaterial===void 0&&(f.DefaultMaterial=new fc({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:nc})),f.DefaultMaterial}function Gs(f,t,i){for(const s in i.extensions)f[s]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[s]=i.extensions[s])}function oi(f,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(f.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function rv(f,t,i){let s=!1,r=!1,l=!1;for(let h=0,y=t.length;h<y;h++){const g=t[h];if(g.POSITION!==void 0&&(s=!0),g.NORMAL!==void 0&&(r=!0),g.COLOR_0!==void 0&&(l=!0),s&&r&&l)break}if(!s&&!r&&!l)return Promise.resolve(f);const c=[],u=[],p=[];for(let h=0,y=t.length;h<y;h++){const g=t[h];if(s){const x=g.POSITION!==void 0?i.getDependency("accessor",g.POSITION):f.attributes.position;c.push(x)}if(r){const x=g.NORMAL!==void 0?i.getDependency("accessor",g.NORMAL):f.attributes.normal;u.push(x)}if(l){const x=g.COLOR_0!==void 0?i.getDependency("accessor",g.COLOR_0):f.attributes.color;p.push(x)}}return Promise.all([Promise.all(c),Promise.all(u),Promise.all(p)]).then(function(h){const y=h[0],g=h[1],x=h[2];return s&&(f.morphAttributes.position=y),r&&(f.morphAttributes.normal=g),l&&(f.morphAttributes.color=x),f.morphTargetsRelative=!0,f})}function ov(f,t){if(f.updateMorphTargets(),t.weights!==void 0)for(let i=0,s=t.weights.length;i<s;i++)f.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(f.morphTargetInfluences.length===i.length){f.morphTargetDictionary={};for(let s=0,r=i.length;s<r;s++)f.morphTargetDictionary[i[s]]=s}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function lv(f){let t;const i=f.extensions&&f.extensions[Ht.KHR_DRACO_MESH_COMPRESSION];if(i?t="draco:"+i.bufferView+":"+i.indices+":"+df(i.attributes):t=f.indices+":"+df(f.attributes)+":"+f.mode,f.targets!==void 0)for(let s=0,r=f.targets.length;s<r;s++)t+=":"+df(f.targets[s]);return t}function df(f){let t="";const i=Object.keys(f).sort();for(let s=0,r=i.length;s<r;s++)t+=i[s]+":"+f[i[s]]+";";return t}function _f(f){switch(f){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function cv(f){return f.search(/\.jpe?g($|\?)/i)>0||f.search(/^data\:image\/jpeg/)===0?"image/jpeg":f.search(/\.webp($|\?)/i)>0||f.search(/^data\:image\/webp/)===0?"image/webp":f.search(/\.ktx2($|\?)/i)>0||f.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const uv=new Xt;class hv{constructor(t={},i={}){this.json=t,this.extensions={},this.plugins={},this.options=i,this.cache=new DS,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let s=!1,r=-1,l=!1,c=-1;if(typeof navigator<"u"){const u=navigator.userAgent;s=/^((?!chrome|android).)*safari/i.test(u)===!0;const p=u.match(/Version\/(\d+)/);r=s&&p?parseInt(p[1],10):-1,l=u.indexOf("Firefox")>-1,c=l?u.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||s&&r<17||l&&c<98?this.textureLoader=new mS(this.options.manager):this.textureLoader=new vS(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Eg(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,i){const s=this,r=this.json,l=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([s.getDependencies("scene"),s.getDependencies("animation"),s.getDependencies("camera")])}).then(function(c){const u={scene:c[0][r.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:r.asset,parser:s,userData:{}};return Gs(l,u,r),oi(u,r),Promise.all(s._invokeAll(function(p){return p.afterRoot&&p.afterRoot(u)})).then(function(){for(const p of u.scenes)p.updateMatrixWorld();t(u)})}).catch(i)}_markDefs(){const t=this.json.nodes||[],i=this.json.skins||[],s=this.json.meshes||[];for(let r=0,l=i.length;r<l;r++){const c=i[r].joints;for(let u=0,p=c.length;u<p;u++)t[c[u]].isBone=!0}for(let r=0,l=t.length;r<l;r++){const c=t[r];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(s[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(t,i){i!==void 0&&(t.refs[i]===void 0&&(t.refs[i]=t.uses[i]=0),t.refs[i]++)}_getNodeRef(t,i,s){if(t.refs[i]<=1)return s;const r=s.clone(),l=(c,u)=>{const p=this.associations.get(c);p!=null&&this.associations.set(u,p);for(const[h,y]of c.children.entries())l(y,u.children[h])};return l(s,r),r.name+="_instance_"+t.uses[i]++,r}_invokeOne(t){const i=Object.values(this.plugins);i.push(this);for(let s=0;s<i.length;s++){const r=t(i[s]);if(r)return r}return null}_invokeAll(t){const i=Object.values(this.plugins);i.unshift(this);const s=[];for(let r=0;r<i.length;r++){const l=t(i[r]);l&&s.push(l)}return s}getDependency(t,i){const s=t+":"+i;let r=this.cache.get(s);if(!r){switch(t){case"scene":r=this.loadScene(i);break;case"node":r=this._invokeOne(function(l){return l.loadNode&&l.loadNode(i)});break;case"mesh":r=this._invokeOne(function(l){return l.loadMesh&&l.loadMesh(i)});break;case"accessor":r=this.loadAccessor(i);break;case"bufferView":r=this._invokeOne(function(l){return l.loadBufferView&&l.loadBufferView(i)});break;case"buffer":r=this.loadBuffer(i);break;case"material":r=this._invokeOne(function(l){return l.loadMaterial&&l.loadMaterial(i)});break;case"texture":r=this._invokeOne(function(l){return l.loadTexture&&l.loadTexture(i)});break;case"skin":r=this.loadSkin(i);break;case"animation":r=this._invokeOne(function(l){return l.loadAnimation&&l.loadAnimation(i)});break;case"camera":r=this.loadCamera(i);break;default:if(r=this._invokeOne(function(l){return l!=this&&l.getDependency&&l.getDependency(t,i)}),!r)throw new Error("Unknown type: "+t);break}this.cache.add(s,r)}return r}getDependencies(t){let i=this.cache.get(t);if(!i){const s=this,r=this.json[t+(t==="mesh"?"es":"s")]||[];i=Promise.all(r.map(function(l,c){return s.getDependency(t,c)})),this.cache.add(t,i)}return i}loadBuffer(t){const i=this.json.buffers[t],s=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&t===0)return Promise.resolve(this.extensions[Ht.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(l,c){s.load(po.resolveURL(i.uri,r.path),l,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(t){const i=this.json.bufferViews[t];return this.getDependency("buffer",i.buffer).then(function(s){const r=i.byteLength||0,l=i.byteOffset||0;return s.slice(l,l+r)})}loadAccessor(t){const i=this,s=this.json,r=this.json.accessors[t];if(r.bufferView===void 0&&r.sparse===void 0){const c=hf[r.type],u=Ja[r.componentType],p=r.normalized===!0,h=new u(r.count*c);return Promise.resolve(new ke(h,c,p))}const l=[];return r.bufferView!==void 0?l.push(this.getDependency("bufferView",r.bufferView)):l.push(null),r.sparse!==void 0&&(l.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),l.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(l).then(function(c){const u=c[0],p=hf[r.type],h=Ja[r.componentType],y=h.BYTES_PER_ELEMENT,g=y*p,x=r.byteOffset||0,b=r.bufferView!==void 0?s.bufferViews[r.bufferView].byteStride:void 0,S=r.normalized===!0;let T,w;if(b&&b!==g){const z=Math.floor(x/b),L="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+z+":"+r.count;let X=i.cache.get(L);X||(T=new h(u,z*b,r.count*b/y),X=new YM(T,b/y),i.cache.add(L,X)),w=new Bf(X,p,x%b/y,S)}else u===null?T=new h(r.count*p):T=new h(u,x,r.count*p),w=new ke(T,p,S);if(r.sparse!==void 0){const z=hf.SCALAR,L=Ja[r.sparse.indices.componentType],X=r.sparse.indices.byteOffset||0,D=r.sparse.values.byteOffset||0,I=new L(c[1],X,r.sparse.count*z),$=new h(c[2],D,r.sparse.count*p);u!==null&&(w=new ke(w.array.slice(),w.itemSize,w.normalized)),w.normalized=!1;for(let Z=0,et=I.length;Z<et;Z++){const Et=I[Z];if(w.setX(Et,$[Z*p]),p>=2&&w.setY(Et,$[Z*p+1]),p>=3&&w.setZ(Et,$[Z*p+2]),p>=4&&w.setW(Et,$[Z*p+3]),p>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}w.normalized=S}return w})}loadTexture(t){const i=this.json,s=this.options,l=i.textures[t].source,c=i.images[l];let u=this.textureLoader;if(c.uri){const p=s.manager.getHandler(c.uri);p!==null&&(u=p)}return this.loadTextureImage(t,l,u)}loadTextureImage(t,i,s){const r=this,l=this.json,c=l.textures[t],u=l.images[i],p=(u.uri||u.bufferView)+":"+c.sampler;if(this.textureCache[p])return this.textureCache[p];const h=this.loadImageSource(i,s).then(function(y){y.flipY=!1,y.name=c.name||u.name||"",y.name===""&&typeof u.uri=="string"&&u.uri.startsWith("data:image/")===!1&&(y.name=u.uri);const x=(l.samplers||{})[c.sampler]||{};return y.magFilter=Ky[x.magFilter]||go,y.minFilter=Ky[x.minFilter]||lc,y.wrapS=Qy[x.wrapS]||Wa,y.wrapT=Qy[x.wrapT]||Wa,y.generateMipmaps=!y.isCompressedTexture&&y.minFilter!==yo&&y.minFilter!==go,r.associations.set(y,{textures:t}),y}).catch(function(){return null});return this.textureCache[p]=h,h}loadImageSource(t,i){const s=this,r=this.json,l=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(g=>g.clone());const c=r.images[t],u=self.URL||self.webkitURL;let p=c.uri||"",h=!1;if(c.bufferView!==void 0)p=s.getDependency("bufferView",c.bufferView).then(function(g){h=!0;const x=new Blob([g],{type:c.mimeType});return p=u.createObjectURL(x),p});else if(c.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const y=Promise.resolve(p).then(function(g){return new Promise(function(x,b){let S=x;i.isImageBitmapLoader===!0&&(S=function(T){const w=new Gn(T);w.needsUpdate=!0,x(w)}),i.load(po.resolveURL(g,l.path),S,void 0,b)})}).then(function(g){return h===!0&&u.revokeObjectURL(p),oi(g,c),g.userData.mimeType=c.mimeType||cv(c.uri),g}).catch(function(g){throw console.error("THREE.GLTFLoader: Couldn't load texture",p),g});return this.sourceCache[t]=y,y}assignTexture(t,i,s,r){const l=this;return this.getDependency("texture",s.index).then(function(c){if(!c)return null;if(s.texCoord!==void 0&&s.texCoord>0&&(c=c.clone(),c.channel=s.texCoord),l.extensions[Ht.KHR_TEXTURE_TRANSFORM]){const u=s.extensions!==void 0?s.extensions[Ht.KHR_TEXTURE_TRANSFORM]:void 0;if(u){const p=l.associations.get(c);c=l.extensions[Ht.KHR_TEXTURE_TRANSFORM].extendTexture(c,u),l.associations.set(c,p)}}return r!==void 0&&(c.colorSpace=r),t[i]=c,c})}assignFinalMaterial(t){const i=t.geometry;let s=t.material;const r=i.attributes.tangent===void 0,l=i.attributes.color!==void 0,c=i.attributes.normal===void 0;if(t.isPoints){const u="PointsMaterial:"+s.uuid;let p=this.cache.get(u);p||(p=new Tg,Xs.prototype.copy.call(p,s),p.color.copy(s.color),p.map=s.map,p.sizeAttenuation=!1,this.cache.add(u,p)),s=p}else if(t.isLine){const u="LineBasicMaterial:"+s.uuid;let p=this.cache.get(u);p||(p=new vg,Xs.prototype.copy.call(p,s),p.color.copy(s.color),p.map=s.map,this.cache.add(u,p)),s=p}if(r||l||c){let u="ClonedMaterial:"+s.uuid+":";r&&(u+="derivative-tangents:"),l&&(u+="vertex-colors:"),c&&(u+="flat-shading:");let p=this.cache.get(u);p||(p=s.clone(),l&&(p.vertexColors=!0),c&&(p.flatShading=!0),r&&(p.normalScale&&(p.normalScale.y*=-1),p.clearcoatNormalScale&&(p.clearcoatNormalScale.y*=-1)),this.cache.add(u,p),this.associations.set(p,this.associations.get(s))),s=p}t.material=s}getMaterialType(){return fc}loadMaterial(t){const i=this,s=this.json,r=this.extensions,l=s.materials[t];let c;const u={},p=l.extensions||{},h=[];if(p[Ht.KHR_MATERIALS_UNLIT]){const g=r[Ht.KHR_MATERIALS_UNLIT];c=g.getMaterialType(),h.push(g.extendParams(u,l,i))}else{const g=l.pbrMetallicRoughness||{};if(u.color=new Le(1,1,1),u.opacity=1,Array.isArray(g.baseColorFactor)){const x=g.baseColorFactor;u.color.setRGB(x[0],x[1],x[2],ti),u.opacity=x[3]}g.baseColorTexture!==void 0&&h.push(i.assignTexture(u,"map",g.baseColorTexture,We)),u.metalness=g.metallicFactor!==void 0?g.metallicFactor:1,u.roughness=g.roughnessFactor!==void 0?g.roughnessFactor:1,g.metallicRoughnessTexture!==void 0&&(h.push(i.assignTexture(u,"metalnessMap",g.metallicRoughnessTexture)),h.push(i.assignTexture(u,"roughnessMap",g.metallicRoughnessTexture))),c=this._invokeOne(function(x){return x.getMaterialType&&x.getMaterialType(t)}),h.push(Promise.all(this._invokeAll(function(x){return x.extendMaterialParams&&x.extendMaterialParams(t,u)})))}l.doubleSided===!0&&(u.side=cg);const y=l.alphaMode||ff.OPAQUE;if(y===ff.BLEND?(u.transparent=!0,u.depthWrite=!1):(u.transparent=!1,y===ff.MASK&&(u.alphaTest=l.alphaCutoff!==void 0?l.alphaCutoff:.5)),l.normalTexture!==void 0&&c!==Ka&&(h.push(i.assignTexture(u,"normalMap",l.normalTexture)),u.normalScale=new Be(1,1),l.normalTexture.scale!==void 0)){const g=l.normalTexture.scale;u.normalScale.set(g,g)}if(l.occlusionTexture!==void 0&&c!==Ka&&(h.push(i.assignTexture(u,"aoMap",l.occlusionTexture)),l.occlusionTexture.strength!==void 0&&(u.aoMapIntensity=l.occlusionTexture.strength)),l.emissiveFactor!==void 0&&c!==Ka){const g=l.emissiveFactor;u.emissive=new Le().setRGB(g[0],g[1],g[2],ti)}return l.emissiveTexture!==void 0&&c!==Ka&&h.push(i.assignTexture(u,"emissiveMap",l.emissiveTexture,We)),Promise.all(h).then(function(){const g=new c(u);return l.name&&(g.name=l.name),oi(g,l),i.associations.set(g,{materials:t}),l.extensions&&Gs(r,g,l),g})}createUniqueName(t){const i=Qt.sanitizeNodeName(t||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(t){const i=this,s=this.extensions,r=this.primitiveCache;function l(u){return s[Ht.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(u,i).then(function(p){return Jy(p,u,i)})}const c=[];for(let u=0,p=t.length;u<p;u++){const h=t[u],y=lv(h),g=r[y];if(g)c.push(g.promise);else{let x;h.extensions&&h.extensions[Ht.KHR_DRACO_MESH_COMPRESSION]?x=l(h):x=Jy(new Zs,h,i),r[y]={primitive:h,promise:x},c.push(x)}}return Promise.all(c)}loadMesh(t){const i=this,s=this.json,r=this.extensions,l=s.meshes[t],c=l.primitives,u=[];for(let p=0,h=c.length;p<h;p++){const y=c[p].material===void 0?av(this.cache):this.getDependency("material",c[p].material);u.push(y)}return u.push(i.loadGeometries(c)),Promise.all(u).then(function(p){const h=p.slice(0,p.length-1),y=p[p.length-1],g=[];for(let b=0,S=y.length;b<S;b++){const T=y[b],w=c[b];let z;const L=h[b];if(w.mode===Vn.TRIANGLES||w.mode===Vn.TRIANGLE_STRIP||w.mode===Vn.TRIANGLE_FAN||w.mode===void 0)z=l.isSkinnedMesh===!0?new qM(T,L):new sr(T,L),z.isSkinnedMesh===!0&&z.normalizeSkinWeights(),w.mode===Vn.TRIANGLE_STRIP?z.geometry=qy(z.geometry,mg):w.mode===Vn.TRIANGLE_FAN&&(z.geometry=qy(z.geometry,gf));else if(w.mode===Vn.LINES)z=new tS(T,L);else if(w.mode===Vn.LINE_STRIP)z=new Uf(T,L);else if(w.mode===Vn.LINE_LOOP)z=new eS(T,L);else if(w.mode===Vn.POINTS)z=new nS(T,L);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+w.mode);Object.keys(z.geometry.morphAttributes).length>0&&ov(z,l),z.name=i.createUniqueName(l.name||"mesh_"+t),oi(z,l),w.extensions&&Gs(r,z,w),i.assignFinalMaterial(z),g.push(z)}for(let b=0,S=g.length;b<S;b++)i.associations.set(g[b],{meshes:t,primitives:b});if(g.length===1)return l.extensions&&Gs(r,g[0],l),g[0];const x=new nf;l.extensions&&Gs(r,x,l),i.associations.set(x,{meshes:t});for(let b=0,S=g.length;b<S;b++)x.add(g[b]);return x})}loadCamera(t){let i;const s=this.json.cameras[t],r=s[s.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return s.type==="perspective"?i=new Df(sc.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):s.type==="orthographic"&&(i=new Ag(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),s.name&&(i.name=this.createUniqueName(s.name)),oi(i,s),Promise.resolve(i)}loadSkin(t){const i=this.json.skins[t],s=[];for(let r=0,l=i.joints.length;r<l;r++)s.push(this._loadNodeShallow(i.joints[r]));return i.inverseBindMatrices!==void 0?s.push(this.getDependency("accessor",i.inverseBindMatrices)):s.push(null),Promise.all(s).then(function(r){const l=r.pop(),c=r,u=[],p=[];for(let h=0,y=c.length;h<y;h++){const g=c[h];if(g){u.push(g);const x=new Xt;l!==null&&x.fromArray(l.array,h*16),p.push(x)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[h])}return new Lf(u,p)})}loadAnimation(t){const i=this.json,s=this,r=i.animations[t],l=r.name?r.name:"animation_"+t,c=[],u=[],p=[],h=[],y=[];for(let g=0,x=r.channels.length;g<x;g++){const b=r.channels[g],S=r.samplers[b.sampler],T=b.target,w=T.node,z=r.parameters!==void 0?r.parameters[S.input]:S.input,L=r.parameters!==void 0?r.parameters[S.output]:S.output;T.node!==void 0&&(c.push(this.getDependency("node",w)),u.push(this.getDependency("accessor",z)),p.push(this.getDependency("accessor",L)),h.push(S),y.push(T))}return Promise.all([Promise.all(c),Promise.all(u),Promise.all(p),Promise.all(h),Promise.all(y)]).then(function(g){const x=g[0],b=g[1],S=g[2],T=g[3],w=g[4],z=[];for(let X=0,D=x.length;X<D;X++){const I=x[X],$=b[X],Z=S[X],et=T[X],Et=w[X];if(I===void 0)continue;I.updateMatrix&&I.updateMatrix();const Mt=s._createAnimationTracks(I,$,Z,et,Et);if(Mt)for(let vt=0;vt<Mt.length;vt++)z.push(Mt[vt])}const L=new lS(l,void 0,z);return oi(L,r),L})}createNodeMesh(t){const i=this.json,s=this,r=i.nodes[t];return r.mesh===void 0?null:s.getDependency("mesh",r.mesh).then(function(l){const c=s._getNodeRef(s.meshCache,r.mesh,l);return r.weights!==void 0&&c.traverse(function(u){if(u.isMesh)for(let p=0,h=r.weights.length;p<h;p++)u.morphTargetInfluences[p]=r.weights[p]}),c})}loadNode(t){const i=this.json,s=this,r=i.nodes[t],l=s._loadNodeShallow(t),c=[],u=r.children||[];for(let h=0,y=u.length;h<y;h++)c.push(s.getDependency("node",u[h]));const p=r.skin===void 0?Promise.resolve(null):s.getDependency("skin",r.skin);return Promise.all([l,Promise.all(c),p]).then(function(h){const y=h[0],g=h[1],x=h[2];x!==null&&y.traverse(function(b){b.isSkinnedMesh&&b.bind(x,uv)});for(let b=0,S=g.length;b<S;b++)y.add(g[b]);return y})}_loadNodeShallow(t){const i=this.json,s=this.extensions,r=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const l=i.nodes[t],c=l.name?r.createUniqueName(l.name):"",u=[],p=r._invokeOne(function(h){return h.createNodeMesh&&h.createNodeMesh(t)});return p&&u.push(p),l.camera!==void 0&&u.push(r.getDependency("camera",l.camera).then(function(h){return r._getNodeRef(r.cameraCache,l.camera,h)})),r._invokeAll(function(h){return h.createNodeAttachment&&h.createNodeAttachment(t)}).forEach(function(h){u.push(h)}),this.nodeCache[t]=Promise.all(u).then(function(h){let y;if(l.isBone===!0?y=new Mg:h.length>1?y=new nf:h.length===1?y=h[0]:y=new Te,y!==h[0])for(let g=0,x=h.length;g<x;g++)y.add(h[g]);if(l.name&&(y.userData.name=l.name,y.name=c),oi(y,l),l.extensions&&Gs(s,y,l),l.matrix!==void 0){const g=new Xt;g.fromArray(l.matrix),y.applyMatrix4(g)}else l.translation!==void 0&&y.position.fromArray(l.translation),l.rotation!==void 0&&y.quaternion.fromArray(l.rotation),l.scale!==void 0&&y.scale.fromArray(l.scale);if(!r.associations.has(y))r.associations.set(y,{});else if(l.mesh!==void 0&&r.meshCache.refs[l.mesh]>1){const g=r.associations.get(y);r.associations.set(y,{...g})}return r.associations.get(y).nodes=t,y}),this.nodeCache[t]}loadScene(t){const i=this.extensions,s=this.json.scenes[t],r=this,l=new nf;s.name&&(l.name=r.createUniqueName(s.name)),oi(l,s),s.extensions&&Gs(i,l,s);const c=s.nodes||[],u=[];for(let p=0,h=c.length;p<h;p++)u.push(r.getDependency("node",c[p]));return Promise.all(u).then(function(p){for(let y=0,g=p.length;y<g;y++)l.add(p[y]);const h=y=>{const g=new Map;for(const[x,b]of r.associations)(x instanceof Xs||x instanceof Gn)&&g.set(x,b);return y.traverse(x=>{const b=r.associations.get(x);b!=null&&g.set(x,b)}),g};return r.associations=h(l),l})}_createAnimationTracks(t,i,s,r,l){const c=[],u=t.name?t.name:t.uuid,p=[];gs[l.path]===gs.weights?t.traverse(function(x){x.morphTargetInfluences&&p.push(x.name?x.name:x.uuid)}):p.push(u);let h;switch(gs[l.path]){case gs.weights:h=er;break;case gs.rotation:h=nr;break;case gs.translation:case gs.scale:h=ir;break;default:switch(s.itemSize){case 1:h=er;break;case 2:case 3:default:h=ir;break}break}const y=r.interpolation!==void 0?sv[r.interpolation]:tr,g=this._getArrayFromAccessor(s);for(let x=0,b=p.length;x<b;x++){const S=new h(p[x]+"."+gs[l.path],i.array,g,y);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),c.push(S)}return c}_getArrayFromAccessor(t){let i=t.array;if(t.normalized){const s=_f(i.constructor),r=new Float32Array(i.length);for(let l=0,c=i.length;l<c;l++)r[l]=i[l]*s;i=r}return i}_createCubicSplineTrackInterpolant(t){t.createInterpolant=function(s){const r=this instanceof nr?iv:Cg;return new r(this.times,this.values,this.getValueSize()/3,s)},t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function fv(f,t,i){const s=t.attributes,r=new Fi;if(s.POSITION!==void 0){const u=i.json.accessors[s.POSITION],p=u.min,h=u.max;if(p!==void 0&&h!==void 0){if(r.set(new q(p[0],p[1],p[2]),new q(h[0],h[1],h[2])),u.normalized){const y=_f(Ja[u.componentType]);r.min.multiplyScalar(y),r.max.multiplyScalar(y)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const l=t.targets;if(l!==void 0){const u=new q,p=new q;for(let h=0,y=l.length;h<y;h++){const g=l[h];if(g.POSITION!==void 0){const x=i.json.accessors[g.POSITION],b=x.min,S=x.max;if(b!==void 0&&S!==void 0){if(p.setX(Math.max(Math.abs(b[0]),Math.abs(S[0]))),p.setY(Math.max(Math.abs(b[1]),Math.abs(S[1]))),p.setZ(Math.max(Math.abs(b[2]),Math.abs(S[2]))),x.normalized){const T=_f(Ja[x.componentType]);p.multiplyScalar(T)}u.max(p)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(u)}f.boundingBox=r;const c=new li;r.getCenter(c.center),c.radius=r.min.distanceTo(r.max)/2,f.boundingSphere=c}function Jy(f,t,i){const s=t.attributes,r=[];function l(c,u){return i.getDependency("accessor",c).then(function(p){f.setAttribute(u,p)})}for(const c in s){const u=wf[c]||c.toLowerCase();u in f.attributes||r.push(l(s[c],u))}if(t.indices!==void 0&&!f.index){const c=i.getDependency("accessor",t.indices).then(function(u){f.setIndex(u)});r.push(c)}return An.workingColorSpace!==ti&&"COLOR_0"in s&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${An.workingColorSpace}" not supported.`),oi(f,t),fv(f,t,i),Promise.all(r).then(function(){return t.targets!==void 0?rv(f,t.targets,i):f})}const Py={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class oc{constructor(){this.textureUtils=null,this.pluginCallbacks=[],this.register(function(t){return new Tv(t)}),this.register(function(t){return new wv(t)}),this.register(function(t){return new zv(t)}),this.register(function(t){return new Cv(t)}),this.register(function(t){return new Rv(t)}),this.register(function(t){return new Nv(t)}),this.register(function(t){return new _v(t)}),this.register(function(t){return new Ev(t)}),this.register(function(t){return new Av(t)}),this.register(function(t){return new Ov(t)}),this.register(function(t){return new Dv(t)}),this.register(function(t){return new Bv(t)}),this.register(function(t){return new Lv(t)}),this.register(function(t){return new Uv(t)})}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}setTextureUtils(t){return this.textureUtils=t,this}parse(t,i,s,r){const l=new vv,c=[];for(let u=0,p=this.pluginCallbacks.length;u<p;u++)c.push(this.pluginCallbacks[u](l));l.setPlugins(c),l.setTextureUtils(this.textureUtils),l.writeAsync(t,i,r).catch(s)}parseAsync(t,i){const s=this;return new Promise(function(r,l){s.parse(t,r,l,i)})}}const jt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},pf="KHR_mesh_quantization",Cn={};Cn[yo]=jt.NEAREST;Cn[hg]=jt.NEAREST_MIPMAP_NEAREST;Cn[fg]=jt.NEAREST_MIPMAP_LINEAR;Cn[go]=jt.LINEAR;Cn[dg]=jt.LINEAR_MIPMAP_NEAREST;Cn[lc]=jt.LINEAR_MIPMAP_LINEAR;Cn[Za]=jt.CLAMP_TO_EDGE;Cn[Wa]=jt.REPEAT;Cn[ic]=jt.MIRRORED_REPEAT;const Wy={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},dv=new Le,$y=12,pv=1179937895,mv=2,tg=8,yv=1313821514,gv=5130562;function uo(f,t){return f.length===t.length&&f.every(function(i,s){return i===t[s]})}function xv(f){return new TextEncoder().encode(f).buffer}function bv(f){return uo(f.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function Mv(f,t,i){const s={min:new Array(f.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(f.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let r=t;r<t+i;r++)for(let l=0;l<f.itemSize;l++){let c;f.itemSize>4?c=f.array[r*f.itemSize+l]:(l===0?c=f.getX(r):l===1?c=f.getY(r):l===2?c=f.getZ(r):l===3&&(c=f.getW(r)),f.normalized===!0&&(c=sc.normalize(c,f.array))),s.min[l]=Math.min(s.min[l],c),s.max[l]=Math.max(s.max[l],c)}return s}function Rg(f){return Math.ceil(f/4)*4}function mf(f,t=0){const i=Rg(f.byteLength);if(i!==f.byteLength){const s=new Uint8Array(i);if(s.set(new Uint8Array(f)),t!==0)for(let r=f.byteLength;r<i;r++)s[r]=t;return s.buffer}return f}function eg(){return typeof document>"u"&&typeof OffscreenCanvas<"u"?new OffscreenCanvas(1,1):document.createElement("canvas")}function Sv(f,t){if(typeof OffscreenCanvas<"u"&&f instanceof OffscreenCanvas){let i;return t==="image/jpeg"?i=.92:t==="image/webp"&&(i=.8),f.convertToBlob({type:t,quality:i})}else return new Promise(i=>f.toBlob(i,t))}class vv{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+zf}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map},this.textureUtils=null}setPlugins(t){this.plugins=t}setTextureUtils(t){this.textureUtils=t}async writeAsync(t,i,s={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},s),this.options.animations.length>0&&(this.options.trs=!0),await this.processInputAsync(t),await Promise.all(this.pending);const r=this,l=r.buffers,c=r.json;s=r.options;const u=r.extensionsUsed,p=r.extensionsRequired,h=new Blob(l,{type:"application/octet-stream"}),y=Object.keys(u),g=Object.keys(p);if(y.length>0&&(c.extensionsUsed=y),g.length>0&&(c.extensionsRequired=g),c.buffers&&c.buffers.length>0&&(c.buffers[0].byteLength=h.size),s.binary===!0){const x=new FileReader;x.readAsArrayBuffer(h),x.onloadend=function(){const b=mf(x.result),S=new DataView(new ArrayBuffer(tg));S.setUint32(0,b.byteLength,!0),S.setUint32(4,gv,!0);const T=mf(xv(JSON.stringify(c)),32),w=new DataView(new ArrayBuffer(tg));w.setUint32(0,T.byteLength,!0),w.setUint32(4,yv,!0);const z=new ArrayBuffer($y),L=new DataView(z);L.setUint32(0,pv,!0),L.setUint32(4,mv,!0);const X=$y+w.byteLength+T.byteLength+S.byteLength+b.byteLength;L.setUint32(8,X,!0);const D=new Blob([z,w,T,S,b],{type:"application/octet-stream"}),I=new FileReader;I.readAsArrayBuffer(D),I.onloadend=function(){i(I.result)}}}else if(c.buffers&&c.buffers.length>0){const x=new FileReader;x.readAsDataURL(h),x.onloadend=function(){const b=x.result;c.buffers[0].uri=b,i(c)}}else i(c)}serializeUserData(t,i){if(Object.keys(t.userData).length===0)return;const s=this.options,r=this.extensionsUsed;try{const l=JSON.parse(JSON.stringify(t.userData));if(s.includeCustomExtensions&&l.gltfExtensions){i.extensions===void 0&&(i.extensions={});for(const c in l.gltfExtensions)i.extensions[c]=l.gltfExtensions[c],r[c]=!0;delete l.gltfExtensions}Object.keys(l).length>0&&(i.extras=l)}catch(l){console.warn("THREE.GLTFExporter: userData of '"+t.name+"' won't be serialized because of JSON.stringify error - "+l.message)}}getUID(t,i=!1){if(this.uids.has(t)===!1){const r=new Map;r.set(!0,this.uid++),r.set(!1,this.uid++),this.uids.set(t,r)}return this.uids.get(t).get(i)}isNormalizedNormalAttribute(t){if(this.cache.attributesNormalized.has(t))return!1;const s=new q;for(let r=0,l=t.count;r<l;r++)if(Math.abs(s.fromBufferAttribute(t,r).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(t){const i=this.cache;if(i.attributesNormalized.has(t))return i.attributesNormalized.get(t);const s=t.clone(),r=new q;for(let l=0,c=s.count;l<c;l++)r.fromBufferAttribute(s,l),r.x===0&&r.y===0&&r.z===0?r.setX(1):r.normalize(),s.setXYZ(l,r.x,r.y,r.z);return i.attributesNormalized.set(t,s),s}applyTextureTransform(t,i){let s=!1;const r={};(i.offset.x!==0||i.offset.y!==0)&&(r.offset=i.offset.toArray(),s=!0),i.rotation!==0&&(r.rotation=i.rotation,s=!0),(i.repeat.x!==1||i.repeat.y!==1)&&(r.scale=i.repeat.toArray(),s=!0),s&&(t.extensions=t.extensions||{},t.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}async buildMetalRoughTextureAsync(t,i){if(t===i)return t;function s(b){return b.colorSpace===We?function(T){return T<.04045?T*.0773993808:Math.pow(T*.9478672986+.0521327014,2.4)}:function(T){return T}}t instanceof lf&&(t=await this.decompressTextureAsync(t)),i instanceof lf&&(i=await this.decompressTextureAsync(i));const r=t?t.image:null,l=i?i.image:null,c=Math.max(r?r.width:0,l?l.width:0),u=Math.max(r?r.height:0,l?l.height:0),p=eg();p.width=c,p.height=u;const h=p.getContext("2d",{willReadFrequently:!0});h.fillStyle="#00ffff",h.fillRect(0,0,c,u);const y=h.getImageData(0,0,c,u);if(r){h.drawImage(r,0,0,c,u);const b=s(t),S=h.getImageData(0,0,c,u).data;for(let T=2;T<S.length;T+=4)y.data[T]=b(S[T]/256)*256}if(l){h.drawImage(l,0,0,c,u);const b=s(i),S=h.getImageData(0,0,c,u).data;for(let T=1;T<S.length;T+=4)y.data[T]=b(S[T]/256)*256}h.putImageData(y,0,0);const x=(t||i).clone();return x.source=new gg(p),x.colorSpace=Nf,x.channel=(t||i).channel,t&&i&&t.channel!==i.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),x}async decompressTextureAsync(t,i=1/0){if(this.textureUtils===null)throw new Error("THREE.GLTFExporter: setTextureUtils() must be called to process compressed textures.");return await this.textureUtils.decompress(t,i)}processBuffer(t){const i=this.json,s=this.buffers;return i.buffers||(i.buffers=[{byteLength:0}]),s.push(t),0}processBufferView(t,i,s,r,l){const c=this.json;c.bufferViews||(c.bufferViews=[]);let u;switch(i){case jt.BYTE:case jt.UNSIGNED_BYTE:u=1;break;case jt.SHORT:case jt.UNSIGNED_SHORT:u=2;break;default:u=4}let p=t.itemSize*u;l===jt.ARRAY_BUFFER&&(p=Math.ceil(p/4)*4);const h=Rg(r*p),y=new DataView(new ArrayBuffer(h));let g=0;for(let S=s;S<s+r;S++){for(let T=0;T<t.itemSize;T++){let w;t.itemSize>4?w=t.array[S*t.itemSize+T]:(T===0?w=t.getX(S):T===1?w=t.getY(S):T===2?w=t.getZ(S):T===3&&(w=t.getW(S)),t.normalized===!0&&(w=sc.normalize(w,t.array))),i===jt.FLOAT?y.setFloat32(g,w,!0):i===jt.INT?y.setInt32(g,w,!0):i===jt.UNSIGNED_INT?y.setUint32(g,w,!0):i===jt.SHORT?y.setInt16(g,w,!0):i===jt.UNSIGNED_SHORT?y.setUint16(g,w,!0):i===jt.BYTE?y.setInt8(g,w):i===jt.UNSIGNED_BYTE&&y.setUint8(g,w),g+=u}g%p!==0&&(g+=p-g%p)}const x={buffer:this.processBuffer(y.buffer),byteOffset:this.byteOffset,byteLength:h};return l!==void 0&&(x.target=l),l===jt.ARRAY_BUFFER&&(x.byteStride=p),this.byteOffset+=h,c.bufferViews.push(x),{id:c.bufferViews.length-1,byteLength:0}}processBufferViewImage(t){const i=this,s=i.json;return s.bufferViews||(s.bufferViews=[]),new Promise(function(r){const l=new FileReader;l.readAsArrayBuffer(t),l.onloadend=function(){const c=mf(l.result),u={buffer:i.processBuffer(c),byteOffset:i.byteOffset,byteLength:c.byteLength};i.byteOffset+=c.byteLength,r(s.bufferViews.push(u)-1)}})}processAccessor(t,i,s,r){const l=this.json,c={1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"};let u;if(t.array.constructor===Float32Array)u=jt.FLOAT;else if(t.array.constructor===Int32Array)u=jt.INT;else if(t.array.constructor===Uint32Array)u=jt.UNSIGNED_INT;else if(t.array.constructor===Int16Array)u=jt.SHORT;else if(t.array.constructor===Uint16Array)u=jt.UNSIGNED_SHORT;else if(t.array.constructor===Int8Array)u=jt.BYTE;else if(t.array.constructor===Uint8Array)u=jt.UNSIGNED_BYTE;else throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+t.array.constructor.name);if(s===void 0&&(s=0),(r===void 0||r===1/0)&&(r=t.count),r===0)return null;const p=Mv(t,s,r);let h;i!==void 0&&(h=t===i.index?jt.ELEMENT_ARRAY_BUFFER:jt.ARRAY_BUFFER);const y=this.processBufferView(t,u,s,r,h),g={bufferView:y.id,byteOffset:y.byteOffset,componentType:u,count:r,max:p.max,min:p.min,type:c[t.itemSize]};return t.normalized===!0&&(g.normalized=!0),l.accessors||(l.accessors=[]),l.accessors.push(g)-1}processImage(t,i,s,r="image/png"){if(t!==null){const l=this,c=l.cache,u=l.json,p=l.options,h=l.pending;c.images.has(t)||c.images.set(t,{});const y=c.images.get(t),g=r+":flipY/"+s.toString();if(y[g]!==void 0)return y[g];u.images||(u.images=[]);const x={mimeType:r},b=eg();b.width=Math.min(t.width,p.maxTextureSize),b.height=Math.min(t.height,p.maxTextureSize);const S=b.getContext("2d",{willReadFrequently:!0});if(s===!0&&(S.translate(0,b.height),S.scale(1,-1)),t.data!==void 0){i!==Rf&&console.error("GLTFExporter: Only RGBAFormat is supported.",i),(t.width>p.maxTextureSize||t.height>p.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",t);const w=new Uint8ClampedArray(t.height*t.width*4);for(let z=0;z<w.length;z+=4)w[z+0]=t.data[z+0],w[z+1]=t.data[z+1],w[z+2]=t.data[z+2],w[z+3]=t.data[z+3];S.putImageData(new ImageData(w,t.width,t.height),0,0)}else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)S.drawImage(t,0,0,b.width,b.height);else throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");p.binary===!0?h.push(Sv(b,r).then(w=>l.processBufferViewImage(w)).then(w=>{x.bufferView=w})):x.uri=yg.getDataURL(b,r);const T=u.images.push(x)-1;return y[g]=T,T}else throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(t){const i=this.json;i.samplers||(i.samplers=[]);const s={magFilter:Cn[t.magFilter],minFilter:Cn[t.minFilter],wrapS:Cn[t.wrapS],wrapT:Cn[t.wrapT]};return i.samplers.push(s)-1}async processTextureAsync(t){const s=this.options,r=this.cache,l=this.json;if(r.textures.has(t))return r.textures.get(t);l.textures||(l.textures=[]),t instanceof lf&&(t=await this.decompressTextureAsync(t,s.maxTextureSize));let c=t.userData.mimeType;c==="image/webp"&&(c="image/png");const u={sampler:this.processSampler(t),source:this.processImage(t.image,t.format,t.flipY,c)};t.name&&(u.name=t.name),await this._invokeAllAsync(async function(h){h.writeTexture&&await h.writeTexture(t,u)});const p=l.textures.push(u)-1;return r.textures.set(t,p),p}async processMaterialAsync(t){const i=this.cache,s=this.json;if(i.materials.has(t))return i.materials.get(t);if(t.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;s.materials||(s.materials=[]);const r={pbrMetallicRoughness:{}};t.isMeshStandardMaterial!==!0&&t.isMeshBasicMaterial!==!0&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const l=t.color.toArray().concat([t.opacity]);if(uo(l,[1,1,1,1])||(r.pbrMetallicRoughness.baseColorFactor=l),t.isMeshStandardMaterial?(r.pbrMetallicRoughness.metallicFactor=t.metalness,r.pbrMetallicRoughness.roughnessFactor=t.roughness):(r.pbrMetallicRoughness.metallicFactor=0,r.pbrMetallicRoughness.roughnessFactor=1),t.metalnessMap||t.roughnessMap){const u=await this.buildMetalRoughTextureAsync(t.metalnessMap,t.roughnessMap),p={index:await this.processTextureAsync(u),texCoord:u.channel};this.applyTextureTransform(p,u),r.pbrMetallicRoughness.metallicRoughnessTexture=p}if(t.map){const u={index:await this.processTextureAsync(t.map),texCoord:t.map.channel};this.applyTextureTransform(u,t.map),r.pbrMetallicRoughness.baseColorTexture=u}if(t.emissive){const u=t.emissive;if(Math.max(u.r,u.g,u.b)>0&&(r.emissiveFactor=t.emissive.toArray()),t.emissiveMap){const h={index:await this.processTextureAsync(t.emissiveMap),texCoord:t.emissiveMap.channel};this.applyTextureTransform(h,t.emissiveMap),r.emissiveTexture=h}}if(t.normalMap){const u={index:await this.processTextureAsync(t.normalMap),texCoord:t.normalMap.channel};t.normalScale&&t.normalScale.x!==1&&(u.scale=t.normalScale.x),this.applyTextureTransform(u,t.normalMap),r.normalTexture=u}if(t.aoMap){const u={index:await this.processTextureAsync(t.aoMap),texCoord:t.aoMap.channel};t.aoMapIntensity!==1&&(u.strength=t.aoMapIntensity),this.applyTextureTransform(u,t.aoMap),r.occlusionTexture=u}t.transparent?r.alphaMode="BLEND":t.alphaTest>0&&(r.alphaMode="MASK",r.alphaCutoff=t.alphaTest),t.side===cg&&(r.doubleSided=!0),t.name!==""&&(r.name=t.name),this.serializeUserData(t,r),await this._invokeAllAsync(async function(u){u.writeMaterialAsync&&await u.writeMaterialAsync(t,r)});const c=s.materials.push(r)-1;return i.materials.set(t,c),c}async processMeshAsync(t){const i=this.cache,s=this.json,r=[t.geometry.uuid];if(Array.isArray(t.material))for(let D=0,I=t.material.length;D<I;D++)r.push(t.material[D].uuid);else r.push(t.material.uuid);const l=r.join(":");if(i.meshes.has(l))return i.meshes.get(l);const c=t.geometry;let u;t.isLineSegments?u=jt.LINES:t.isLineLoop?u=jt.LINE_LOOP:t.isLine?u=jt.LINE_STRIP:t.isPoints?u=jt.POINTS:u=t.material.wireframe?jt.LINES:jt.TRIANGLES;const p={},h={},y=[],g=[],x={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},b=c.getAttribute("normal");b!==void 0&&!this.isNormalizedNormalAttribute(b)&&(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),c.setAttribute("normal",this.createNormalizedNormalAttribute(b)));let S=null;for(let D in c.attributes){if(D.slice(0,5)==="morph")continue;const I=c.attributes[D];if(D=x[D]||D.toUpperCase(),/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(D)||(D="_"+D),i.attributes.has(this.getUID(I))){h[D]=i.attributes.get(this.getUID(I));continue}S=null;const Z=I.array;D==="JOINTS_0"&&!(Z instanceof Uint16Array)&&!(Z instanceof Uint8Array)?(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),S=new ke(new Uint16Array(Z),I.itemSize,I.normalized)):(Z instanceof Uint32Array||Z instanceof Int32Array)&&!D.startsWith("_")&&(console.warn(`GLTFExporter: Attribute "${D}" converted to type FLOAT.`),S=oc.Utils.toFloat32BufferAttribute(I));const et=this.processAccessor(S||I,c);et!==null&&(D.startsWith("_")||this.detectMeshQuantization(D,I),h[D]=et,i.attributes.set(this.getUID(I),et))}if(b!==void 0&&c.setAttribute("normal",b),Object.keys(h).length===0)return null;if(t.morphTargetInfluences!==void 0&&t.morphTargetInfluences.length>0){const D=[],I=[],$={};if(t.morphTargetDictionary!==void 0)for(const Z in t.morphTargetDictionary)$[t.morphTargetDictionary[Z]]=Z;for(let Z=0;Z<t.morphTargetInfluences.length;++Z){const et={};let Et=!1;for(const Mt in c.morphAttributes){if(Mt!=="position"&&Mt!=="normal"){Et||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),Et=!0);continue}const vt=c.morphAttributes[Mt][Z],dt=Mt.toUpperCase(),Vt=c.attributes[Mt];if(i.attributes.has(this.getUID(vt,!0))){et[dt]=i.attributes.get(this.getUID(vt,!0));continue}const ee=vt.clone();if(!c.morphTargetsRelative)for(let Ot=0,H=vt.count;Ot<H;Ot++)for(let tt=0;tt<vt.itemSize;tt++)tt===0&&ee.setX(Ot,vt.getX(Ot)-Vt.getX(Ot)),tt===1&&ee.setY(Ot,vt.getY(Ot)-Vt.getY(Ot)),tt===2&&ee.setZ(Ot,vt.getZ(Ot)-Vt.getZ(Ot)),tt===3&&ee.setW(Ot,vt.getW(Ot)-Vt.getW(Ot));et[dt]=this.processAccessor(ee,c),i.attributes.set(this.getUID(Vt,!0),et[dt])}g.push(et),D.push(t.morphTargetInfluences[Z]),t.morphTargetDictionary!==void 0&&I.push($[Z])}p.weights=D,I.length>0&&(p.extras={},p.extras.targetNames=I)}const T=Array.isArray(t.material);if(T&&c.groups.length===0)return null;let w=!1;if(T&&c.index===null){const D=[];for(let I=0,$=c.attributes.position.count;I<$;I++)D[I]=I;c.setIndex(D),w=!0}const z=T?t.material:[t.material],L=T?c.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let D=0,I=L.length;D<I;D++){const $={mode:u,attributes:h};if(this.serializeUserData(c,$),g.length>0&&($.targets=g),c.index!==null){let et=this.getUID(c.index);(L[D].start!==void 0||L[D].count!==void 0)&&(et+=":"+L[D].start+":"+L[D].count),i.attributes.has(et)?$.indices=i.attributes.get(et):($.indices=this.processAccessor(c.index,c,L[D].start,L[D].count),i.attributes.set(et,$.indices)),$.indices===null&&delete $.indices}const Z=await this.processMaterialAsync(z[L[D].materialIndex]);Z!==null&&($.material=Z),y.push($)}w===!0&&c.setIndex(null),p.primitives=y,s.meshes||(s.meshes=[]),await this._invokeAllAsync(function(D){D.writeMesh&&D.writeMesh(t,p)});const X=s.meshes.push(p)-1;return i.meshes.set(l,X),X}detectMeshQuantization(t,i){if(this.extensionsUsed[pf])return;let s;switch(i.array.constructor){case Int8Array:s="byte";break;case Uint8Array:s="unsigned byte";break;case Int16Array:s="short";break;case Uint16Array:s="unsigned short";break;default:return}i.normalized&&(s+=" normalized");const r=t.split("_",1)[0];Py[r]&&Py[r].includes(s)&&(this.extensionsUsed[pf]=!0,this.extensionsRequired[pf]=!0)}processCamera(t){const i=this.json;i.cameras||(i.cameras=[]);const s=t.isOrthographicCamera,r={type:s?"orthographic":"perspective"};return s?r.orthographic={xmag:t.right*2,ymag:t.top*2,zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near}:r.perspective={aspectRatio:t.aspect,yfov:sc.degToRad(t.fov),zfar:t.far<=0?.001:t.far,znear:t.near<0?0:t.near},t.name!==""&&(r.name=t.type),i.cameras.push(r)-1}processAnimation(t,i){const s=this.json,r=this.nodeMap;s.animations||(s.animations=[]),t=oc.Utils.mergeMorphTargetTracks(t.clone(),i);const l=t.tracks,c=[],u=[];for(let h=0;h<l.length;++h){const y=l[h],g=Qt.parseTrackName(y.name);let x=Qt.findNode(i,g.nodeName);const b=Wy[g.propertyName];if(g.objectName==="bones"&&(x.isSkinnedMesh===!0?x=x.skeleton.getBoneByName(g.objectIndex):x=void 0),!x||!b){console.warn('THREE.GLTFExporter: Could not export animation track "%s".',y.name);continue}const S=1;let T=y.values.length/y.times.length;b===Wy.morphTargetInfluences&&(T/=x.morphTargetInfluences.length);let w;y.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline===!0?(w="CUBICSPLINE",T/=3):y.getInterpolation()===$a?w="STEP":w="LINEAR",u.push({input:this.processAccessor(new ke(y.times,S)),output:this.processAccessor(new ke(y.values,T)),interpolation:w}),c.push({sampler:u.length-1,target:{node:r.get(x),path:b}})}const p={name:t.name||"clip_"+s.animations.length,samplers:u,channels:c};return this.serializeUserData(t,p),s.animations.push(p),s.animations.length-1}processSkin(t){const i=this.json,s=this.nodeMap,r=i.nodes[s.get(t)],l=t.skeleton;if(l===void 0)return null;const c=t.skeleton.bones[0];if(c===void 0)return null;const u=[],p=new Float32Array(l.bones.length*16),h=new Xt;for(let g=0;g<l.bones.length;++g)u.push(s.get(l.bones[g])),h.copy(l.boneInverses[g]),h.multiply(t.bindMatrix).toArray(p,g*16);return i.skins===void 0&&(i.skins=[]),i.skins.push({inverseBindMatrices:this.processAccessor(new ke(p,16)),joints:u,skeleton:s.get(c)}),r.skin=i.skins.length-1}async processNodeAsync(t){const i=this.json,s=this.options,r=this.nodeMap;i.nodes||(i.nodes=[]);const l={};if(s.trs){const u=t.quaternion.toArray(),p=t.position.toArray(),h=t.scale.toArray();uo(u,[0,0,0,1])||(l.rotation=u),uo(p,[0,0,0])||(l.translation=p),uo(h,[1,1,1])||(l.scale=h)}else t.matrixAutoUpdate&&t.updateMatrix(),bv(t.matrix)===!1&&(l.matrix=t.matrix.elements);if(t.name!==""&&(l.name=String(t.name)),this.serializeUserData(t,l),t.isMesh||t.isLine||t.isPoints){const u=await this.processMeshAsync(t);u!==null&&(l.mesh=u)}else t.isCamera&&(l.camera=this.processCamera(t));t.isSkinnedMesh&&this.skins.push(t);const c=i.nodes.push(l)-1;if(r.set(t,c),t.children.length>0){const u=[];for(let p=0,h=t.children.length;p<h;p++){const y=t.children[p];if(y.visible||s.onlyVisible===!1){const g=await this.processNodeAsync(y);g!==null&&u.push(g)}}u.length>0&&(l.children=u)}return await this._invokeAllAsync(function(u){u.writeNode&&u.writeNode(t,l)}),c}async processSceneAsync(t){const i=this.json,s=this.options;i.scenes||(i.scenes=[],i.scene=0);const r={};t.name!==""&&(r.name=t.name),i.scenes.push(r);const l=[];for(let c=0,u=t.children.length;c<u;c++){const p=t.children[c];if(p.visible||s.onlyVisible===!1){const h=await this.processNodeAsync(p);h!==null&&l.push(h)}}l.length>0&&(r.nodes=l),this.serializeUserData(t,r)}async processObjectsAsync(t){const i=new Sf;i.name="AuxScene";for(let s=0;s<t.length;s++)i.children.push(t[s]);await this.processSceneAsync(i)}async processInputAsync(t){const i=this.options;t=t instanceof Array?t:[t],await this._invokeAllAsync(function(r){r.beforeParse&&r.beforeParse(t)});const s=[];for(let r=0;r<t.length;r++)t[r]instanceof Sf?await this.processSceneAsync(t[r]):s.push(t[r]);s.length>0&&await this.processObjectsAsync(s);for(let r=0;r<this.skins.length;++r)this.processSkin(this.skins[r]);for(let r=0;r<i.animations.length;++r)this.processAnimation(i.animations[r],t[0]);await this._invokeAllAsync(function(r){r.afterParse&&r.afterParse(t)})}async _invokeAllAsync(t){for(let i=0,s=this.plugins.length;i<s;i++)await t(this.plugins[i])}}class Tv{constructor(t){this.writer=t,this.name="KHR_lights_punctual"}writeNode(t,i){if(!t.isLight)return;if(!t.isDirectionalLight&&!t.isPointLight&&!t.isSpotLight){console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",t);return}const s=this.writer,r=s.json,l=s.extensionsUsed,c={};t.name&&(c.name=t.name),c.color=t.color.toArray(),c.intensity=t.intensity,t.isDirectionalLight?c.type="directional":t.isPointLight?(c.type="point",t.distance>0&&(c.range=t.distance)):t.isSpotLight&&(c.type="spot",t.distance>0&&(c.range=t.distance),c.spot={},c.spot.innerConeAngle=(1-t.penumbra)*t.angle,c.spot.outerConeAngle=t.angle),t.decay!==void 0&&t.decay!==2&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),t.target&&(t.target.parent!==t||t.target.position.x!==0||t.target.position.y!==0||t.target.position.z!==-1)&&console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),l[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},l[this.name]=!0);const u=r.extensions[this.name].lights;u.push(c),i.extensions=i.extensions||{},i.extensions[this.name]={light:u.length-1}}}class wv{constructor(t){this.writer=t,this.name="KHR_materials_unlit"}async writeMaterialAsync(t,i){if(!t.isMeshBasicMaterial)return;const r=this.writer.extensionsUsed;i.extensions=i.extensions||{},i.extensions[this.name]={},r[this.name]=!0,i.pbrMetallicRoughness.metallicFactor=0,i.pbrMetallicRoughness.roughnessFactor=.9}}class _v{constructor(t){this.writer=t,this.name="KHR_materials_clearcoat"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.clearcoat===0)return;const s=this.writer,r=s.extensionsUsed,l={};if(l.clearcoatFactor=t.clearcoat,t.clearcoatMap){const c={index:await s.processTextureAsync(t.clearcoatMap),texCoord:t.clearcoatMap.channel};s.applyTextureTransform(c,t.clearcoatMap),l.clearcoatTexture=c}if(l.clearcoatRoughnessFactor=t.clearcoatRoughness,t.clearcoatRoughnessMap){const c={index:await s.processTextureAsync(t.clearcoatRoughnessMap),texCoord:t.clearcoatRoughnessMap.channel};s.applyTextureTransform(c,t.clearcoatRoughnessMap),l.clearcoatRoughnessTexture=c}if(t.clearcoatNormalMap){const c={index:await s.processTextureAsync(t.clearcoatNormalMap),texCoord:t.clearcoatNormalMap.channel};t.clearcoatNormalScale.x!==1&&(c.scale=t.clearcoatNormalScale.x),s.applyTextureTransform(c,t.clearcoatNormalMap),l.clearcoatNormalTexture=c}i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Ev{constructor(t){this.writer=t,this.name="KHR_materials_dispersion"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.dispersion===0)return;const r=this.writer.extensionsUsed,l={};l.dispersion=t.dispersion,i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Av{constructor(t){this.writer=t,this.name="KHR_materials_iridescence"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.iridescence===0)return;const s=this.writer,r=s.extensionsUsed,l={};if(l.iridescenceFactor=t.iridescence,t.iridescenceMap){const c={index:await s.processTextureAsync(t.iridescenceMap),texCoord:t.iridescenceMap.channel};s.applyTextureTransform(c,t.iridescenceMap),l.iridescenceTexture=c}if(l.iridescenceIor=t.iridescenceIOR,l.iridescenceThicknessMinimum=t.iridescenceThicknessRange[0],l.iridescenceThicknessMaximum=t.iridescenceThicknessRange[1],t.iridescenceThicknessMap){const c={index:await s.processTextureAsync(t.iridescenceThicknessMap),texCoord:t.iridescenceThicknessMap.channel};s.applyTextureTransform(c,t.iridescenceThicknessMap),l.iridescenceThicknessTexture=c}i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class zv{constructor(t){this.writer=t,this.name="KHR_materials_transmission"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const s=this.writer,r=s.extensionsUsed,l={};if(l.transmissionFactor=t.transmission,t.transmissionMap){const c={index:await s.processTextureAsync(t.transmissionMap),texCoord:t.transmissionMap.channel};s.applyTextureTransform(c,t.transmissionMap),l.transmissionTexture=c}i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Cv{constructor(t){this.writer=t,this.name="KHR_materials_volume"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.transmission===0)return;const s=this.writer,r=s.extensionsUsed,l={};if(l.thicknessFactor=t.thickness,t.thicknessMap){const c={index:await s.processTextureAsync(t.thicknessMap),texCoord:t.thicknessMap.channel};s.applyTextureTransform(c,t.thicknessMap),l.thicknessTexture=c}t.attenuationDistance!==1/0&&(l.attenuationDistance=t.attenuationDistance),l.attenuationColor=t.attenuationColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Rv{constructor(t){this.writer=t,this.name="KHR_materials_ior"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.ior===1.5)return;const r=this.writer.extensionsUsed,l={};l.ior=t.ior,i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Nv{constructor(t){this.writer=t,this.name="KHR_materials_specular"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.specularIntensity===1&&t.specularColor.equals(dv)&&!t.specularIntensityMap&&!t.specularColorMap)return;const s=this.writer,r=s.extensionsUsed,l={};if(t.specularIntensityMap){const c={index:await s.processTextureAsync(t.specularIntensityMap),texCoord:t.specularIntensityMap.channel};s.applyTextureTransform(c,t.specularIntensityMap),l.specularTexture=c}if(t.specularColorMap){const c={index:await s.processTextureAsync(t.specularColorMap),texCoord:t.specularColorMap.channel};s.applyTextureTransform(c,t.specularColorMap),l.specularColorTexture=c}l.specularFactor=t.specularIntensity,l.specularColorFactor=t.specularColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Ov{constructor(t){this.writer=t,this.name="KHR_materials_sheen"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.sheen==0)return;const s=this.writer,r=s.extensionsUsed,l={};if(t.sheenRoughnessMap){const c={index:await s.processTextureAsync(t.sheenRoughnessMap),texCoord:t.sheenRoughnessMap.channel};s.applyTextureTransform(c,t.sheenRoughnessMap),l.sheenRoughnessTexture=c}if(t.sheenColorMap){const c={index:await s.processTextureAsync(t.sheenColorMap),texCoord:t.sheenColorMap.channel};s.applyTextureTransform(c,t.sheenColorMap),l.sheenColorTexture=c}l.sheenRoughnessFactor=t.sheenRoughness,l.sheenColorFactor=t.sheenColor.toArray(),i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Dv{constructor(t){this.writer=t,this.name="KHR_materials_anisotropy"}async writeMaterialAsync(t,i){if(!t.isMeshPhysicalMaterial||t.anisotropy==0)return;const s=this.writer,r=s.extensionsUsed,l={};if(t.anisotropyMap){const c={index:await s.processTextureAsync(t.anisotropyMap)};s.applyTextureTransform(c,t.anisotropyMap),l.anisotropyTexture=c}l.anisotropyStrength=t.anisotropy,l.anisotropyRotation=t.anisotropyRotation,i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Bv{constructor(t){this.writer=t,this.name="KHR_materials_emissive_strength"}async writeMaterialAsync(t,i){if(!t.isMeshStandardMaterial||t.emissiveIntensity===1)return;const r=this.writer.extensionsUsed,l={};l.emissiveStrength=t.emissiveIntensity,i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Lv{constructor(t){this.writer=t,this.name="EXT_materials_bump"}async writeMaterialAsync(t,i){if(!t.isMeshStandardMaterial||t.bumpScale===1&&!t.bumpMap)return;const s=this.writer,r=s.extensionsUsed,l={};if(t.bumpMap){const c={index:await s.processTextureAsync(t.bumpMap),texCoord:t.bumpMap.channel};s.applyTextureTransform(c,t.bumpMap),l.bumpTexture=c}l.bumpFactor=t.bumpScale,i.extensions=i.extensions||{},i.extensions[this.name]=l,r[this.name]=!0}}class Uv{constructor(t){this.writer=t,this.name="EXT_mesh_gpu_instancing"}writeNode(t,i){if(!t.isInstancedMesh)return;const s=this.writer,r=t,l=new Float32Array(r.count*3),c=new Float32Array(r.count*4),u=new Float32Array(r.count*3),p=new Xt,h=new q,y=new Ui,g=new q;for(let b=0;b<r.count;b++)r.getMatrixAt(b,p),p.decompose(h,y,g),h.toArray(l,b*3),y.toArray(c,b*4),g.toArray(u,b*3);const x={TRANSLATION:s.processAccessor(new ke(l,3)),ROTATION:s.processAccessor(new ke(c,4)),SCALE:s.processAccessor(new ke(u,3))};r.instanceColor&&(x._COLOR_0=s.processAccessor(r.instanceColor)),i.extensions=i.extensions||{},i.extensions[this.name]={attributes:x},s.extensionsUsed[this.name]=!0,s.extensionsRequired[this.name]=!0}}oc.Utils={insertKeyframe:function(f,t){const s=f.getValueSize(),r=new f.TimeBufferType(f.times.length+1),l=new f.ValueBufferType(f.values.length+s),c=f.createInterpolant(new f.ValueBufferType(s));let u;if(f.times.length===0){r[0]=t;for(let p=0;p<s;p++)l[p]=0;u=0}else if(t<f.times[0]){if(Math.abs(f.times[0]-t)<.001)return 0;r[0]=t,r.set(f.times,1),l.set(c.evaluate(t),0),l.set(f.values,s),u=0}else if(t>f.times[f.times.length-1]){if(Math.abs(f.times[f.times.length-1]-t)<.001)return f.times.length-1;r[r.length-1]=t,r.set(f.times,0),l.set(f.values,0),l.set(c.evaluate(t),f.values.length),u=r.length-1}else for(let p=0;p<f.times.length;p++){if(Math.abs(f.times[p]-t)<.001)return p;if(f.times[p]<t&&f.times[p+1]>t){r.set(f.times.slice(0,p+1),0),r[p+1]=t,r.set(f.times.slice(p+1),p+2),l.set(f.values.slice(0,(p+1)*s),0),l.set(c.evaluate(t),(p+1)*s),l.set(f.values.slice((p+1)*s),(p+2)*s),u=p+1;break}}return f.times=r,f.values=l,u},mergeMorphTargetTracks:function(f,t){const i=[],s={},r=f.tracks;for(let l=0;l<r.length;++l){let c=r[l];const u=Qt.parseTrackName(c.name),p=Qt.findNode(t,u.nodeName);if(u.propertyName!=="morphTargetInfluences"||u.propertyIndex===void 0){i.push(c);continue}if(c.createInterpolant!==c.InterpolantFactoryMethodDiscrete&&c.createInterpolant!==c.InterpolantFactoryMethodLinear){if(c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),c=c.clone(),c.setInterpolation(tr)}const h=p.morphTargetInfluences.length,y=p.morphTargetDictionary[u.propertyIndex];if(y===void 0)throw new Error("THREE.GLTFExporter: Morph target name not found: "+u.propertyIndex);let g;if(s[p.uuid]===void 0){g=c.clone();const b=new g.ValueBufferType(h*g.times.length);for(let S=0;S<g.times.length;S++)b[S*h+y]=g.values[S];g.name=(u.nodeName||"")+".morphTargetInfluences",g.values=b,s[p.uuid]=g,i.push(g);continue}const x=c.createInterpolant(new c.ValueBufferType(1));g=s[p.uuid];for(let b=0;b<g.times.length;b++)g.values[b*h+y]=x.evaluate(g.times[b]);for(let b=0;b<c.times.length;b++){const S=this.insertKeyframe(g,c.times[b]);g.values[S*h+y]=c.values[b]}}return f.tracks=i,f},toFloat32BufferAttribute:function(f){const t=new ke(new Float32Array(f.count*f.itemSize),f.itemSize,!1);if(!f.normalized&&!f.isInterleavedBufferAttribute)return t.array.set(f.array),t;for(let i=0,s=f.count;i<s;i++)for(let r=0;r<f.itemSize;r++)t.setComponent(i,r,f.getComponent(i,r));return t}};const Ef=(f,t)=>{const i=URL.createObjectURL(f),s=document.createElement("a");s.href=i,s.download=t,s.click(),URL.revokeObjectURL(i)},Ng=(f,t,i)=>({x:f,y:t,z:i,id:ot()}),jv=f=>{let t=`# SubSurfer Export
`,i=1;f.forEach((r,l)=>{t+=`o Cube_${l}
`;const c=[],u=new Map;r.facets.forEach(p=>{p.points.forEach(h=>{h.id&&!u.has(h.id)&&(u.set(h.id,c.length),c.push(h))})}),c.forEach(p=>{t+=`v ${p.x*.001} ${p.y*.001} ${p.z*.001}
`}),r.facets.forEach(p=>{t+="f",p.points.forEach(h=>{if(h.id){const y=u.get(h.id)+i;t+=` ${y}`}}),t+=`
`}),i+=c.length});const s=new Blob([t],{type:"text/plain"});Ef(s,"model.obj")},kv=async f=>{const t=f.split(`
`),i=[],s=[];let r=[];const l=()=>{r.length>0&&(s.push({id:ot(),facets:r,outlineColor:"#1e293b",material:{mode:Ee.Standard,color:"#3b82f6"},layer:0}),r=[])};return t.forEach(c=>{if(c=c.trim(),c.startsWith("#"))return;const u=c.split(/\s+/),p=u[0];if(p==="v"){const h=parseFloat(u[1])*1e3,y=parseFloat(u[2])*1e3,g=parseFloat(u[3])*1e3;i.push(Ng(h,y,g))}else if(p==="f"){const h=[];for(let y=1;y<u.length;y++){const g=u[y].split("/")[0],x=parseInt(g)-1;i[x]&&h.push(i[x])}h.length>=3&&r.push({id:ot(),points:h,cubeId:"",normal:Yt(h)})}else(p==="o"||p==="g")&&(l(),u[1])}),l(),s.forEach(c=>c.facets.forEach(u=>u.cubeId=c.id)),s},Fv=f=>{const t=new Sf;f.forEach(s=>{const r=new Zs,l=[],c=[];let u=0;s.facets.forEach(y=>{const g=y.points;if(g.length<3)return;const x=u;g.forEach(b=>{l.push(b.x*.001,b.y*.001,b.z*.001),u++});for(let b=1;b<g.length-1;b++)c.push(x,x+b,x+b+1)}),r.setAttribute("position",new hc(l,3)),r.setIndex(c),r.computeVertexNormals();const p=new fc({color:s.material.color,roughness:.5,metalness:s.material.mode===Ee.Gold?1:0}),h=new sr(r,p);h.name=s.id,t.add(h)}),new oc().parse(t,s=>{if(s instanceof ArrayBuffer){const r=new Blob([s],{type:"application/octet-stream"});Ef(r,"model.glb")}else{const r=new Blob([JSON.stringify(s)],{type:"text/plain"});Ef(r,"model.gltf")}},s=>console.error(s),{binary:!0})},Hv=f=>new Promise((t,i)=>{new OS().parse(f,"",r=>{const l=[];r.scene.traverse(c=>{if(c instanceof sr){const u=c.geometry,p=u.getAttribute("position"),h=u.getIndex(),y=[],g=ot(),x=new Map,b=S=>{const T=p.getX(S)*1e3,w=p.getY(S)*1e3,z=p.getZ(S)*1e3,L=`${T.toFixed(2)},${w.toFixed(2)},${z.toFixed(2)}`;if(x.has(L))return x.get(L);const X=Ng(T,w,z);return x.set(L,X),X};if(h)for(let S=0;S<h.count;S+=3){const T=h.getX(S),w=h.getX(S+1),z=h.getX(S+2),L=[b(T),b(w),b(z)];y.push({id:ot(),points:L,cubeId:g,normal:Yt(L)})}else for(let S=0;S<p.count;S+=3){const T=[b(S),b(S+1),b(S+2)];y.push({id:ot(),points:T,cubeId:g,normal:Yt(T)})}if(y.length>0){let S="#3b82f6";c.material&&"color"in c.material&&(S="#"+c.material.color.getHexString()),l.push({id:g,facets:y,outlineColor:"#1e293b",material:{mode:Ee.Standard,color:S},layer:0})}}}),t(l)},r=>i(r))}),Vv=(f,t)=>{let i=!1;for(let s=0,r=t.length-1;s<t.length;r=s++){const l=t[s].x,c=t[s].y,u=t[r].x,p=t[r].y;c>f.y!=p>f.y&&f.x<(u-l)*(f.y-c)/(p-c)+l&&(i=!i)}return i},Iv=()=>{const f=kt.useRef(null),t=K0(),i=kt.useRef({cubes:[t],camera:{rotX:.4,rotY:-.6,rotZ:0,zoom:8e3,panX:0,panY:0},selection:{facets:[],cubes:[t.id],edges:[],vertices:[]},visibleLayers:[!0,!0,!0,!0,!0,!0,!0,!0]}),s=kt.useRef(null),r=kt.useRef(!0),l=()=>{r.current=!0},[,c]=kt.useState(0),u=kt.useCallback(()=>c(K=>K+1),[]),[p,h]=kt.useState({toolbox:!0,modeling:!0,scene:!0,layers:!0,files:!0,properties:!0}),y=K=>h(J=>({...J,[K]:!J[K]})),[g,x]=kt.useState(null),b=kt.useRef([]),S=kt.useRef(-1),T=()=>{const K=JSON.parse(JSON.stringify(i.current.cubes));S.current<b.current.length-1&&(b.current=b.current.slice(0,S.current+1)),b.current.push(K),S.current=b.current.length-1},w=()=>{S.current>0&&(S.current--,i.current.cubes=JSON.parse(JSON.stringify(b.current[S.current])),i.current.selection={facets:[],cubes:[],edges:[],vertices:[]},l(),H(),u())},z=()=>{S.current<b.current.length-1&&(S.current++,i.current.cubes=JSON.parse(JSON.stringify(b.current[S.current])),i.current.selection={facets:[],cubes:[],edges:[],vertices:[]},l(),H(),u())};kt.useEffect(()=>{b.current.length===0&&(T(),l())},[]);const[L,X]=kt.useState(lt.Slider),[D,I]=kt.useState(Ye.Translate),[$,Z]=kt.useState({showSolid:!0,showOutlines:!0,showGrid:!0,showNormals:!1,showAxisPlanes:!0}),[et,Et]=kt.useState([!0,!0,!0,!0,!0,!0,!0,!0]),[Mt,vt]=kt.useState(0);kt.useEffect(()=>{i.current.visibleLayers=et,H()},[et]);const dt=kt.useRef({isDragging:!1,isRightDragging:!1,isPanning:!1,isOrbiting:!1,isGizmoDragging:!1,isBoxSelecting:!1,boxSelectStart:{x:0,y:0},boxSelectEnd:{x:0,y:0},gizmoAxis:null,lastX:0,lastY:0,clickStart:0,hoverEdge:null,loopCutRatio:.5,knifeStart:null,knifeCurrent:null}),[Vt,ee]=kt.useState([]);kt.useEffect(()=>{const K=J=>{(J.metaKey||J.ctrlKey)&&J.key==="z"&&(J.shiftKey?z():w(),J.preventDefault()),(J.metaKey||J.ctrlKey)&&J.key==="y"&&(z(),J.preventDefault())};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[]);const Ot=()=>{if(!r.current)return s.current;const K=i.current,J=[],_=new Set,Dt=bt=>{bt.id&&!_.has(bt.id)&&(_.add(bt.id),J.push(bt))};return K.selection.vertices.length>0?K.cubes.forEach(bt=>bt.facets.forEach(nt=>nt.points.forEach(R=>{R.id&&K.selection.vertices.includes(R.id)&&Dt(R)}))):K.selection.edges.length>0?K.cubes.forEach(bt=>bt.facets.forEach(nt=>{for(let R=0;R<nt.points.length;R++){const j=nt.points[R],O=nt.points[(R+1)%nt.points.length];if(!j.id||!O.id)continue;const G=j.id<O.id?j.id:O.id,st=j.id<O.id?O.id:j.id,St=`${G}|${st}`;K.selection.edges.includes(St)&&(Dt(j),Dt(O))}})):K.selection.facets.length>0?K.cubes.forEach(bt=>bt.facets.forEach(nt=>{K.selection.facets.includes(nt.id)&&nt.points.forEach(Dt)})):K.selection.cubes.length>0&&K.cubes.forEach(bt=>{K.selection.cubes.includes(bt.id)&&bt.facets.forEach(nt=>nt.points.forEach(Dt))}),J.length===0?s.current=null:s.current=ve(J),r.current=!1,s.current},H=kt.useCallback(()=>{const K=f.current;if(!K)return;const J=K.getContext("2d");if(!J)return;let _;L===lt.LoopCut&&dt.current.hoverEdge&&(_={edges:Vt,ratio:dt.current.loopCutRatio});let Dt=null;if(L===lt.Knife){let bt=null;if(dt.current.knifeStart){const R=dt.current.knifeStart.target;if(R.type==="vertex"){const j=dt.current.knifeStart.cube.facets.flatMap(O=>O.points).find(O=>O.id===R.id);j&&(bt=j)}else bt=me(R.p1,In(ln(R.p2,R.p1),R.ratio))}let nt=null;if(dt.current.knifeCurrent){const R=dt.current.knifeCurrent;if(R.type==="vertex"){const j=i.current.cubes.flatMap(O=>O.facets).flatMap(O=>O.points).find(O=>O.id===R.id);j&&(nt=j)}else nt=me(R.p1,In(ln(R.p2,R.p1),R.ratio))}bt&&(Dt={start:bt,current:nt})}Y1(J,i.current,{...$,width:K.width,height:K.height,tool:L,gizmoMode:D,gizmoActiveAxis:dt.current.gizmoAxis,selectionCenter:Ot(),loopCutPreview:_,knifeState:Dt,selectionBox:dt.current.isBoxSelecting?{start:dt.current.boxSelectStart,end:dt.current.boxSelectEnd}:null,mousePos:{x:dt.current.lastX,y:dt.current.lastY}})},[$,L,D,Vt]);kt.useEffect(()=>{let K;return(()=>{H()})(),()=>cancelAnimationFrame(K)},[H]),kt.useEffect(()=>{const K=()=>{f.current&&(f.current.width=window.innerWidth,f.current.height=window.innerHeight,H())};return window.addEventListener("resize",K),K(),()=>window.removeEventListener("resize",K)},[H]);const tt=(K,J)=>{const _=Ot();if(!_||!f.current)return null;const Dt=i.current,{width:bt,height:nt}=f.current,{zoom:R,rotX:j,rotY:O,rotZ:G,panX:st,panY:St}=Dt.camera,gt=500,ht=ft=>ye(ft,bt,nt,R,j,O,G,st,St);if(D===Ye.Rotate){const ft=wt=>{for(let mt=0;mt<16;mt++){const Nt=mt/16*Math.PI*2,Tt=(mt+1)/16*Math.PI*2;let Wt={x:0,y:0,z:0},Kt={x:0,y:0,z:0};wt==="x"&&(Wt={x:0,y:Math.cos(Nt)*gt,z:Math.sin(Nt)*gt},Kt={x:0,y:Math.cos(Tt)*gt,z:Math.sin(Tt)*gt}),wt==="y"&&(Wt={x:Math.cos(Nt)*gt,y:0,z:Math.sin(Nt)*gt},Kt={x:Math.cos(Tt)*gt,y:0,z:Math.sin(Tt)*gt}),wt==="z"&&(Wt={x:Math.cos(Nt)*gt,y:Math.sin(Nt)*gt,z:0},Kt={x:Math.cos(Tt)*gt,y:Math.sin(Tt)*gt,z:0});const $t=ht(me(_,Wt)),fe=ht(me(_,Kt));if(eo({x:K,y:J},$t,fe)<8)return!0}return!1};return ft("z")?"z":ft("y")?"y":ft("x")?"x":null}else{const ft=ht(_),wt=ht(me(_,{x:gt,y:0,z:0})),Zt=ht(me(_,{x:0,y:gt,z:0})),mt=ht(me(_,{x:0,y:0,z:gt})),Nt={x:K,y:J},Tt=8;return eo(Nt,ft,wt)<Tt?"x":eo(Nt,ft,Zt)<Tt?"y":eo(Nt,ft,mt)<Tt?"z":null}},ut=(K,J)=>{const _=i.current,Dt=f.current;if(!Dt)return null;const{width:bt,height:nt}=Dt,{zoom:R,rotX:j,rotY:O,rotZ:G,panX:st,panY:St}=_.camera,gt=mt=>ye(mt,bt,nt,R,j,O,G,st,St);let ht=12,ft=null;if(_.cubes.forEach(mt=>{_.visibleLayers[mt.layer]&&mt.facets.forEach(Nt=>{Nt.points.forEach(Tt=>{if(!Tt.id)return;const Wt=gt(Tt),Kt=Math.sqrt((Wt.x-K)**2+(Wt.y-J)**2);Kt<ht&&(ht=Kt,ft={cube:mt,target:{type:"vertex",id:Tt.id}})})})}),ft)return ft;let wt=15,Zt=null;return _.cubes.forEach(mt=>{_.visibleLayers[mt.layer]&&mt.facets.forEach(Nt=>{for(let Tt=0;Tt<Nt.points.length;Tt++){const Wt=Nt.points[Tt],Kt=Nt.points[(Tt+1)%Nt.points.length],$t=gt(Wt),fe=gt(Kt),Xe=eo({x:K,y:J},$t,fe);if(Xe<wt){wt=Xe;const Hi=(fe.x-$t.x)**2+(fe.y-$t.y)**2;let an=.5;Hi>0&&(an=((K-$t.x)*(fe.x-$t.x)+(J-$t.y)*(fe.y-$t.y))/Hi,an=Math.max(0,Math.min(1,an))),Zt={cube:mt,target:{type:"edge",p1:Wt,p2:Kt,ratio:an}}}}})}),Zt},Bt=(K,J)=>{const _=ut(K,J);return _&&_.target.type==="edge"?{cube:_.cube,edge:[_.target.p1,_.target.p2],dist:0,ratio:_.target.ratio}:null},Ct=K=>{const J=f.current;if(!J)return;const _=J.getBoundingClientRect(),Dt=K.clientX-_.left,bt=K.clientY-_.top,nt=dt.current;if(K.button===2){x({x:K.clientX,y:K.clientY,visible:!0});return}else g&&x(null);if(K.button===1&&(nt.isPanning=!0,nt.isDragging=!0),K.button===0){const R=tt(Dt,bt);R&&!K.shiftKey&&(L===lt.Slider||L===lt.Solid||L===lt.Facet||L===lt.Edge||L===lt.Vertex)?(nt.isGizmoDragging=!0,nt.gizmoAxis=R,nt.isDragging=!0,T()):K.shiftKey&&(L===lt.Solid||L===lt.Facet||L===lt.Edge||L===lt.Vertex)?(nt.isBoxSelecting=!0,nt.boxSelectStart={x:Dt,y:bt},nt.boxSelectEnd={x:Dt,y:bt},nt.isDragging=!0):(nt.isOrbiting=!0,nt.isDragging=!0)}nt.lastX=K.clientX,nt.lastY=K.clientY,nt.clickStart=Date.now(),H()},C=K=>{const J=dt.current,_=f.current;if(!_)return;const Dt=_.getBoundingClientRect(),bt=K.clientX-Dt.left,nt=K.clientY-Dt.top;if(L===lt.LoopCut){const st=Bt(bt,nt);if(st){J.hoverEdge={cube:st.cube,edge:st.edge,ratio:st.ratio},J.loopCutRatio=st.ratio;const St=P0(st.cube,st.edge);ee(St)}else J.hoverEdge=null,ee([]);J.lastX=bt,J.lastY=nt,H();return}if(L===lt.Knife){J.lastX=bt,J.lastY=nt;const st=ut(bt,nt);st?J.knifeCurrent=st.target:J.knifeCurrent=null,H()}if(!J.isDragging)return;const R=K.clientX-J.lastX,j=K.clientY-J.lastY,O=i.current,G=O.camera;if(J.isBoxSelecting)J.boxSelectEnd={x:bt,y:nt};else if(J.isGizmoDragging&&J.gizmoAxis&&f.current){const st=Ot();if(st){const{width:St,height:gt}=f.current,{zoom:ht,rotX:ft,rotY:wt,rotZ:Zt,panX:mt,panY:Nt}=G,Tt=500,Wt=Fe=>ye(Fe,St,gt,ht,ft,wt,Zt,mt,Nt),Kt=Wt(st);let $t={x:0,y:0,z:0};J.gizmoAxis==="x"&&($t={x:Tt,y:0,z:0}),J.gizmoAxis==="y"&&($t={x:0,y:Tt,z:0}),J.gizmoAxis==="z"&&($t={x:0,y:0,z:Tt});const fe=Wt(me(st,$t)),Xe={x:fe.x-Kt.x,y:fe.y-Kt.y},Hi={x:R,y:j},an=Xe.x*Xe.x+Xe.y*Xe.y;if(an>.001){const cn=h1(Hi,Xe)/an,Ue=new Set,lr=$e=>{const He=[],Ae=ue=>{ue.id&&!Ue.has(ue.id)&&(Ue.add(ue.id),He.push(ue))};O.selection.vertices.length>0?O.cubes.forEach(ue=>ue.facets.forEach(ze=>ze.points.forEach(tn=>{tn.id&&O.selection.vertices.includes(tn.id)&&Ae(tn)}))):O.selection.edges.length>0?O.cubes.forEach(ue=>ue.facets.forEach(ze=>{for(let tn=0;tn<ze.points.length;tn++){const ni=ze.points[tn],Yn=ze.points[(tn+1)%ze.points.length],dc=ni.id&&Yn.id?ni.id<Yn.id?`${ni.id}|${Yn.id}`:`${Yn.id}|${ni.id}`:"";O.selection.edges.includes(dc)&&(Ae(ni),Ae(Yn))}})):O.selection.facets.length>0?O.cubes.forEach(ue=>ue.facets.forEach(ze=>{O.selection.facets.includes(ze.id)&&ze.points.forEach(Ae)})):O.selection.cubes.length>0&&O.cubes.forEach(ue=>{O.selection.cubes.includes(ue.id)&&ue.facets.forEach(ze=>ze.points.forEach(Ae))}),He.forEach($e)};if(D===Ye.Translate){const $e=In($t,cn);lr(He=>{He.x+=$e.x,He.y+=$e.y,He.z+=$e.z}),s.current&&(s.current=me(s.current,$e))}else if(D===Ye.Scale){const $e=1+cn;lr(He=>{const Ae=ln(He,st);J.gizmoAxis==="x"&&(Ae.x*=$e),J.gizmoAxis==="y"&&(Ae.y*=$e),J.gizmoAxis==="z"&&(Ae.z*=$e);const ue=me(st,Ae);He.x=ue.x,He.y=ue.y,He.z=ue.z})}else if(D===Ye.Rotate){const $e=cn*.1;lr(He=>{const Ae=ln(He,st);let ue=Ae;J.gizmoAxis==="x"&&(ue=ig(Ae,$e)),J.gizmoAxis==="y"&&(ue=sg(Ae,$e)),J.gizmoAxis==="z"&&(ue=ag(Ae,$e));const ze=me(st,ue);He.x=ze.x,He.y=ze.y,He.z=ze.z})}}}}else J.isOrbiting?(G.rotY+=R*.01,G.rotX+=j*.01):J.isPanning&&(G.panX+=R,G.panY+=j);J.lastX=K.clientX,J.lastY=K.clientY,H()},U=K=>{const J=dt.current,_=Date.now()-J.clickStart;if(J.isBoxSelecting){it(),J.isBoxSelecting=!1,J.isDragging=!1,H(),u();return}!J.isGizmoDragging&&!J.isPanning&&!J.isBoxSelecting&&_<200?at(K):J.isGizmoDragging&&u(),J.isDragging=!1,J.isGizmoDragging=!1,J.isOrbiting=!1,J.isPanning=!1,J.gizmoAxis=null,H()},it=()=>{const K=dt.current,J=i.current,_=f.current;if(!_)return;const{width:Dt,height:bt}=_,{zoom:nt,rotX:R,rotY:j,rotZ:O,panX:G,panY:st}=J.camera,St=Wt=>ye(Wt,Dt,bt,nt,R,j,O,G,st),gt=K.boxSelectStart,ht=K.boxSelectEnd,ft=Math.min(gt.x,ht.x),wt=Math.max(gt.x,ht.x),Zt=Math.min(gt.y,ht.y),mt=Math.max(gt.y,ht.y),Nt=Wt=>Wt.x>=ft&&Wt.x<=wt&&Wt.y>=Zt&&Wt.y<=mt,Tt={facets:[],cubes:[],edges:[],vertices:[]};J.cubes.forEach(Wt=>{if(J.visibleLayers[Wt.layer]){if(L===lt.Vertex)Wt.facets.forEach(Kt=>Kt.points.forEach($t=>{if($t.id){const fe=St($t);Nt(fe)&&!Tt.vertices.includes($t.id)&&Tt.vertices.push($t.id)}}));else if(L===lt.Edge)Wt.facets.forEach(Kt=>{for(let $t=0;$t<Kt.points.length;$t++){const fe=Kt.points[$t],Xe=Kt.points[($t+1)%Kt.points.length];if(fe.id&&Xe.id){const Hi=ve([fe,Xe]),an=St(Hi);if(Nt(an)){const Fe=fe.id<Xe.id?fe.id:Xe.id,cn=fe.id<Xe.id?Xe.id:fe.id,Ue=`${Fe}|${cn}`;Tt.edges.includes(Ue)||Tt.edges.push(Ue)}}}});else if(L===lt.Facet)Wt.facets.forEach(Kt=>{const $t=ve(Kt.points),fe=St($t);Nt(fe)&&Tt.facets.push(Kt.id)});else if(L===lt.Solid){const Kt=ve(Wt.facets.flatMap(fe=>fe.points)),$t=St(Kt);Nt($t)&&Tt.cubes.push(Wt.id)}}}),J.selection=Tt,l()},at=K=>{if(K.button!==0)return;const J=f.current;if(!J)return;const _=J.getBoundingClientRect(),Dt=K.clientX-_.left,bt=K.clientY-_.top,nt=i.current,{zoom:R,rotX:j,rotY:O,rotZ:G,panX:st,panY:St}=nt.camera,gt=ht=>ye(ht,J.width,J.height,R,j,O,G,st,St);if(L===lt.LoopCut){if(dt.current.hoverEdge){T();const{cube:ht,edge:ft}=dt.current.hoverEdge,wt=P0(ht,ft);if(wt.length>0){const Zt=dt.current.loopCutRatio,mt=k1(ht,wt,Zt),Nt=nt.cubes.findIndex(Tt=>Tt.id===ht.id);Nt!==-1&&(nt.cubes[Nt]=mt),X(lt.Slider)}}l(),u();return}if(L===lt.Knife){const ht=ut(Dt,bt);if(ht)if(!dt.current.knifeStart)dt.current.knifeStart={cube:ht.cube,target:ht.target};else{const ft=dt.current.knifeStart;if(ft.cube.id===ht.cube.id){T();const wt=F1(ft.cube,ft.target,ht.target),Zt=nt.cubes.findIndex(mt=>mt.id===ft.cube.id);Zt!==-1&&(nt.cubes[Zt]=wt)}dt.current.knifeStart=null,X(lt.Slider)}l(),u();return}if(L===lt.Vertex){let ht=10,ft=null;if(nt.cubes.forEach(wt=>{nt.visibleLayers[wt.layer]&&wt.facets.forEach(Zt=>Zt.points.forEach(mt=>{if(!mt.id)return;const Nt=gt(mt),Tt=Math.sqrt((Nt.x-Dt)**2+(Nt.y-bt)**2);Tt<ht&&(ht=Tt,ft=mt.id)}))}),ft)if(K.ctrlKey){const wt=nt.selection.vertices.indexOf(ft);wt>-1?nt.selection.vertices.splice(wt,1):nt.selection.vertices.push(ft)}else nt.selection.vertices=[ft];else K.ctrlKey||(nt.selection.vertices=[])}else if(L===lt.Edge){const ht=Bt(Dt,bt);if(ht){const ft=ht.edge[0],wt=ht.edge[1];if(ft.id&&wt.id){const Zt=ft.id<wt.id?ft.id:wt.id,mt=ft.id<wt.id?wt.id:ft.id,Nt=`${Zt}|${mt}`;if(K.ctrlKey){const Tt=nt.selection.edges.indexOf(Nt);Tt>-1?nt.selection.edges.splice(Tt,1):nt.selection.edges.push(Nt)}else nt.selection.edges=[Nt]}}else K.ctrlKey||(nt.selection.edges=[])}else{let ht=-1/0,ft=null,wt=null;if(nt.cubes.forEach(Zt=>{nt.visibleLayers[Zt.layer]&&Zt.facets.forEach(mt=>{const Nt=mt.points.map(Tt=>gt(Tt));if(Vv({x:Dt,y:bt},Nt)){const Tt=ve(mt.points),Kt=mo(Tt,nt.camera.rotX,nt.camera.rotY,nt.camera.rotZ).z;Kt>ht&&(ht=Kt,ft=mt,wt=Zt.id)}})}),ft&&wt){if(L===lt.Solid)nt.selection.cubes=[wt],nt.selection.facets=[];else if(L===lt.Facet){if(K.ctrlKey){const Zt=nt.selection.facets.indexOf(ft.id);Zt>-1?nt.selection.facets.splice(Zt,1):nt.selection.facets.push(ft.id)}else nt.selection.facets=[ft.id];nt.selection.cubes=[]}}else nt.selection.facets=[],nt.selection.cubes=[]}L!==lt.Vertex&&(nt.selection.vertices=[]),L!==lt.Edge&&(nt.selection.edges=[]),L!==lt.Facet&&L!==lt.Solid&&(nt.selection.facets=[],nt.selection.cubes=[]),l(),H(),u()},yt=K=>{const J=i.current.camera,_=K.deltaY*5;J.zoom+=_,J.zoom<100&&(J.zoom=100),H()},At=async(K,J)=>{const _=i.current;if(K==="exportOBJ"){const R=new Set(_.selection.cubes),j=R.size>0?_.cubes.filter(O=>R.has(O.id)):_.cubes.filter(O=>_.visibleLayers[O.layer]);jv(j);return}if(K==="exportGLB"){const R=new Set(_.selection.cubes),j=R.size>0?_.cubes.filter(O=>R.has(O.id)):_.cubes.filter(O=>_.visibleLayers[O.layer]);Fv(j);return}if(K==="importFile"&&J){const R=J,j=R.name.toLowerCase();let O=[];try{if(j.endsWith(".obj")){const G=await R.text();O=await kv(G)}else if(j.endsWith(".glb")||j.endsWith(".gltf")){const G=await R.arrayBuffer();O=await Hv(G)}else{alert("Unsupported format. Please use .obj, .glb, or .gltf");return}O.length>0&&(T(),O.forEach(G=>{G.layer=Mt}),_.cubes.push(...O),_.selection.cubes=O.map(G=>G.id),_.selection.facets=[],_.selection.edges=[],_.selection.vertices=[],l(),H(),u())}catch(G){console.error("Import failed:",G),alert("Import failed. Check console for details.")}return}if(K==="undo"){w();return}if(K==="redo"){z();return}const Dt=()=>{const R=new Set(_.selection.cubes);return _.selection.facets.forEach(j=>{const O=_.cubes.find(G=>G.facets.some(st=>st.id===j));O&&R.add(O.id)}),_.selection.edges.forEach(j=>{const O=j.split("|"),G=_.cubes.find(st=>st.facets.some(St=>St.points.some(gt=>gt.id===O[0])));G&&R.add(G.id)}),_.selection.vertices.forEach(j=>{const O=_.cubes.find(G=>G.facets.some(st=>st.points.some(St=>St.id===j)));O&&R.add(O.id)}),R};if(K==="loadMatCap"&&J){const R=new Image;R.onload=()=>{const j=document.createElement("canvas");j.width=R.width,j.height=R.height;const O=j.getContext("2d");if(O){O.drawImage(R,0,0);const G=O.getImageData(0,0,R.width,R.height),st={data:G.data,width:G.width,height:G.height};T();const St=Dt();St.size>0&&_.cubes.forEach(gt=>{St.has(gt.id)&&(gt.material.mode=Ee.Image,gt.material.texture=st)}),H(),u()}},R.src=J;return}if(K==="setMaterial"&&J){T();const R=J,j=Dt();_.cubes.forEach(O=>{j.has(O.id)&&(O.material.mode=R)}),H(),u();return}if(K==="setColor"&&J){const R=J,j=Dt();_.cubes.forEach(O=>{j.has(O.id)&&(O.material.color=R)}),H();return}if(K==="updatePosition"&&J){const R=J,j=Ot();if(!j)return;const O=R.x-j.x,G=R.y-j.y,st=R.z-j.z;if(O===0&&G===0&&st===0)return;T(),Dt();const St=new Set,gt=ht=>{ht.id&&!St.has(ht.id)&&(St.add(ht.id),ht.x+=O,ht.y+=G,ht.z+=st)};_.selection.vertices.length>0?_.cubes.forEach(ht=>ht.facets.forEach(ft=>ft.points.forEach(wt=>{wt.id&&_.selection.vertices.includes(wt.id)&&gt(wt)}))):_.selection.edges.length>0?_.cubes.forEach(ht=>ht.facets.forEach(ft=>{for(let wt=0;wt<ft.points.length;wt++){const Zt=ft.points[wt],mt=ft.points[(wt+1)%ft.points.length],Nt=Zt.id&&mt.id?Zt.id<mt.id?`${Zt.id}|${mt.id}`:`${mt.id}|${Zt.id}`:"";_.selection.edges.includes(Nt)&&(gt(Zt),gt(mt))}})):_.selection.facets.length>0?_.cubes.forEach(ht=>ht.facets.forEach(ft=>{_.selection.facets.includes(ft.id)&&ft.points.forEach(gt)})):_.selection.cubes.length>0&&_.cubes.forEach(ht=>{_.selection.cubes.includes(ht.id)&&ht.facets.forEach(ft=>ft.points.forEach(gt))}),s.current&&(s.current={x:s.current.x+O,y:s.current.y+G,z:s.current.z+st}),H(),u();return}if(K==="moveSelectionToLayer"){T();const R=Dt();_.cubes.forEach(j=>{R.has(j.id)&&(j.layer=Mt)}),H(),u();return}const bt=()=>{const R=new Set;return _.selection.vertices.forEach(j=>R.add(j)),_.selection.edges.forEach(j=>{const O=j.split("|");O.length===2&&(R.add(O[0]),R.add(O[1]))}),_.selection.facets.length>0&&_.cubes.forEach(j=>j.facets.forEach(O=>{_.selection.facets.includes(O.id)&&O.points.forEach(G=>G.id&&R.add(G.id))})),_.selection.cubes.length>0&&_.cubes.forEach(j=>{_.selection.cubes.includes(j.id)&&j.facets.forEach(O=>O.points.forEach(G=>G.id&&R.add(G.id)))}),Array.from(R)};switch(["addCube","addPlane","addSphere","addCylinder","addTorus","addCone","addCircle","addRing","subdivide","subdivideLinear","extrude","extrudeEdge","extrudeVertex","createFace","bevel","inset","spherify","bridge","poke","triangulate","smooth","randomize","flipNormals","mergeVertices","duplicate","delete","bevelEdge","chamferVertex","connect","weldVertices","detach","symmetrizeX","symmetrizeY","symmetrizeZ"].includes(K)&&T(),K){case"addCube":{const R=K0({x:0,y:0,z:0},1e3);R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addPlane":{const R=x1({x:0,y:0,z:0},2e3);R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addSphere":{const R=b1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addCylinder":{const R=M1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addTorus":{const R=S1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addCone":{const R=v1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addCircle":{const R=T1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"addRing":{const R=w1({x:0,y:0,z:0});R.layer=Mt,_.cubes.push(R),_.selection.cubes=[R.id];break}case"clear":{confirm("Clear all solids?")&&(T(),_.cubes=[],_.selection.cubes=[],_.selection.facets=[],_.selection.edges=[],_.selection.vertices=[]);break}case"resetView":{_.camera={rotX:.4,rotY:-.6,rotZ:0,zoom:8e3,panX:0,panY:0};break}case"subdivide":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length===0&&_.selection.facets.length>0){const j=_.selection.facets[0],O=_.cubes.find(G=>G.facets.some(st=>st.id===j));O&&R.push(O)}if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?E1(O):O);_.cubes=j}break}case"subdivideLinear":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length===0&&_.selection.facets.length>0){const j=_.selection.facets[0],O=_.cubes.find(G=>G.facets.some(st=>st.id===j));O&&R.push(O)}if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?A1(O):O);_.cubes=j}break}case"extrude":{const R=_.cubes.map(O=>{let G=O;return O.facets.filter(st=>_.selection.facets.includes(st.id)).forEach(st=>{G=rg(G,st.id,500)}),G});_.cubes=R;const j=[];R.forEach(O=>O.facets.forEach(G=>{G.selected&&j.push(G.id)})),j.length>0&&(_.selection.facets=j);break}case"extrudeEdge":{const R=[],j=_.cubes.map(O=>{const G=H1(O,_.selection.edges);return G.newEdgeKeys.length>0&&R.push(...G.newEdgeKeys),G.cube});_.cubes=j,_.selection.edges=R;break}case"extrudeVertex":{const R=[],j=_.cubes.map(O=>{const G=V1(O,_.selection.vertices);return G.newVertexIds.length>0&&R.push(...G.newVertexIds),G.cube});_.cubes=j,_.selection.vertices=R;break}case"createFace":{const R=new Set(_.selection.vertices);_.selection.edges.forEach(O=>{const G=O.split("|");G.length===2&&(R.add(G[0]),R.add(G[1]))});const j=Array.from(R);if(j.length>=3){const O=_.cubes.map(G=>G.facets.some(St=>St.points.some(gt=>gt.id&&R.has(gt.id)))?_1(G,j):G);_.cubes=O}break}case"bevel":{const R=_.cubes.map(j=>{let O=j;return j.facets.filter(G=>_.selection.facets.includes(G.id)).forEach(G=>{O=lg(O,G.id,.2,50)}),O});_.cubes=R;break}case"inset":{const R=_.cubes.map(O=>{let G=O;return O.facets.filter(st=>_.selection.facets.includes(st.id)).forEach(st=>{G=og(G,st.id,.3)}),G});_.cubes=R;const j=[];R.forEach(O=>O.facets.forEach(G=>{G.selected&&j.push(G.id)})),_.selection.facets=j;break}case"spherify":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length===0&&_.selection.facets.length>0){const j=_.selection.facets[0],O=_.cubes.find(G=>G.facets.some(st=>st.id===j));O&&R.push(O)}if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?O1(O):O);_.cubes=j}break}case"bridge":{if(_.selection.facets.length===2){const R=_.selection.facets[0],j=_.selection.facets[1],O=_.cubes.find(G=>G.facets.some(st=>st.id===R)&&G.facets.some(st=>st.id===j));if(O){const G=D1(O,R,j),st=_.cubes.findIndex(St=>St.id===O.id);_.cubes[st]=G,_.selection.facets=[]}}break}case"poke":{const R=_.cubes.map(j=>{let O=j;return j.facets.filter(G=>_.selection.facets.includes(G.id)).forEach(G=>{O=C1(O,G.id)}),O});_.cubes=R,_.selection.facets=[];break}case"triangulate":{const R=_.cubes.map(j=>{let O=j;return j.facets.filter(G=>_.selection.facets.includes(G.id)).forEach(G=>{O=R1(O,G.id)}),O});_.cubes=R,_.selection.facets=[];break}case"smooth":{const R=bt();if(R.length>0){const j=_.cubes.map(O=>O.facets.some(st=>st.points.some(St=>St.id&&R.includes(St.id)))?B1(O,R,.5):O);_.cubes=j}break}case"randomize":{const R=bt();if(R.length>0){const j=_.cubes.map(O=>O.facets.some(st=>st.points.some(St=>St.id&&R.includes(St.id)))?L1(O,R,50):O);_.cubes=j}break}case"flipNormals":{const R=_.cubes.map(j=>{let O=j;return j.facets.filter(G=>_.selection.facets.includes(G.id)).forEach(G=>{O=N1(O,G.id)}),O});_.cubes=R;break}case"mergeVertices":{if(_.selection.vertices.length>=2){const R=_.cubes.find(j=>j.facets.some(O=>O.points.some(G=>G.id&&_.selection.vertices.includes(G.id))));if(R){const j=J0(R,_.selection.vertices),O=_.cubes.findIndex(G=>G.id===R.id);_.cubes[O]=j,_.selection.vertices=[]}}break}case"duplicate":{if(_.selection.cubes.length===0){if(_.selection.facets.length>0){const R=_.selection.facets[0],j=_.cubes.find(O=>O.facets.some(G=>G.id===R));if(j){const O=Q0(j);_.cubes.push(O),_.selection.cubes=[O.id],_.selection.facets=[]}}}else{const R=[..._.cubes],j=[];_.selection.cubes.forEach(O=>{const G=_.cubes.find(st=>st.id===O);if(G){const st=Q0(G);R.push(st),j.push(st.id)}}),_.cubes=R,_.selection.cubes=j}break}case"delete":{if(_.selection.facets.length>0){const R=_.cubes.map(j=>z1(j,_.selection.facets));_.cubes=R,_.selection.facets=[]}else _.selection.cubes.length>0&&(_.cubes=_.cubes.filter(R=>!_.selection.cubes.includes(R.id)),_.selection.cubes=[]);break}case"bevelEdge":{const R=_.cubes.map(j=>j.facets.some(G=>_.selection.edges.some(st=>{const St=st.split("|");return G.points.some(gt=>gt.id===St[0]||gt.id===St[1])}))?I1(j,_.selection.edges):j);_.cubes=R;break}case"chamferVertex":{const R=bt();if(R.length>0){const j=_.cubes.map(O=>O.facets.some(st=>st.points.some(St=>St.id&&R.includes(St.id)))?j1(O,R,.2):O);_.cubes=j}break}case"connect":{if(_.selection.vertices.length===2){const R=_.selection.vertices[0],j=_.selection.vertices[1],O=_.cubes.map(G=>U1(G,R,j));_.cubes=O}break}case"weldVertices":{const R=bt();if(R.length>=2){const j=_.cubes.map(O=>O.facets.some(st=>st.points.some(St=>St.id&&R.includes(St.id)))?J0(O,R,50):O);_.cubes=j}break}case"detach":{const R=[],j=[];_.cubes.forEach(O=>{const G=G1(O,_.selection.facets);G?(R.push(G.original),R.push(G.newCube),j.push(G.newCube.id)):R.push(O)}),_.cubes=R,_.selection.facets=[],j.length>0&&(_.selection.cubes=j,X(lt.Solid));break}case"symmetrizeX":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?Dh(O,"x"):O);_.cubes=j}break}case"symmetrizeY":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?Dh(O,"y"):O);_.cubes=j}break}case"symmetrizeZ":{const R=_.selection.cubes.length>0?_.cubes.filter(j=>_.selection.cubes.includes(j.id)):[];if(R.length>0){const j=_.cubes.map(O=>R.find(G=>G.id===O.id)?Dh(O,"z"):O);_.cubes=j}break}}l(),H(),u()};return E.jsxs("div",{className:"relative h-screen w-screen bg-gray-900 text-white overflow-hidden font-sans",children:[E.jsxs("div",{className:"absolute inset-0 z-0 bg-black cursor-crosshair",children:[E.jsx("canvas",{ref:f,className:"block w-full h-full",onMouseDown:Ct,onMouseMove:C,onMouseUp:U,onMouseLeave:U,onWheel:yt,onContextMenu:K=>K.preventDefault()}),E.jsx("div",{className:"absolute top-4 right-4 text-right pointer-events-none opacity-40 select-none z-0",children:E.jsx("h2",{className:"text-3xl font-black tracking-tighter text-white/20",children:"SubSurfer"})})]}),E.jsx(o1,{currentTool:L,setTool:X,gizmoMode:D,setGizmoMode:I,options:$,setOptions:Z,onAction:At,visibleLayers:et,toggleLayer:K=>{const J=[...et];J[K]=!J[K],Et(J)},selectedLayer:Mt,setSelectedLayer:vt,selectionCenter:Ot(),selectedObjectCount:i.current.selection.cubes.length+i.current.selection.facets.length+i.current.selection.vertices.length+i.current.selection.edges.length>0?1:0,panelVisibility:p,togglePanel:y,contextMenu:g,closeContextMenu:()=>x(null)})]})},Og=document.getElementById("root");if(!Og)throw new Error("Failed to find the root element");const Gv=n1.createRoot(Og);Gv.render(E.jsx(Kb.StrictMode,{children:E.jsx(Iv,{})}));
